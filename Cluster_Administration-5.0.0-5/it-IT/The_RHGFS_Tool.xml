<?xml version='1.0'?>
<!DOCTYPE appendix PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % RH_ENTITIES SYSTEM "./Common_Config/rh-entities.ent">
%RH_ENTITIES;
]>

<appendix id="ap-gfsgui"><title>The &RHGFSTOOL;</title>
<indexterm>
	
	<primary>&RHGFSTOOL;</primary>
</indexterm>
<indexterm>
	
	<primary>&RHGFSTOOL;</primary>
	<secondary>configuration</secondary>
</indexterm>
<indexterm>
	
	<primary>&RHGFS;</primary>
	<secondary>and &RHCS;</secondary>
</indexterm>
<indexterm>
	
	<primary>&RHGFS; with &RHCS;</primary>
	<secondary>using &RHGFSTOOL;</secondary>
</indexterm>
<indexterm>
	
	<primary>&RHCM;</primary>
	<secondary>with &RHGFS;</secondary>
</indexterm>
<para>
	 The &RHCS; includes a graphical tool for administrators who are new to &RHGFS; configuration. The <application>&RHGFSTOOL;</application> allows administrators to quickly migrate existing &RHCM; cluster systems to &RHGFS;. The <application>&RHGFSTOOL;</application> integrates any previously configured cluster nodes and fencing devices from the existing <filename>/etc/cluster/cluster.conf</filename> configuration file. Administrators can then configure any new nodes and fence devices, as well as associate fence devices to nodes for proper power control. 
</para>
<note>
	<title>Note</title>
	<para>
		 For more detailed information about installation, configuration, and administration of &RHGFS;, refer to the <citetitle>&RHGFSG;</citetitle>. 
	</para>
</note>
<para>
	 The <application>&RHGFSTOOL;</application> can be started by typing <command>system-config-gfscluster</command> as root from a shell prompt.
</para>
<section id="s1-gfsgui-name">
	<title>Cluster Name</title>
	<indexterm>
		
		<primary>&RHGFSTOOL;</primary>
		<secondary>cluster name</secondary>
	</indexterm>
	<para>
		 After reading the introductory screen describing the functionality of the <application>&RHGFSTOOL;</application>, click <guibutton>Forward</guibutton> to continue. You are then prompted to type a name for the GFS cluster. You can enter any name that does <emphasis>not</emphasis> contain spaces. (such as 
		<userinput>Development1</userinput> or 
		<userinput>Engineering_Cluster</userinput>). Click <guibutton>Forward</guibutton> to continue.
	</para>
	<figure id="fig-gfsgui-name">
		<title>Cluster Name</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="images/gfsgui2.png" />
			</imageobject>
			<textobject><para>
				 Entering the Cluster Name.
			</para>
			</textobject>
		</mediaobject>
	</figure>
</section>
<section id="s1-gfsgui-gulm">
	<title><parameter>LOCK_GULM</parameter>parameters</title>
	<indexterm>
		
		<primary>&RHGFSTOOL;</primary>
		<secondary>GULM settings</secondary>
	</indexterm>
	<indexterm>
		
		<primary>Grand Unified Lock Manager</primary><see>GULM</see>
	</indexterm>
	<indexterm>
		
		<primary>GULM</primary>
	</indexterm>
	<indexterm>
		
		<primary>GULM</primary>
		<secondary>configuration with &RHGFSTOOL;</secondary>
	</indexterm>
	<para>
		 After naming the cluster, you must then configure the GFS <parameter>LOCK_GULM</parameter> parameters. The <firstterm>Grand Unified Lock Manager</firstterm>(<acronym>GULM</acronym>) is a centralized server-based locking and cluster state management for GFS file systems. Multiple lock servers can be configured for failover redundancy in the event of server failure. <xref linkend="fig-gfsgui-gulm" /> shows the <parameter>LOCK_GULM</parameter> configuration screen.
	</para>
	<figure id="fig-gfsgui-gulm">
		<title>Configuring LOCK_GULM parameters</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="images/gfsgui3.png" />
			</imageobject>
			<textobject><para>
				 Configuring LOCK_GULM parameters
			</para>
			</textobject>
		</mediaobject>
	</figure>
	<para>
		<guilabel>Allowed Misses</guilabel>		specifies the number of responses that a node can consecutively miss before the lock server(s) declare the node expired. The default value is 2. 
	</para>
	<para>
		<guilabel>Heartbeat Rate</guilabel>		sets the interval (in seconds) at which heartbeats are checked by the lock server(s). Two-thirds of this interval is the rate at which nodes send heartbeat messages to the lock server(s). The default rate is set at 15 seconds. 
	</para>
	<para>
		 After configuring the LOCK_GULM parameters, click <guibutton>Forward</guibutton> to continue.
	</para>
</section>
<section id="s1-gfsgui-sav">
	<title>Choose Location for CCS Files</title>
	<indexterm>
		
		<primary>&RHGFSTOOL;</primary>
		<secondary>and CCS files</secondary>
	</indexterm>
	<para>
		 The next screen prompts you to type or browse for a directory that stores the GFS cluster configuration files created by using the <application>&RHGFSTOOL;</application>. By default, the <filename>/tmp/</filename> directory stores the three configuration files: <filename>cluster.ccs</filename>, <filename>nodes.ccs</filename>, and <filename>fence.ccs</filename>. When a directory is chosen, click <guibutton>Forward</guibutton> to continue.
	</para>
	<figure id="fig-gfsgui-writedir">
		<title>Location to Write GFS Configuration Files</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="images/gfsgui4.png" />
			</imageobject>
			<textobject><para>
				 Location to Write GFS Configuration Files
			</para>
			</textobject>
		</mediaobject>
	</figure>
</section>
<section id="s1-gfsgui-config">
	<title>Cluster Members</title>
	<indexterm>
		
		<primary>&RHGFSTOOL;</primary>
		<secondary>configuring cluster members</secondary>
	</indexterm>
	<para>
		 The next screen allows you to add, delete, and configure cluster nodes. You can also configure <firstterm>fence devices</firstterm>, which are hardware- or software-based devices used to perform shutdown or reboot of nodes that are expired or that need to be serviced. <xref linkend="fig-gfsgui-members" /> shows the cluster and fence device configuration screen. 
	</para>
	<figure id="fig-gfsgui-members">
		<title>Configure Cluster Members</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="images/gfsgui5.png" />
			</imageobject>
			<textobject><para>
				 Configure Cluster Members
			</para>
			</textobject>
		</mediaobject>
	</figure>
	<section id="s2-gfsgui-addmember">
		<title>Adding a New Member</title>
		<indexterm>
			
			<primary>&RHGFSTOOL;</primary>
			<secondary>member configuration</secondary>
		</indexterm>
		<para>
			 Click the <guibutton>Add a New Member Node</guibutton> to create a new cluster member. A window similar to <xref linkend="fig-gfsgui-addmember" /> appears that prompts you to add the <guilabel>Host Name</guilabel>, <guilabel>IP Address</guilabel>, and <guilabel>Network Device</guilabel> of the member node. Once these values are entered, click <guibutton>Update</guibutton> to add the member to the system. 
		</para>
		<figure id="fig-gfsgui-addmember">
			<title>Add a New Cluster Member</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/gfsgui6_addnewmember.png" />
				</imageobject>
				<textobject><para>
					 Add a New Cluster Member
				</para>
				</textobject>
			</mediaobject>
		</figure>
		<para>
			 The added node appears within the <guilabel>Member Nodes and Fence Instances</guilabel> section. You can configure any member node by clicking the <guibutton>Edit Properties</guibutton> button. Clicking <guibutton>Delete Entry</guibutton> deletes the highlighted member node. 
		</para>
	</section>
	<section id="s2-gfsgui-addfence">
		<title>Fence Devices</title>
		<indexterm>
			
			<primary>&RHGFSTOOL;</primary>
			<secondary>fence device configuration</secondary>
		</indexterm>
		<para>
			 To create an entry for a fence device, click the <guibutton>Add a Fence Device</guibutton> button in the <guilabel>Fence Device Specifications</guilabel> section. A window appears similar to <xref linkend="fig-gfsgui-addfence" />. 
		</para>
		<figure id="fig-gfsgui-addfence">
			<title>Add a Fence Device</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/gfsgui6_addfence.png" />
				</imageobject>
				<textobject><para>
					 Add a Fence Device
				</para>
				</textobject>
			</mediaobject>
		</figure>
		<para>
			 Enter a name (do not use spaces) in the <guilabel>Fence Device Name</guilabel> field. Then, choose the type of fence device using the <guilabel>Agent Type</guilabel> drop down menu. Depending on the fence device chosen, enter any required parameters. Available parameters include:
		</para>
		<itemizedlist>
			<listitem>
				<para>
					 IP Address &amp;mdash; The address of the device if it is a network power switch or Fiber Channel switch. 
				</para>
			</listitem>
			<listitem>
				<para>
					 Login &amp;mdash; The username that is entered to access the device. 
				</para>
			</listitem>
			<listitem>
				<para>
					 Password &amp;mdash; The password used to authenticate the username that accesses the device. 
				</para>
			</listitem>
			<listitem>
				<para>
					 Server &amp;mdash; The server name of the device (required when using the Global Network Block Device (<acronym>GNBD</acronym>) as a fencing method. 
				</para>
			</listitem>
			<listitem>
				<para>
					 Hostname &amp;mdash; The hostname of the device. This name must be addressable to the cluster either by DNS assignment or by static entry in each nodes <filename>/etc/hosts</filename> file. 
				</para>
			</listitem>
		</itemizedlist>
		<note>
			<title>Note</title>
			<para>
				 For more information about the types of fence devices in the <guilabel>Agent Type</guilabel> drop down menu, refer to the chapter titled <citetitle>&#34;Creating the Cluster Configuration System Files&#34;</citetitle> in the <citetitle>&RHGFSG;</citetitle>. 
			</para>
		</note>
		<para>
			 Once a fence device is added, you can reconfigure the entry by clicking the <guibutton>Edit Properties</guibutton> button. To delete a device, highlight its entry and click the <guibutton>Delete Entry</guibutton> button. 
		</para>
		<para>
			 Finally, you can associate a fence device to a cluster member by highlighting the entry for the particular member and clicking the <guibutton>Add a Fence to a Node</guibutton> button in the <guilabel>Member Nodes and Fence Instances</guilabel> section. A pop up window appears allowing you to choose any configured fence device from a drop-down menu and associate to the chosen node. Depending on the fence device chosen, you may have to enter additional fence device specifications, such as the <guilabel>Port</guilabel> to which the member node is connected on the fence device. Once configured, click <guibutton>Update</guibutton> and the <application>&RHGFSTOOL;</application> shows the member node with the associated fence device(s) below it. 
		</para>
		<note>
			<title>Note</title>
			<para>
				 You <emphasis>cannot</emphasis> delete a fence device listed in the <guilabel>Fence Device Specifications</guilabel> section if it is associated with a cluster node. You must first delete the fence instance(s) in the <guilabel>Member Nodes and Fence Instances</guilabel> section for that fence device before you delete the entry in the <guilabel>Fence Device Specifications</guilabel> section. 
			</para>
		</note>
	</section>
</section>
<section id="s1-gfsgui-saving">
	<title>Saving Your Configuration and Next Steps</title>
	<indexterm>
		
		<primary>&RHGFSTOOL;</primary>
		<secondary>saving configuration</secondary>
	</indexterm>
	<para>
		 When you are satisfied with your entries, click <guibutton>Forward</guibutton> to continue to the final screen, which prompts you to click <guibutton>Apply</guibutton> and save the changes to the cluster configuration files. A pop up window appears allowing you to write the files or cancel the save and go back and change the settings. 
	</para>
	<important><title>Important</title>
	<para>
		 Once you have written the configuration files, you <emphasis>cannot</emphasis> change them again using the <application>&RHGFSTOOL;</application>. You must either restart the configuration from the beginning or edit each cluster configuration file manually using a text editor such as <command>vi</command> or <command>emacs</command>.
	</para>
	</important>
	<indexterm>
		
		<primary>&RHGFSTOOL;</primary>
		<secondary>post-configuration</secondary>
	</indexterm>
	<indexterm>
		
		<primary>GFS</primary>
		<secondary>configuration</secondary>
		<tertiary>with <command>ccs_tool</command></tertiary>
	</indexterm>
	<indexterm>
		
		<primary>GFS</primary>
		<secondary>cluster archive</secondary>
		<tertiary>configuration</tertiary>
	</indexterm>
	<para>
		 Once the files are saved, you can create the cluster configuration archive (<acronym>CCA</acronym>), which is a binary accessible to the cluster via shared device (also called a <firstterm>pool volume</firstterm>).
	</para>
	<para>
		 Create the CCA by running the <command>ccs_tool</command> at a shell prompt as root. The usage of <command>ccs_tool</command> for creating the CCA is as follows: 
	</para>
	<screen>ccs_tool create <replaceable>/directory</replaceable> <replaceable>CCADevice</replaceable></screen><para>
		 For example, if your cluster configuration files are located in <filename>/tmp</filename>, and you created a shared device named <filename>/dev/pool/devel_cca</filename> using the GFS Pool Volume Manager (which allows you to configure pools of physical storage into logical volumes accessible to cluster nodes as if they were local storage), run the following command: 
	</para>
	<screen>ccs_tool create /tmp/ /dev/pool/devel_cca</screen><para>
		 This chapter briefly explains the process of configuring an existing &RHCM; cluster to leverage &RHGFS; using the <application>&RHGFSTOOL;</application>. However, for complete instructions on how to properly install, setup, run, and configure &RHGFS;, refer to the <citetitle>&RHGFSG;</citetitle>. 
	</para>
</section>
</appendix>
