<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Configuring and Managing a Red Hat Cluster</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="description" content="Configuring and Managing a Red Hat Cluster describes the configuration and management of Red Hat cluster systems for Red Hat Enterprise Linux 5.2 It does not include information about Red Hat Linux Virtual Servers (LVS). Information about installing and configuring LVS is in a separate document." />
  </head>
  <body class="desktop">
    <div class="book" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="index-cluster-administration"></a>Configuring and Managing a Red Hat Cluster</h1>
          </div>
          <div>
            <h2 class="subtitle">Red Hat Cluster for Red Hat Enterprise Linux</h2>
          </div>
          <div>
            <p class="copyright">Copyright © 2008 Red Hat, Inc.</p>
          </div>
          <div>
            <div class="legalnotice">
              <a id="id2737193"></a>
              <p>
		Copyright <span class="trademark"></span>© 2008 Red Hat, Inc. This material may only be distributed subject to the terms and conditions set forth in the Open Publication License, V1.0 or later with the restrictions noted below (the latest version of the OPL is presently available at <a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>).
	</p>
              <p>
		Distribution of substantively modified versions of this document is prohibited without the explicit permission of the copyright holder.
	</p>
              <p>
		Distribution of the work or derivative of the work in any standard (paper) book form for commercial purposes is prohibited unless prior permission is obtained from the copyright holder.
	</p>
              <p>
		Red Hat and the Red Hat "Shadow Man" logo are registered trademarks of Red Hat, Inc. in the United States and other countries.
	</p>
              <p>
		All other trademarks referenced herein are the property of their respective owners.
	</p>
              <p>
		The GPG fingerprint of the security@redhat.com key is:
	</p>
              <p>
		CA 20 86 86 2B D6 9D FC 65 F6 EC C4 21 91 80 CD DB 42 A6 0E
	</p>
              <p>
</p>
              <div class="address">
                <p><span class="street">1801 Varsity Drive</span><br />
<span class="city">Raleigh</span>, <span class="state">NC</span> <span class="postcode">27606-2072</span><br />
<span class="country">USA</span><br />
<span class="phone">Phone: +1 919 754 3700</span><br />
<span class="phone">Phone: 888 733 4281</span><br />
<span class="fax">Fax: +1 919 754 3701</span><br />
<span class="pob">PO Box 13588</span><br />
<span class="city">Research Triangle Park</span>, <span class="state">NC</span> <span class="postcode">27709</span><br />
<span class="country">USA</span></p>
              </div>
              <p>
	</p>
            </div>
          </div>
          <div>
            <p class="pubdate">May 2008</p>
          </div>
          <div>
            <div class="revhistory">
              <table border="1" width="100%" summary="Revision history">
                <tr>
                  <th align="left" valign="top" colspan="3">
                    <b>Revision History</b>
                  </th>
                </tr>
                <tr>
                  <td align="left">Revision 5.2-1</td>
                  <td align="left">Wed May 21 2008</td>
                  <td align="left">
                    <span class="firstname">Michael Hideo<br /></span>
                    <span class="surname">Smith<br /></span>
                    <code class="email">&lt;<a href="mailto:mhideo@redhat.com">mhideo@redhat.com</a>&gt;</code>
                  </td>
                </tr>
                <tr>
                  <td align="left" colspan="3">
				<table class="simplelist" border="0" summary="Simple list"><tr><td>Resolves: #232215</td></tr><tr><td>Changing from XML to HTML Single with floating Table of Contents and viewable by browser</td></tr></table>
			</td>
                </tr>
              </table>
            </div>
          </div>
          <div>
            <div class="abstract">
              <h6>Abstract</h6>
              <p><em class="citetitle">Configuring and Managing a Red Hat Cluster</em> describes the configuration and management of Red Hat cluster systems
for Red Hat Enterprise Linux 5.2 It does not include information about Red Hat Linux
Virtual Servers (LVS). Information about installing and configuring
LVS is in a separate document.</p>
            </div>
          </div>
        </div>
        <hr />
      </div>
      <div class="toc">
        <dl>
          <dt>
            <span class="preface">
              <a href="#ch-intro-CA">Introduction</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#id2723419">1. Document Conventions</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-intro-feedback-CA">2. Feedback</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#ch-overview-CA">1. Red Hat Cluster Configuration and Management Overview</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-clust-config-basics-CA">1.1. Configuration Basics</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-hw-setup-CA">1.1.1. Setting Up Hardware</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-install-clust-sw-CA">1.1.2. Installing Red Hat Cluster software</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-config-cluster-CA">1.1.3. Configuring Red Hat Cluster Software</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-conga-overview-CA">1.2. Conga</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-clumgmttools-overview-CA">1.3. <code class="command">system-config-cluster</code> Cluster Administration GUI</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-cluconfig-tool-CA">1.3.1. <span><strong class="application">Cluster Configuration Tool</strong></span></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-admin-overview-CA">1.3.2. <span><strong class="application">Cluster Status Tool</strong></span></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-cmdlinetools-overview-CA">1.4. Command Line Administration Tools</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#ch-before-config-CA">2. Before Configuring a Red Hat Cluster</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-hw-compat-CA">2.1. Compatible Hardware</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-iptables-CA">2.2. Enabling IP Ports</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-iptables-clnodes-CA">2.2.1. Enabling IP Ports on Cluster Nodes</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-iptables-conga-CA">2.2.2. Enabling IP Ports on Computers That Run <span><strong class="application">luci</strong></span></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-iptables-examples-CA">2.2.3. Examples of <code class="command">iptables</code> Rules</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-acpi-CA">2.3. Configuring ACPI For Use with Integrated Fence Devices</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-acpi-disable-chkconfig-CA">2.3.1. Disabling ACPI Soft-Off with <code class="command">chkconfig</code> Management</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bios-setting-CA">2.3.2. Disabling ACPI Soft-Off with the BIOS</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-acpi-disable-boot-CA">2.3.3. Disabling ACPI Completely in the <code class="filename">grub.conf</code> File</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-clust-svc-ov-CA">2.4. Considerations for Configuring HA Services</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-max-luns-CA">2.5. Configuring max_luns</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-qdisk-considerations-CA">2.6. Considerations for Using Quorum Disk</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-multicast-considerations-CA">2.7. Multicast Addresses</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-conga-considerations-CA">2.8. Considerations for Using <span><strong class="application">Conga</strong></span></a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-clust-config-considerations-CA">2.9. General Configuration Considerations</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#ch-config-conga-CA">3. Configuring Red Hat Cluster With <span><strong class="application">Conga</strong></span></a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-config-tasks-conga-CA">3.1. Configuration Tasks</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-start-luci-ricci-conga-CA">3.2. Starting <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span></a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-creating-cluster-conga-CA">3.3. Creating A Cluster</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-general-prop-conga-CA">3.4. Global Cluster Properties</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-config-fence-devices-conga-CA">3.5. Configuring Fence Devices</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-create-fence-devices-conga-CA">3.5.1. Creating a Shared Fence Device</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-modify-delete-fence-devices-conga-CA">3.5.2. Modifying or Deleting a Fence Device</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-config-member-conga-CA">3.6. Configuring Cluster Members</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-init-member-conga-CA">3.6.1. Initially Configuring Members</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-add-member-running-conga-CA">3.6.2. Adding a Member to a Running Cluster</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-delete-member-conga-CA">3.6.3. Deleting a Member from a Cluster</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-config-failover-domain-conga-CA">3.7. Configuring a Failover Domain</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-config-add-failoverdm-conga-CA">3.7.1. Adding a Failover Domain</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-config-modify-failoverdm-conga-CA">3.7.2. Modifying a Failover Domain</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-config-add-resource-conga-CA">3.8. Adding Cluster Resources</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-add-service-conga-CA">3.9. Adding a Cluster Service to the Cluster</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-config-storage-conga-CA">3.10. Configuring Cluster Storage</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#ch-mgmt-conga-CA">4. Managing Red Hat Cluster With <span><strong class="application">Conga</strong></span></a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-admin-start-conga-CA">4.1. Starting, Stopping, and Deleting Clusters</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-admin-manage-nodes-conga-CA">4.2. Managing Cluster Nodes</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-admin-manage-ha-services-conga-CA">4.3. Managing High-Availability Services</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-admin-problems-conga-CA">4.4. Diagnosing and Correcting Problems in a Cluster</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#ch-config-scc-CA">5. Configuring Red Hat Cluster With <code class="command">system-config-cluster</code></a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-config-tasks-CA">5.1. Configuration Tasks</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-start-clustertool-CA">5.2. Starting the <span><strong class="application">Cluster Configuration Tool</strong></span></a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-naming-cluster-CA">5.3. Configuring Cluster Properties</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-config-fence-devices-CA">5.4. Configuring Fence Devices</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-add-delete-member-CA">5.5. Adding and Deleting Members</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-add-member-new-CA">5.5.1. Adding a Member to a Cluster</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-add-member-running-CA">5.5.2. Adding a Member to a Running Cluster</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-delete-member-CA">5.5.3. Deleting a Member from a Cluster</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-config-failover-domain-CA">5.6. Configuring a Failover Domain</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-config-add-failoverdm-CA">5.6.1. Adding a Failover Domain</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-config-remove-failoverdm-CA">5.6.2. Removing a Failover Domain</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-config-remove-member-failoverdm-CA">5.6.3. Removing a Member from a Failover Domain</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-config-service-dev-CA">5.7. Adding Cluster Services</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-add-service-CA">5.8. Adding a Cluster Service to the Cluster</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-propagate-config-CA">5.9. Propagating The Configuration File: New Cluster</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-starting-cluster-CA">5.10. Starting the Cluster Software</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#ch-mgmt-scc-CA">6. Managing Red Hat Cluster With <code class="command">system-config-cluster</code></a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-admin-start-CA">6.1. Starting and Stopping the Cluster Software</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-admin-service-CA">6.2. Managing High-Availability Services</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-admin-modify-CA">6.3. Modifying the Cluster Configuration</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-admin-backup-CA">6.4. Backing Up and Restoring the Cluster Database</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-admin-disable-CA">6.5. Disabling the Cluster Software</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-admin-problems-CA">6.6. Diagnosing and Correcting Problems in a Cluster</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="appendix">
              <a href="#ap-httpd-service-CA">A. Example of Setting Up Apache HTTP Server</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-apache-setup-CA">A.1. Apache HTTP Server Setup Overview</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-apache-sharedfs-CA">A.2. Configuring Shared Storage</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-apache-inshttpd-CA">A.3. Installing and Configuring the Apache HTTP Server</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="appendix">
              <a href="#ap-fence-device-param-CA">B. Fence Device Parameters</a>
            </span>
          </dt>
          <dt>
            <span class="appendix">
              <a href="#ap-ha-resource-params-CA">C. HA Resource Parameters</a>
            </span>
          </dt>
          <dt>
            <span class="appendix">
              <a href="#ap-ha-resource-behavior-CA">D. HA Resource Behavior</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-clust-rsc-desc-CA">D.1. Parent, Child, and Sibling Relationships Among Resources</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-clust-rsc-sibling-starting-order-CA">D.2. Sibling Start Ordering and Resource Child Ordering</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-clust-rsc-typed-resources-CA">D.2.1. Typed Child Resource Start and Stop Ordering</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-clust-rsc-non-typed-resources-CA">D.2.2. Non-typed Child Resource Start and Stop Ordering</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-clust-rsc-inherit-resc-reuse-CA">D.3. Inheritance, the &lt;resources&gt; Block, and Reusing Resources</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-clust-rsc-failure-rec-CA">D.4. Failure Recovery and Independent Subtrees</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-clust-rsc-testing-config-CA">D.5. Debugging and Testing Services and Resource Ordering</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="appendix">
              <a href="#ap-upgrade-rhel4-to-rhel5-CA">E. Upgrading A Red Hat Cluster from RHEL 4 to RHEL 5</a>
            </span>
          </dt>
          <dt>
            <span class="index">
              <a href="#id2653444">Index</a>
            </span>
          </dt>
        </dl>
      </div>
      <div class="preface" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ch-intro-CA"></a>Introduction</h2>
            </div>
          </div>
        </div>
        <a id="id2673748" class="indexterm"></a>
        <p>
		This document provides information about installing, configuring and managing Red Hat Cluster components. Red Hat Cluster components are part of Red Hat Cluster Suite and allow you to connect a group of computers (called <em class="firstterm">nodes</em> or <em class="firstterm">members</em>) to work together as a cluster. This document does not include information about installing, configuring, and managing Linux Virtual Server (LVS) software. Information about that is in a separate document.
	</p>
        <p>
		The audience of this document should have advanced working knowledge of Red Hat Enterprise Linux and understand the concepts of clusters, storage, and server computing.
	</p>
        <p>
		This document is organized as follows:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<a href="#ch-overview-CA" title="Chapter 1. Red Hat Cluster Configuration and Management Overview">Chapter 1, <i>Red Hat Cluster Configuration and Management Overview</i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ch-before-config-CA" title="Chapter 2. Before Configuring a Red Hat Cluster">Chapter 2, <i>Before Configuring a Red Hat Cluster</i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ch-config-conga-CA" title="Chapter 3. Configuring Red Hat Cluster With Conga">Chapter 3, <i>Configuring Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ch-mgmt-conga-CA" title="Chapter 4. Managing Red Hat Cluster With Conga">Chapter 4, <i>Managing Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ch-config-scc-CA" title="Chapter 5. Configuring Red Hat Cluster With system-config-cluster">Chapter 5, <i>Configuring Red Hat Cluster With <code class="command">system-config-cluster</code></i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ch-mgmt-scc-CA" title="Chapter 6. Managing Red Hat Cluster With system-config-cluster">Chapter 6, <i>Managing Red Hat Cluster With <code class="command">system-config-cluster</code></i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ap-httpd-service-CA" title="Appendix A. Example of Setting Up Apache HTTP Server">Appendix A, <i>Example of Setting Up Apache HTTP Server</i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ap-fence-device-param-CA" title="Appendix B. Fence Device Parameters">Appendix B, <i>Fence Device Parameters</i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ap-ha-resource-behavior-CA" title="Appendix D. HA Resource Behavior">Appendix D, <i>HA Resource Behavior</i></a>
			</p>
            </li>
            <li>
              <p>
				<a href="#ap-upgrade-rhel4-to-rhel5-CA" title="Appendix E. Upgrading A Red Hat Cluster from RHEL 4 to RHEL 5">Appendix E, <i>Upgrading A Red Hat Cluster from RHEL 4 to RHEL 5</i></a>
			</p>
            </li>
          </ul>
        </div>
        <p>
		For more information about Red Hat Enterprise Linux 5, refer to the following resources:
	</p>
        <a id="id2775829" class="indexterm"></a>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<em class="citetitle">Red Hat Enterprise Linux Installation Guide</em> — Provides information regarding installation of Red Hat Enterprise Linux 5.
			</p>
            </li>
            <li>
              <p>
				<em class="citetitle">Red Hat Enterprise Linux Deployment Guide</em> — Provides information regarding the deployment, configuration and administration of Red Hat Enterprise Linux 5.
			</p>
            </li>
          </ul>
        </div>
        <p>
		For more information about Red Hat Cluster Suite for Red Hat Enterprise Linux 5, refer to the following resources:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<em class="citetitle">Red Hat Cluster Suite Overview</em> — Provides a high level overview of the Red Hat Cluster Suite.
			</p>
            </li>
            <li>
              <p>
				<em class="citetitle">LVM Administrator's Guide: Configuration and Administration</em> — Provides a description of the Logical Volume Manager (LVM), including information on running LVM in a clustered environment.
			</p>
            </li>
            <li>
              <p>
				<em class="citetitle">Global File System: Configuration and Administration</em> — Provides information about installing, configuring, and maintaining Red Hat GFS (Red Hat Global File System).
			</p>
            </li>
            <li>
              <p>
				<em class="citetitle">Using Device-Mapper Multipath</em> — Provides information about using the Device-Mapper Multipath feature of Red Hat Enterprise Linux 5.
			</p>
            </li>
            <li>
              <p>
				<em class="citetitle">Using GNBD with Global File System</em> — Provides an overview on using Global Network Block Device (GNBD) with Red Hat GFS.
			</p>
            </li>
            <li>
              <p>
				<em class="citetitle">Linux Virtual Server Administration</em> — Provides information on configuring high-performance systems and services with the Linux Virtual Server (LVS).
			</p>
            </li>
            <li>
              <p>
				<em class="citetitle">Red Hat Cluster Suite Release Notes</em> — Provides information about the current release of Red Hat Cluster Suite.
			</p>
            </li>
          </ul>
        </div>
        <p>
		Red Hat Cluster Suite documentation and other Red Hat documents are available in HTML, PDF, and RPM versions on the Red Hat Enterprise Linux Documentation CD and online at <a href="http://www.redhat.com/docs/">http://www.redhat.com/docs/</a>.
	</p>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="id2723419"></a>1. Document Conventions</h2>
              </div>
            </div>
          </div>
          <p>
		Certain words in this manual are represented in different fonts,
		styles, and weights. This highlighting indicates that the word is part
		of a specific category. The categories include the following:
	</p>
          <div class="variablelist">
            <dl>
              <dt>
                <span class="term">
                  <code class="literal">Courier font</code>
                </span>
              </dt>
              <dd>
                <p>
					Courier font represents <code class="command">commands</code>, <code class="filename">file
					names and paths</code>, and
					<code class="prompt">prompts</code>
					.
				</p>
                <p>
					When shown as below, it indicates computer output:
</p>
                <pre class="screen">
Desktop       about.html       logs      paulwesterberg.png
Mail          backupfiles      mail      reports
</pre>
                <p>
				</p>
              </dd>
              <dt>
                <span class="term">
                  <strong class="userinput">
                    <code>bold Courier font</code>
                  </strong>
                </span>
              </dt>
              <dd>
                <p>
					Bold Courier font represents text that you are to type, such as:
					<strong class="userinput"><code>service jonas start</code></strong>
				</p>
                <p>
					If you have to run a command as root, the root prompt
					(<code class="literal">#</code>) precedes the command:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>gconftool-2
</code></strong>
				</pre>
              </dd>
              <dt>
                <span class="term">
                  <em class="replaceable">
                    <code>italic Courier font</code>
                  </em>
                </span>
              </dt>
              <dd>
                <p>
					Italic Courier font represents a variable, such as an installation
					directory: <code class="filename">
					<em class="replaceable"><code>install_dir</code></em>/bin/</code>
				</p>
              </dd>
              <dt>
                <span class="term">
                  <span>
                    <strong class="application">bold font</strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					Bold font represents <span><strong class="application">application
					programs</strong></span> and <span><strong class="guilabel">text found on a graphical
					interface</strong></span>.
				</p>
                <p>
					When shown like this: <span><strong class="guibutton"> OK </strong></span>, it indicates a
					button on a graphical application interface.
				</p>
              </dd>
            </dl>
          </div>
          <p>
		Additionally, the manual uses different strategies to draw your
		attention to pieces of information. In order of how critical the
		information is to you, these items are marked as follows:
	</p>
          <div class="note">
            <h2>Note</h2>
            <p>
			A note is typically information that you need to understand the
			behavior of the system.
		</p>
          </div>
          <div class="tip">
            <h2>Tip</h2>
            <p>
			A tip is typically an alternative way of performing a task.
		</p>
          </div>
          <div class="important">
            <h2>Important</h2>
            <p>
			Important information is necessary, but possibly unexpected, such as
			a configuration change that will not persist after a reboot.
		</p>
          </div>
          <div class="caution">
            <h2>Caution</h2>
            <p>
			A caution indicates an act that would violate your support agreement,
			such as recompiling the kernel.
		</p>
          </div>
          <div class="warning">
            <h2>Warning</h2>
            <p>
			A warning indicates potential data loss, as may happen when tuning
			hardware for maximum performance.
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-intro-feedback-CA"></a>2. Feedback</h2>
              </div>
            </div>
          </div>
          <a id="id2746892" class="indexterm"></a>
          <a id="id2744585" class="indexterm"></a>
          <p>
			If you spot a typo, or if you have thought of a way to make this manual better, we would love to hear from you. Please submit a report in Bugzilla (<a href="http://bugzilla.redhat.com/bugzilla/">http://bugzilla.redhat.com/bugzilla/</a>) against the component <span><strong class="guimenuitem">Documentation-cluster</strong></span>.
		</p>
          <p>
			Be sure to mention the manual's identifier:
		</p>
          <pre class="screen">
Cluster_Administration(EN)-5.2 (2008-05-19T17:11)
</pre>
          <p>
			By mentioning this manual's identifier, we know exactly which version of the guide you have.
		</p>
          <p>
			If you have a suggestion for improving the documentation, try to be as specific as possible. If you have found an error, please include the section number and some of the surrounding text so we can find it easily.
		</p>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ch-overview-CA"></a>Chapter 1. Red Hat Cluster Configuration and Management Overview</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#s1-clust-config-basics-CA">1.1. Configuration Basics</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-hw-setup-CA">1.1.1. Setting Up Hardware</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-install-clust-sw-CA">1.1.2. Installing Red Hat Cluster software</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-config-cluster-CA">1.1.3. Configuring Red Hat Cluster Software</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-conga-overview-CA">1.2. Conga</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-clumgmttools-overview-CA">1.3. <code class="command">system-config-cluster</code> Cluster Administration GUI</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-cluconfig-tool-CA">1.3.1. <span><strong class="application">Cluster Configuration Tool</strong></span></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-admin-overview-CA">1.3.2. <span><strong class="application">Cluster Status Tool</strong></span></a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-cmdlinetools-overview-CA">1.4. Command Line Administration Tools</a>
              </span>
            </dt>
          </dl>
        </div>
        <p>
		Red Hat Cluster allows you to connect a group of computers (called <em class="firstterm">nodes</em> or <em class="firstterm">members</em>) to work together as a cluster. You can use Red Hat Cluster to suit your clustering needs (for example, setting up a cluster for sharing files on a GFS file system or setting up service failover).
	</p>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clust-config-basics-CA"></a>1.1. Configuration Basics</h2>
              </div>
            </div>
          </div>
          <p>
			To set up a cluster, you must connect the nodes to certain cluster hardware and configure the nodes into the cluster environment. This chapter provides an overview of cluster configuration and management, and tools available for configuring and managing a Red Hat Cluster.
		</p>
          <p>
			Configuring and managing a Red Hat Cluster consists of the following basic steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Setting up hardware. Refer to <a href="#s2-hw-setup-CA" title="1.1.1. Setting Up Hardware">Section 1.1.1, “Setting Up Hardware”</a>.
				</p>
              </li>
              <li>
                <p>
					Installing Red Hat Cluster software. Refer to <a href="#s2-install-clust-sw-CA" title="1.1.2. Installing Red Hat Cluster software">Section 1.1.2, “Installing Red Hat Cluster software”</a>.
				</p>
              </li>
              <li>
                <p>
					Configuring Red Hat Cluster Software. Refer to <a href="#s2-config-cluster-CA" title="1.1.3. Configuring Red Hat Cluster Software">Section 1.1.3, “Configuring Red Hat Cluster Software”</a>.
				</p>
              </li>
            </ol>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-hw-setup-CA"></a>1.1.1. Setting Up Hardware</h3>
                </div>
              </div>
            </div>
            <p>
				Setting up hardware consists of connecting cluster nodes to other hardware required to run a Red Hat Cluster. The amount and type of hardware varies according to the purpose and availability requirements of the cluster. Typically, an enterprise-level cluster requires the following type of hardware (refer to <a href="#fig-clust-hw-ov-CA" title="Figure 1.1. Red Hat Cluster Hardware Overview">Figure 1.1, “Red Hat Cluster Hardware Overview”</a>). For considerations about hardware and other cluster configuration concerns, refer to <a href="#ch-before-config-CA" title="Chapter 2. Before Configuring a Red Hat Cluster">Chapter 2, <i>Before Configuring a Red Hat Cluster</i></a> or check with an authorized Red Hat representative.
			</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
						Cluster nodes — Computers that are capable of running Red Hat Enterprise Linux 5 software, with at least 1GB of RAM.
					</p>
                </li>
                <li>
                  <p>
						Ethernet switch or hub for public network — This is required for client access to the cluster.
					</p>
                </li>
                <li>
                  <p>
						Ethernet switch or hub for private network — This is required for communication among the cluster nodes and other cluster hardware such as network power switches and Fibre Channel switches.
					</p>
                </li>
                <li>
                  <p>
						Network power switch — A network power switch is recommended to perform fencing in an enterprise-level cluster.
					</p>
                </li>
                <li>
                  <p>
						Fibre Channel switch — A Fibre Channel switch provides access to Fibre Channel storage. Other options are available for storage according to the type of storage interface; for example, iSCSI or GNBD. A Fibre Channel switch can be configured to perform fencing.
					</p>
                </li>
                <li>
                  <p>
						Storage — Some type of storage is required for a cluster. The type required depends on the purpose of the cluster.
					</p>
                </li>
              </ul>
            </div>
            <div class="figure">
              <a id="fig-clust-hw-ov-CA"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="./images/9159.png" alt="Red Hat Cluster Hardware Overview" />
                  <div class="longdesc">
                    <p>
							cluster hardware
						</p>
                  </div>
                </div>
              </div>
              <h6>Figure 1.1. Red Hat Cluster Hardware Overview</h6>
            </div>
            <br class="figure-break" />
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-install-clust-sw-CA"></a>1.1.2. Installing Red Hat Cluster software</h3>
                </div>
              </div>
            </div>
            <p>
				To install Red Hat Cluster software, you must have entitlements for the software. If you are using the <span><strong class="application">Conga</strong></span> configuration GUI, you can let it install the cluster software. If you are using other tools to configure the cluster, secure and install the software as you would with Red Hat Enterprise Linux software.
			</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-config-cluster-CA"></a>1.1.3. Configuring Red Hat Cluster Software</h3>
                </div>
              </div>
            </div>
            <a id="id2765073" class="indexterm"></a>
            <p>
				Configuring Red Hat Cluster software consists of using configuration tools to specify the relationship among the cluster components. <a href="#fig-software-flow-conga-CA" title="Figure 1.2. Cluster Configuration Structure">Figure 1.2, “Cluster Configuration Structure”</a> shows an example of the hierarchical relationship among cluster nodes, high-availability services, and resources. The cluster nodes are connected to one or more fencing devices. Nodes can be grouped into a failover domain for a cluster service. The services comprise resources such as NFS exports, IP addresses, and shared GFS partitions.
			</p>
            <div class="figure">
              <a id="fig-software-flow-conga-CA"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="./images/clust-config-struct.png" alt="Cluster Configuration Structure" />
                  <div class="longdesc">
                    <p>
							cluster config flowchart
						</p>
                  </div>
                </div>
              </div>
              <h6>Figure 1.2. Cluster Configuration Structure</h6>
            </div>
            <br class="figure-break" />
            <p>
				The following cluster configuration tools are available with Red Hat Cluster:
			</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
						<span><strong class="application">Conga</strong></span> — This is a comprehensive user interface for installing, configuring, and managing Red Hat clusters, computers, and storage attached to clusters and computers.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">system-config-cluster</code> — This is a user interface for configuring and managing a Red Hat cluster.
					</p>
                </li>
                <li>
                  <p>
						Command line tools — This is a set of command line tools for configuring and managing a Red Hat cluster.
					</p>
                </li>
              </ul>
            </div>
            <p>
				A brief overview of each configuration tool is provided in the following sections:
			</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
						<a href="#s1-conga-overview-CA" title="1.2. Conga">Section 1.2, “Conga”</a>
					</p>
                </li>
                <li>
                  <p>
						<a href="#s1-clumgmttools-overview-CA" title="1.3. system-config-cluster Cluster Administration GUI">Section 1.3, “<code class="command">system-config-cluster</code> Cluster Administration GUI”</a>
					</p>
                </li>
                <li>
                  <p>
						<a href="#s1-cmdlinetools-overview-CA" title="1.4. Command Line Administration Tools">Section 1.4, “Command Line Administration Tools”</a>
					</p>
                </li>
              </ul>
            </div>
            <p>
				In addition, information about using <span><strong class="application">Conga</strong></span> and <code class="command">system-config-cluster</code> is provided in subsequent chapters of this document. Information about the command line tools is available in the man pages for the tools.
			</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-conga-overview-CA"></a>1.2. Conga</h2>
              </div>
            </div>
          </div>
          <a id="id2764591" class="indexterm"></a>
          <a id="id2768934" class="indexterm"></a>
          <p>
			<span><strong class="application">Conga</strong></span> is an integrated set of software components that provides centralized configuration and management of Red Hat clusters and storage. <span><strong class="application">Conga</strong></span> provides the following major features:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					One Web interface for managing cluster and storage
				</p>
              </li>
              <li>
                <p>
					Automated Deployment of Cluster Data and Supporting Packages
				</p>
              </li>
              <li>
                <p>
					Easy Integration with Existing Clusters
				</p>
              </li>
              <li>
                <p>
					No Need to Re-Authenticate
				</p>
              </li>
              <li>
                <p>
					Integration of Cluster Status and Logs
				</p>
              </li>
              <li>
                <p>
					Fine-Grained Control over User Permissions
				</p>
              </li>
            </ul>
          </div>
          <p>
			The primary components in <span><strong class="application">Conga</strong></span> are <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span>, which are separately installable. <span><strong class="application">luci</strong></span> is a server that runs on one computer and communicates with multiple clusters and computers via <span><strong class="application">ricci</strong></span>. <span><strong class="application">ricci</strong></span> is an agent that runs on each computer (either a cluster member or a standalone computer) managed by <span><strong class="application">Conga</strong></span>.
		</p>
          <p>
			<span><strong class="application">luci</strong></span> is accessible through a Web browser and provides three major functions that are accessible through the following tabs:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<span><strong class="guimenu">homebase</strong></span> — Provides tools for adding and deleting computers, adding and deleting users, and configuring user privileges. Only a system administrator is allowed to access this tab.
				</p>
              </li>
              <li>
                <p>
					<span><strong class="guimenu">cluster</strong></span> — Provides tools for creating and configuring clusters. Each instance of <span><strong class="application">luci</strong></span> lists clusters that have been set up with that <span><strong class="application">luci</strong></span>. A system administrator can administer all clusters listed on this tab. Other users can administer only clusters that the user has permission to manage (granted by an administrator).
				</p>
              </li>
              <li>
                <p>
					<span><strong class="guimenu">storage</strong></span> — Provides tools for remote administration of storage. With the tools on this tab, you can manage storage on computers whether they belong to a cluster or not.
				</p>
              </li>
            </ul>
          </div>
          <p>
			To administer a cluster or storage, an administrator adds (or <em class="firstterm">registers</em>) a cluster or a computer to a <span><strong class="application">luci</strong></span> server. When a cluster or a computer is registered with <span><strong class="application">luci</strong></span>, the FQDN hostname or IP address of each computer is stored in a <span><strong class="application">luci</strong></span> database.
		</p>
          <p>
			You can populate the database of one <span><strong class="application">luci</strong></span> instance from another <span><strong class="application">luci</strong></span>instance. That capability provides a means of replicating a <span><strong class="application">luci</strong></span> server instance and provides an efficient upgrade and testing path. When you install an instance of <span><strong class="application">luci</strong></span>, its database is empty. However, you can import part or all of a <span><strong class="application">luci</strong></span> database from an existing <span><strong class="application">luci</strong></span> server when deploying a new <span><strong class="application">luci</strong></span> server.
		</p>
          <p>
			Each <span><strong class="application">luci</strong></span> instance has one user at initial installation — admin. Only the admin user may add systems to a <span><strong class="application">luci</strong></span> server. Also, the admin user can create additional user accounts and determine which users are allowed to access clusters and computers registered in the <span><strong class="application">luci</strong></span> database. It is possible to import users as a batch operation in a new <span><strong class="application">luci</strong></span> server, just as it is possible to import clusters and computers.
		</p>
          <p>
			When a computer is added to a <span><strong class="application">luci</strong></span> server to be administered, authentication is done once. No authentication is necessary from then on (unless the certificate used is revoked by a CA). After that, you can remotely configure and manage clusters and storage through the <span><strong class="application">luci</strong></span> user interface. <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span> communicate with each other via XML.
		</p>
          <p>
			The following figures show sample displays of the three major <span><strong class="application">luci</strong></span> tabs: <span><strong class="guimenu">homebase</strong></span>, <span><strong class="guimenu">cluster</strong></span>, and <span><strong class="guimenu">storage</strong></span>.
		</p>
          <p>
			For more information about <span><strong class="application">Conga</strong></span>, refer to <a href="#ch-config-conga-CA" title="Chapter 3. Configuring Red Hat Cluster With Conga">Chapter 3, <i>Configuring Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a>, <a href="#ch-mgmt-conga-CA" title="Chapter 4. Managing Red Hat Cluster With Conga">Chapter 4, <i>Managing Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a>, and the online help available with the <span><strong class="application">luci</strong></span> server.
		</p>
          <div class="figure">
            <a id="fig-ov-luci-homebase-CA"></a>
            <div class="figure-contents">
              <div class="mediaobject">
                <img src="./images/luci-homebase-tab.png" alt="luci homebase Tab" />
                <div class="longdesc">
                  <p>
						luci homebase tab
					</p>
                </div>
              </div>
            </div>
            <h6>Figure 1.3. <span>luci </span><span>homebase</span> Tab</h6>
          </div>
          <br class="figure-break" />
          <div class="figure">
            <a id="fig-ov-luci-cluster-CA"></a>
            <div class="figure-contents">
              <div class="mediaobject">
                <img src="./images/luci-cluster-tab.png" alt="luci cluster Tab" />
                <div class="longdesc">
                  <p>
						luci cluster tab
					</p>
                </div>
              </div>
            </div>
            <h6>Figure 1.4. <span>luci </span><span>cluster</span> Tab</h6>
          </div>
          <br class="figure-break" />
          <div class="figure">
            <a id="fig-ov-luci-storage-CA"></a>
            <div class="figure-contents">
              <div class="mediaobject">
                <img src="./images/luci-storage-tab.png" alt="luci storage Tab" />
                <div class="longdesc">
                  <p>
						luci storage tab
					</p>
                </div>
              </div>
            </div>
            <h6>Figure 1.5. <span>luci </span><span>storage</span> Tab</h6>
          </div>
          <br class="figure-break" />
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clumgmttools-overview-CA"></a>1.3. <code class="command">system-config-cluster</code> Cluster Administration GUI</h2>
              </div>
            </div>
          </div>
          <p>
			This section provides an overview of the cluster administration graphical user interface (GUI) available with Red Hat Cluster Suite — <code class="command">system-config-cluster</code>. It is for use with the cluster infrastructure and the high-availability service management components. <code class="command">system-config-cluster</code> consists of two major functions: the <span><strong class="application">Cluster Configuration Tool</strong></span> and the <span><strong class="application">Cluster Status Tool</strong></span>. The <span><strong class="application">Cluster Configuration Tool</strong></span> provides the capability to create, edit, and propagate the cluster configuration file (<code class="filename">/etc/cluster/cluster.conf</code>). The <span><strong class="application">Cluster Status Tool</strong></span> provides the capability to manage high-availability services. The following sections summarize those functions.
		</p>
          <div class="note">
            <h2>Note</h2>
            <p>
				While <code class="command">system-config-cluster</code> provides several convenient tools for configuring and managing a Red Hat Cluster, the newer, more comprehensive tool, <span><strong class="application">Conga</strong></span>, provides more convenience and flexibility than <code class="command">system-config-cluster</code>.
			</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-cluconfig-tool-CA"></a>1.3.1. <span><strong class="application">Cluster Configuration Tool</strong></span></h3>
                </div>
              </div>
            </div>
            <p>
				You can access the <span><strong class="application">Cluster Configuration Tool</strong></span> (<a href="#fig-intro-cluconfig-ov-CA" title="Figure 1.6. Cluster Configuration Tool">Figure 1.6, “<span>Cluster Configuration Tool</span>”</a>) through the <span><strong class="guilabel">Cluster Configuration</strong></span> tab in the Cluster Administration GUI.
			</p>
            <div class="figure">
              <a id="fig-intro-cluconfig-ov-CA"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="./images/clustertoolgui.png" alt="Cluster Configuration Tool" />
                  <div class="longdesc">
                    <p>
							cluster tool
						</p>
                  </div>
                </div>
              </div>
              <h6>Figure 1.6. <span>Cluster Configuration Tool</span></h6>
            </div>
            <br class="figure-break" />
            <p>
				The <span><strong class="application">Cluster Configuration Tool</strong></span> represents cluster configuration components in the configuration file (<code class="filename">/etc/cluster/cluster.conf</code>) with a hierarchical graphical display in the left panel. A triangle icon to the left of a component name indicates that the component has one or more subordinate components assigned to it. Clicking the triangle icon expands and collapses the portion of the tree below a component. The components displayed in the GUI are summarized as follows:
			</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
						<span><strong class="guilabel">Cluster Nodes</strong></span> — Displays cluster nodes. Nodes are represented by name as subordinate elements under <span><strong class="guilabel">Cluster Nodes</strong></span>. Using configuration buttons at the bottom of the right frame (below <span><strong class="guilabel">Properties</strong></span>), you can add nodes, delete nodes, edit node properties, and configure fencing methods for each node.
					</p>
                </li>
                <li>
                  <p>
						<span><strong class="guilabel">Fence Devices</strong></span> — Displays fence devices. Fence devices are represented as subordinate elements under <span><strong class="guilabel">Fence Devices</strong></span>. Using configuration buttons at the bottom of the right frame (below <span><strong class="guilabel">Properties</strong></span>), you can add fence devices, delete fence devices, and edit fence-device properties. Fence devices must be defined before you can configure fencing (with the <span><strong class="guibutton">Manage Fencing For This Node</strong></span> button) for each node.
					</p>
                </li>
                <li>
                  <p>
						<span><strong class="guilabel">Managed Resources</strong></span> — Displays failover domains, resources, and services.
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<span><strong class="guilabel">Failover Domains</strong></span> — For configuring one or more subsets of cluster nodes used to run a high-availability service in the event of a node failure. Failover domains are represented as subordinate elements under <span><strong class="guilabel">Failover Domains</strong></span>. Using configuration buttons at the bottom of the right frame (below <span><strong class="guilabel">Properties</strong></span>), you can create failover domains (when <span><strong class="guilabel">Failover Domains</strong></span> is selected) or edit failover domain properties (when a failover domain is selected).
							</p>
                      </li>
                      <li>
                        <p>
								<span><strong class="guilabel">Resources</strong></span> — For configuring shared resources to be used by high-availability services. Shared resources consist of file systems, IP addresses, NFS mounts and exports, and user-created scripts that are available to any high-availability service in the cluster. Resources are represented as subordinate elements under <span><strong class="guilabel">Resources</strong></span>. Using configuration buttons at the bottom of the right frame (below <span><strong class="guilabel">Properties</strong></span>), you can create resources (when <span><strong class="guilabel">Resources</strong></span> is selected) or edit resource properties (when a resource is selected).
							</p>
                        <div class="note">
                          <h2>Note</h2>
                          <p>
									The <span><strong class="application">Cluster Configuration Tool</strong></span> provides the capability to configure private resources, also. A private resource is a resource that is configured for use with only one service. You can configure a private resource within a <span><strong class="application">Service</strong></span> component in the GUI.
								</p>
                        </div>
                      </li>
                      <li>
                        <p>
								<span><strong class="guilabel">Services</strong></span> — For creating and configuring high-availability services. A service is configured by assigning resources (shared or private), assigning a failover domain, and defining a recovery policy for the service. Services are represented as subordinate elements under <span><strong class="guilabel">Services</strong></span>. Using configuration buttons at the bottom of the right frame (below <span><strong class="guilabel">Properties</strong></span>), you can create services (when <span><strong class="guilabel">Services</strong></span> is selected) or edit service properties (when a service is selected).
							</p>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
            <a id="id2786022" class="indexterm"></a>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-admin-overview-CA"></a>1.3.2. <span><strong class="application">Cluster Status Tool</strong></span></h3>
                </div>
              </div>
            </div>
            <p>
				You can access the <span><strong class="application">Cluster Status Tool</strong></span> (<a href="#fig-intro-clustatus-CA" title="Figure 1.7. Cluster Status Tool">Figure 1.7, “<span>Cluster Status Tool</span>”</a>) through the <span><strong class="guimenu">Cluster Management</strong></span> tab in Cluster Administration GUI.
			</p>
            <div class="figure">
              <a id="fig-intro-clustatus-CA"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="./images/clustatus.png" alt="Cluster Status Tool" />
                  <div class="longdesc">
                    <p>
							cluster status tool
						</p>
                  </div>
                </div>
              </div>
              <h6>Figure 1.7. <span>Cluster Status Tool</span></h6>
            </div>
            <br class="figure-break" />
            <p>
				The nodes and services displayed in the <span><strong class="application">Cluster Status Tool</strong></span> are determined by the cluster configuration file (<code class="filename">/etc/cluster/cluster.conf</code>). You can use the <span><strong class="application">Cluster Status Tool</strong></span> to enable, disable, restart, or relocate a high-availability service.
			</p>
            <a id="id2719558" class="indexterm"></a>
            <a id="id2719571" class="indexterm"></a>
            <a id="id2719585" class="indexterm"></a>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-cmdlinetools-overview-CA"></a>1.4. Command Line Administration Tools</h2>
              </div>
            </div>
          </div>
          <a id="id2719609" class="indexterm"></a>
          <a id="id2719623" class="indexterm"></a>
          <p>
			In addition to <span><strong class="application">Conga</strong></span> and the <code class="command">system-config-cluster</code> Cluster Administration GUI, command line tools are available for administering the cluster infrastructure and the high-availability service management components. The command line tools are used by the Cluster Administration GUI and init scripts supplied by Red Hat. <a href="#tb-commandline-tools-CA" title="Table 1.1. Command Line Tools">Table 1.1, “Command Line Tools”</a> summarizes the command line tools.
		</p>
          <div class="table">
            <a id="tb-commandline-tools-CA"></a>
            <div class="table-contents">
              <table summary="Command Line Tools" border="1">
                <colgroup>
                  <col />
                  <col />
                  <col />
                </colgroup>
                <thead>
                  <tr>
                    <th>
							Command Line Tool
						</th>
                    <th>
							Used With
						</th>
                    <th>
							Purpose
						</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
							<code class="command">ccs_tool</code> — Cluster Configuration System Tool
						</td>
                    <td>
							Cluster Infrastructure
						</td>
                    <td>
							<code class="command">ccs_tool</code> is a program for making online updates to the cluster configuration file. It provides the capability to create and modify cluster infrastructure components (for example, creating a cluster, adding and removing a node). For more information about this tool, refer to the ccs_tool(8) man page.
						</td>
                  </tr>
                  <tr>
                    <td>
							<code class="command">cman_tool</code> — Cluster Management Tool
						</td>
                    <td>
							Cluster Infrastructure
						</td>
                    <td>
							<code class="command">cman_tool</code> is a program that manages the CMAN cluster manager. It provides the capability to join a cluster, leave a cluster, kill a node, or change the expected quorum votes of a node in a cluster. For more information about this tool, refer to the cman_tool(8) man page.
						</td>
                  </tr>
                  <tr>
                    <td>
							<code class="command">fence_tool</code> — Fence Tool
						</td>
                    <td>
							Cluster Infrastructure
						</td>
                    <td>
							<code class="command">fence_tool</code> is a program used to join or leave the default fence domain. Specifically, it starts the fence daemon (<code class="command">fenced</code>) to join the domain and kills <code class="command">fenced</code> to leave the domain. For more information about this tool, refer to the fence_tool(8) man page.
						</td>
                  </tr>
                  <tr>
                    <td>
							<code class="command">clustat</code> — Cluster Status Utility
						</td>
                    <td>
							High-availability Service Management Components
						</td>
                    <td>
							The <code class="command">clustat</code> command displays the status of the cluster. It shows membership information, quorum view, and the state of all configured user services. For more information about this tool, refer to the clustat(8) man page.
						</td>
                  </tr>
                  <tr>
                    <td>
							<code class="command">clusvcadm</code> — Cluster User Service Administration Utility
						</td>
                    <td>
							High-availability Service Management Components
						</td>
                    <td>
							The <code class="command">clusvcadm</code> command allows you to enable, disable, relocate, and restart high-availability services in a cluster. For more information about this tool, refer to the clusvcadm(8) man page.
						</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h6>Table 1.1. Command Line Tools</h6>
          </div>
          <br class="table-break" />
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ch-before-config-CA"></a>Chapter 2. Before Configuring a Red Hat Cluster</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#s1-hw-compat-CA">2.1. Compatible Hardware</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-iptables-CA">2.2. Enabling IP Ports</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-iptables-clnodes-CA">2.2.1. Enabling IP Ports on Cluster Nodes</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-iptables-conga-CA">2.2.2. Enabling IP Ports on Computers That Run <span><strong class="application">luci</strong></span></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-iptables-examples-CA">2.2.3. Examples of <code class="command">iptables</code> Rules</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-acpi-CA">2.3. Configuring ACPI For Use with Integrated Fence Devices</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-acpi-disable-chkconfig-CA">2.3.1. Disabling ACPI Soft-Off with <code class="command">chkconfig</code> Management</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-bios-setting-CA">2.3.2. Disabling ACPI Soft-Off with the BIOS</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-acpi-disable-boot-CA">2.3.3. Disabling ACPI Completely in the <code class="filename">grub.conf</code> File</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-clust-svc-ov-CA">2.4. Considerations for Configuring HA Services</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-max-luns-CA">2.5. Configuring max_luns</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-qdisk-considerations-CA">2.6. Considerations for Using Quorum Disk</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-multicast-considerations-CA">2.7. Multicast Addresses</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-conga-considerations-CA">2.8. Considerations for Using <span><strong class="application">Conga</strong></span></a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-clust-config-considerations-CA">2.9. General Configuration Considerations</a>
              </span>
            </dt>
          </dl>
        </div>
        <a id="id2770862" class="indexterm"></a>
        <a id="id2764893" class="indexterm"></a>
        <p>
		This chapter describes tasks to perform and considerations to make before installing and configuring a Red Hat Cluster, and consists of the following sections:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<a href="#s1-hw-compat-CA" title="2.1. Compatible Hardware">Section 2.1, “Compatible Hardware”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-iptables-CA" title="2.2. Enabling IP Ports">Section 2.2, “Enabling IP Ports”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-acpi-CA" title="2.3. Configuring ACPI For Use with Integrated Fence Devices">Section 2.3, “Configuring ACPI For Use with Integrated Fence Devices”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-max-luns-CA" title="2.5. Configuring max_luns">Section 2.5, “Configuring max_luns”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-qdisk-considerations-CA" title="2.6. Considerations for Using Quorum Disk">Section 2.6, “Considerations for Using Quorum Disk”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-multicast-considerations-CA" title="2.7. Multicast Addresses">Section 2.7, “Multicast Addresses”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-conga-considerations-CA" title="2.8. Considerations for Using Conga">Section 2.8, “Considerations for Using <span><strong class="application">Conga</strong></span>”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-clust-config-considerations-CA" title="2.9. General Configuration Considerations">Section 2.9, “General Configuration Considerations”</a>
			</p>
            </li>
          </ul>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-hw-compat-CA"></a>2.1. Compatible Hardware</h2>
              </div>
            </div>
          </div>
          <a id="id2758584" class="indexterm"></a>
          <a id="id2803428" class="indexterm"></a>
          <p>
			Before configuring Red Hat Cluster software, make sure that your cluster uses appropriate hardware (for example, supported fence devices, storage devices, and Fibre Channel switches). Refer to the hardware configuration guidelines at <a href="http://www.redhat.com/cluster_suite/hardware/">http://www.redhat.com/cluster_suite/hardware/</a> for the most current hardware compatibility information.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-iptables-CA"></a>2.2. Enabling IP Ports</h2>
              </div>
            </div>
          </div>
          <a id="id2735430" class="indexterm"></a>
          <a id="id2771413" class="indexterm"></a>
          <a id="id2712305" class="indexterm"></a>
          <a id="id2783846" class="indexterm"></a>
          <p>
			Before deploying a Red Hat Cluster, you must enable certain IP ports on the cluster nodes and on computers that run <span><strong class="application">luci</strong></span> (the <span><strong class="application">Conga</strong></span> user interface server). The following sections specify the IP ports to be enabled and provide examples of <code class="command">iptables</code> rules for enabling the ports:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<a href="#s2-iptables-clnodes-CA" title="2.2.1. Enabling IP Ports on Cluster Nodes">Section 2.2.1, “Enabling IP Ports on Cluster Nodes”</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-iptables-conga-CA" title="2.2.2. Enabling IP Ports on Computers That Run luci">Section 2.2.2, “Enabling IP Ports on Computers That Run <span><strong class="application">luci</strong></span>”</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-iptables-examples-CA" title="2.2.3. Examples of iptables Rules">Section 2.2.3, “Examples of <code class="command">iptables</code> Rules”</a>
				</p>
              </li>
            </ul>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-iptables-clnodes-CA"></a>2.2.1. Enabling IP Ports on Cluster Nodes</h3>
                </div>
              </div>
            </div>
            <p>
				To allow Red Hat Cluster nodes to communicate with each other, you must enable the IP ports assigned to certain Red Hat Cluster components. <a href="#tb-iptables-rhel5-CA" title="Table 2.1. Enabled IP Ports on Red Hat Cluster Nodes">Table 2.1, “Enabled IP Ports on Red Hat Cluster Nodes”</a> lists the IP port numbers, their respective protocols, the components to which the port numbers are assigned, and references to <code class="command">iptables</code> rule examples. At each cluster node, enable IP ports according to <a href="#tb-iptables-rhel5-CA" title="Table 2.1. Enabled IP Ports on Red Hat Cluster Nodes">Table 2.1, “Enabled IP Ports on Red Hat Cluster Nodes”</a>. (All examples are in <a href="#s2-iptables-examples-CA" title="2.2.3. Examples of iptables Rules">Section 2.2.3, “Examples of <code class="command">iptables</code> Rules”</a>.)
			</p>
            <div class="table">
              <a id="tb-iptables-rhel5-CA"></a>
              <div class="table-contents">
                <table summary="Enabled IP Ports on Red Hat Cluster Nodes" border="1">
                  <colgroup>
                    <col />
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th>
								IP Port Number
							</th>
                      <th>
								Protocol
							</th>
                      <th>
								Component
							</th>
                      <th>
								Reference to Example of <code class="command">iptables</code> Rules
							</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
								5404, 5405
							</td>
                      <td>
								UDP
							</td>
                      <td>
								<code class="command">cman</code> (Cluster Manager)
							</td>
                      <td>
								<a href="#ex-ip-port-cman-CA" title="Example 2.1. Port 5404, 5405: cman">Example 2.1, “Port 5404, 5405: cman”</a>
							</td>
                    </tr>
                    <tr>
                      <td>
								11111
							</td>
                      <td>
								TCP
							</td>
                      <td>
								<code class="command">ricci</code> (part of <span><strong class="application">Conga</strong></span> remote agent)
							</td>
                      <td>
								<a href="#ex-ip-port-ricci-CA" title="Example 2.3. Port 11111: ricci (Cluster Node and Computer Running luci)">Example 2.3, “Port 11111: ricci (Cluster Node and Computer Running <span>luci</span>)”</a>
							</td>
                    </tr>
                    <tr>
                      <td>
								14567
							</td>
                      <td>
								TCP
							</td>
                      <td>
								<code class="command">gnbd</code> (Global Network Block Device)
							</td>
                      <td>
								<a href="#ex-ip-port-gnbd-CA" title="Example 2.4. Port 14567: gnbd">Example 2.4, “Port 14567: gnbd”</a>
							</td>
                    </tr>
                    <tr>
                      <td>
								16851
							</td>
                      <td>
								TCP
							</td>
                      <td>
								<code class="command">modclusterd</code> (part of <span><strong class="application">Conga</strong></span> remote agent)
							</td>
                      <td>
								<a href="#ex-ip-port-modclusterd-CA" title="Example 2.5. Port 16851: modclusterd">Example 2.5, “Port 16851: modclusterd”</a>
							</td>
                    </tr>
                    <tr>
                      <td>
								21064
							</td>
                      <td>
								TCP
							</td>
                      <td>
								<code class="command">dlm</code> (Distributed Lock Manager)
							</td>
                      <td>
								<a href="#ex-ip-port-dlm-CA" title="Example 2.6. Port 21064: dlm">Example 2.6, “Port 21064: dlm”</a>
							</td>
                    </tr>
                    <tr>
                      <td>
								41966, 41967, 41968, 41969
							</td>
                      <td>
								TCP
							</td>
                      <td>
								<code class="command">rgmanager</code> (high-availability service management)
							</td>
                      <td>
								<a href="#ex-ip-port-rgmanager-CA" title="Example 2.7. Ports 41966, 41967, 41968, 41969: rgmanager">Example 2.7, “Ports 41966, 41967, 41968, 41969: rgmanager”</a>
							</td>
                    </tr>
                    <tr>
                      <td>
								50006, 50008, 50009
							</td>
                      <td>
								TCP
							</td>
                      <td>
								<code class="command">ccsd</code> (Cluster Configuration System daemon)
							</td>
                      <td>
								<a href="#ex-ip-port-ccsd-tcp-CA" title="Example 2.8. Ports 50006, 50008, 50009: ccsd (TCP)">Example 2.8, “Ports 50006, 50008, 50009: ccsd (TCP)”</a>
							</td>
                    </tr>
                    <tr>
                      <td>
								50007
							</td>
                      <td>
								UDP
							</td>
                      <td>
								<code class="command">ccsd</code> (Cluster Configuration System daemon)
							</td>
                      <td>
								<a href="#ex-ip-port-ccsd-udp-CA" title="Example 2.9. Port 50007: ccsd (UDP)">Example 2.9, “Port 50007: ccsd (UDP)”</a>
							</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <h6>Table 2.1. Enabled IP Ports on Red Hat Cluster Nodes</h6>
            </div>
            <br class="table-break" />
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-iptables-conga-CA"></a>2.2.2. Enabling IP Ports on Computers That Run <span><strong class="application">luci</strong></span></h3>
                </div>
              </div>
            </div>
            <p>
				To allow client computers to communicate with a computer that runs <span><strong class="application">luci</strong></span> (the <span><strong class="application">Conga</strong></span> user interface server), and to allow a computer that runs <span><strong class="application">luci</strong></span> to communicate with <span><strong class="application">ricci</strong></span> in the cluster nodes, you must enable the IP ports assigned to <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span>. <a href="#tb-iptables-conga-rhel5-CA" title="Table 2.2. Enabled IP Ports on a Computer That Runs luci">Table 2.2, “Enabled IP Ports on a Computer That Runs <span>luci</span>”</a> lists the IP port numbers, their respective protocols, the components to which the port numbers are assigned, and references to <code class="command">iptables</code> rule examples. At each computer that runs <span><strong class="application">luci</strong></span>, enable IP ports according to <a href="#tb-iptables-rhel5-CA" title="Table 2.1. Enabled IP Ports on Red Hat Cluster Nodes">Table 2.1, “Enabled IP Ports on Red Hat Cluster Nodes”</a>. (All examples are in <a href="#s2-iptables-examples-CA" title="2.2.3. Examples of iptables Rules">Section 2.2.3, “Examples of <code class="command">iptables</code> Rules”</a>.)
			</p>
            <div class="note">
              <h2>Note</h2>
              <p>
					If a cluster node is running <span><strong class="application">luci</strong></span>, port 11111 should already have been enabled.
				</p>
            </div>
            <div class="table">
              <a id="tb-iptables-conga-rhel5-CA"></a>
              <div class="table-contents">
                <table summary="Enabled IP Ports on a Computer That Runs luci" border="1">
                  <colgroup>
                    <col />
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th>
								IP Port Number
							</th>
                      <th>
								Protocol
							</th>
                      <th>
								Component
							</th>
                      <th>
								Reference to Example of <code class="command">iptables</code> Rules
							</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
								8084
							</td>
                      <td>
								TCP
							</td>
                      <td>
								<span><strong class="application">luci</strong></span> (<span><strong class="application">Conga</strong></span> user interface server)
							</td>
                      <td>
								<a href="#ex-ip-port-luci-CA" title="Example 2.2. Port 8084: luci (Cluster Node or Computer Running luci)">Example 2.2, “Port 8084: luci (Cluster Node or Computer Running <span>luci</span>)”</a>
							</td>
                    </tr>
                    <tr>
                      <td>
								11111
							</td>
                      <td>
								TCP
							</td>
                      <td>
								<code class="command">ricci</code> (<span><strong class="application">Conga</strong></span> remote agent)
							</td>
                      <td>
								<a href="#ex-ip-port-ricci-CA" title="Example 2.3. Port 11111: ricci (Cluster Node and Computer Running luci)">Example 2.3, “Port 11111: ricci (Cluster Node and Computer Running <span>luci</span>)”</a>
							</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <h6>Table 2.2. Enabled IP Ports on a Computer That Runs <span>luci</span></h6>
            </div>
            <br class="table-break" />
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-iptables-examples-CA"></a>2.2.3. Examples of <code class="command">iptables</code> Rules</h3>
                </div>
              </div>
            </div>
            <p>
				This section provides <code class="command">iptables</code> rule examples for enabling IP ports on Red Hat Cluster nodes and computers that run <span><strong class="application">luci</strong></span>. The examples enable IP ports for a computer having an IP address of 10.10.10.200, using a subnet mask of 10.10.10.0/24.
			</p>
            <div class="note">
              <h2>Note</h2>
              <p>
					Examples are for cluster nodes unless otherwise noted in the example titles.
				</p>
            </div>
            <div class="example">
              <a id="ex-ip-port-cman-CA"></a>
              <div class="example-contents">
                <pre class="screen">iptables -A INPUT -i 10.10.10.200 -m multiport -m state --state NEW -p udp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 5404,5405 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.1. Port 5404, 5405: cman</h6>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="ex-ip-port-luci-CA"></a>
              <div class="example-contents">
                <pre class="screen">-A INPUT -i 10.10.10.200 -m state --state NEW -m multiport -p tcp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 8084 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.2. Port 8084: luci (Cluster Node or Computer Running <span>luci</span>)</h6>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="ex-ip-port-ricci-CA"></a>
              <div class="example-contents">
                <pre class="screen">-A INPUT -i 10.10.10.200 -m state --state NEW -m multiport -p tcp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 11111 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.3. Port 11111: ricci (Cluster Node and Computer Running <span>luci</span>)</h6>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="ex-ip-port-gnbd-CA"></a>
              <div class="example-contents">
                <pre class="screen">-A INPUT -i 10.10.10.200 -m state --state NEW -m multiport -p tcp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 14567 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.4. Port 14567: gnbd</h6>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="ex-ip-port-modclusterd-CA"></a>
              <div class="example-contents">
                <pre class="screen">-A INPUT -i 10.10.10.200 -m state --state NEW -m multiport -p tcp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 16851 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.5. Port 16851: modclusterd</h6>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="ex-ip-port-dlm-CA"></a>
              <div class="example-contents">
                <pre class="screen">-A INPUT -i 10.10.10.200 -m state --state NEW -m multiport -p tcp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 21064 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.6. Port 21064: dlm</h6>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="ex-ip-port-rgmanager-CA"></a>
              <div class="example-contents">
                <pre class="screen">-A INPUT -i 10.10.10.200 -m state --state NEW -m multiport -p tcp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 41966,41967,41968,41969 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.7. Ports 41966, 41967, 41968, 41969: rgmanager</h6>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="ex-ip-port-ccsd-tcp-CA"></a>
              <div class="example-contents">
                <pre class="screen">-A INPUT -i 10.10.10.200 -m state --state NEW -m multiport -p tcp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 50006,50008,50009 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.8. Ports 50006, 50008, 50009: ccsd (TCP)</h6>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="ex-ip-port-ccsd-udp-CA"></a>
              <div class="example-contents">
                <pre class="screen">-A INPUT -i 10.10.10.200 -m state --state NEW -m multiport -p udp -s 10.10.10.0/24 -d 10.10.10.0/24 --dports 50007 -j ACCEPT
</pre>
              </div>
              <h6>Example 2.9. Port 50007: ccsd (UDP)</h6>
            </div>
            <br class="example-break" />
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-acpi-CA"></a>2.3. Configuring ACPI For Use with Integrated Fence Devices</h2>
              </div>
            </div>
          </div>
          <a id="id2791996" class="indexterm"></a>
          <a id="id2792009" class="indexterm"></a>
          <a id="id2792022" class="indexterm"></a>
          <p>
			If your cluster uses integrated fence devices, you must configure ACPI (Advanced Configuration and Power Interface) to ensure immediate and complete fencing.
		</p>
          <div class="note">
            <h2>Note</h2>
            <p>
				For the most current information about integrated fence devices supported by Red Hat Cluster Suite, refer to <a href="http://www.redhat.com/cluster_suite/hardware/"> http://www.redhat.com/cluster_suite/hardware/</a>.
			</p>
          </div>
          <p>
			If a cluster node is configured to be fenced by an integrated fence device, disable ACPI Soft-Off for that node. Disabling ACPI Soft-Off allows an integrated fence device to turn off a node immediately and completely rather than attempting a clean shutdown (for example, <code class="command">shutdown -h now</code>). Otherwise, if ACPI Soft-Off is enabled, an integrated fence device can take four or more seconds to turn off a node (refer to note that follows). In addition, if ACPI Soft-Off is enabled and a node panics or freezes during shutdown, an integrated fence device may not be able to turn off the node. Under those circumstances, fencing is delayed or unsuccessful. Consequently, when a node is fenced with an integrated fence device and ACPI Soft-Off is enabled, a cluster recovers slowly or requires administrative intervention to recover.
		</p>
          <div class="note">
            <h2>Note</h2>
            <p>
				The amount of time required to fence a node depends on the integrated fence device used. Some integrated fence devices perform the equivalent of pressing and holding the power button; therefore, the fence device turns off the node in four to five seconds. Other integrated fence devices perform the equivalent of pressing the power button momentarily, relying on the operating system to turn off the node; therefore, the fence device turns off the node in a time span much longer than four to five seconds.
			</p>
          </div>
          <p>
			To disable ACPI Soft-Off, use <code class="command">chkconfig</code> management and verify that the node turns off immediately when fenced. The preferred way to disable ACPI Soft-Off is with <code class="command">chkconfig</code> management: however, if that method is not satisfactory for your cluster, you can disable ACPI Soft-Off with one of the following alternate methods:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Changing the BIOS setting to "instant-off" or an equivalent setting that turns off the node without delay
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						Disabling ACPI Soft-Off with the BIOS may not be possible with some computers.
					</p>
                </div>
              </li>
              <li>
                <p>
					Appending <strong class="userinput"><code>acpi=off</code></strong> to the kernel boot command line of the <code class="filename">/boot/grub/grub.conf</code> file
				</p>
                <div class="important">
                  <h2>Important</h2>
                  <p>
						This method completely disables ACPI; some computers do not boot correctly if ACPI is completely disabled. Use this method <span class="emphasis"><em>only</em></span> if the other methods are not effective for your cluster.
					</p>
                </div>
              </li>
            </ul>
          </div>
          <p>
			The following sections provide procedures for the preferred method and alternate methods of disabling ACPI Soft-Off:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<a href="#s2-acpi-disable-chkconfig-CA" title="2.3.1. Disabling ACPI Soft-Off with chkconfig Management">Section 2.3.1, “Disabling ACPI Soft-Off with <code class="command">chkconfig</code> Management”</a> — Preferred method
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-bios-setting-CA" title="2.3.2. Disabling ACPI Soft-Off with the BIOS">Section 2.3.2, “Disabling ACPI Soft-Off with the BIOS”</a> — First alternate method
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-acpi-disable-boot-CA" title="2.3.3. Disabling ACPI Completely in the grub.conf File">Section 2.3.3, “Disabling ACPI Completely in the <code class="filename">grub.conf</code> File”</a> — Second alternate method
				</p>
              </li>
            </ul>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-acpi-disable-chkconfig-CA"></a>2.3.1. Disabling ACPI Soft-Off with <code class="command">chkconfig</code> Management</h3>
                </div>
              </div>
            </div>
            <p>
				You can use <code class="command">chkconfig</code> management to disable ACPI Soft-Off either by removing the ACPI daemon (<code class="command">acpid</code>) from <code class="command">chkconfig</code> management or by turning off <code class="command">acpid</code>.
			</p>
            <div class="note">
              <h2>Note</h2>
              <p>
					This is the preferred method of disabling ACPI Soft-Off.
				</p>
            </div>
            <p>
				Disable ACPI Soft-Off with <code class="command">chkconfig</code> management at each cluster node as follows:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						Run either of the following commands:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<code class="command">chkconfig --del acpid</code> — This command removes <code class="command">acpid</code> from <code class="command">chkconfig</code> management.
							</p>
                        <p>
								— OR —
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">chkconfig --level 2345 acpid off</code> — This command turns off <code class="command">acpid</code>.
							</p>
                      </li>
                    </ul>
                  </div>
                </li>
                <li>
                  <p>
						Reboot the node.
					</p>
                </li>
                <li>
                  <p>
						When the cluster is configured and running, verify that the node turns off immediately when fenced.
					</p>
                  <div class="tip">
                    <h2>Tip</h2>
                    <p>
							You can fence the node with the <code class="command">fence_node</code> command or <span><strong class="application">Conga</strong></span>.
						</p>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-bios-setting-CA"></a>2.3.2. Disabling ACPI Soft-Off with the BIOS</h3>
                </div>
              </div>
            </div>
            <p>
				The preferred method of disabling ACPI Soft-Off is with <code class="command">chkconfig</code> management (<a href="#s2-acpi-disable-chkconfig-CA" title="2.3.1. Disabling ACPI Soft-Off with chkconfig Management">Section 2.3.1, “Disabling ACPI Soft-Off with <code class="command">chkconfig</code> Management”</a>). However, if the preferred method is not effective for your cluster, follow the procedure in this section.
			</p>
            <div class="note">
              <h2>Note</h2>
              <p>
					Disabling ACPI Soft-Off with the BIOS may not be possible with some computers.
				</p>
            </div>
            <p>
				You can disable ACPI Soft-Off by configuring the BIOS of each cluster node as follows:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						Reboot the node and start the <code class="command">BIOS CMOS Setup Utility</code> program.
					</p>
                </li>
                <li>
                  <p>
						Navigate to the <span><strong class="guimenu">Power</strong></span> menu (or equivalent power management menu).
					</p>
                </li>
                <li>
                  <p>
						At the <span><strong class="guimenu">Power</strong></span> menu, set the <span><strong class="guimenuitem">Soft-Off by PWR-BTTN</strong></span> function (or equivalent) to <span><strong class="guimenuitem">Instant-Off</strong></span> (or the equivalent setting that turns off the node via the power button without delay). <a href="#ex-bios-acpi-off-CA" title="Example 2.10. BIOS CMOS Setup Utility: Soft-Off by PWR-BTTN set to Instant-Off">Example 2.10, “<code class="command">BIOS CMOS Setup Utility</code>: <span>Soft-Off by PWR-BTTN</span> set to <span>Instant-Off</span>”</a> shows a <span><strong class="guimenu">Power</strong></span> menu with <span><strong class="guimenuitem">ACPI Function</strong></span> set to <span><strong class="guimenuitem">Enabled</strong></span> and <span><strong class="guimenuitem">Soft-Off by PWR-BTTN</strong></span> set to <span><strong class="guimenuitem">Instant-Off</strong></span>.
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							The equivalents to <span><strong class="guimenuitem">ACPI Function</strong></span>, <span><strong class="guimenuitem">Soft-Off by PWR-BTTN</strong></span>, and <span><strong class="guimenuitem">Instant-Off</strong></span> may vary among computers. However, the objective of this procedure is to configure the BIOS so that the computer is turned off via the power button without delay.
						</p>
                  </div>
                </li>
                <li>
                  <p>
						Exit the <code class="command">BIOS CMOS Setup Utility</code> program, saving the BIOS configuration.
					</p>
                </li>
                <li>
                  <p>
						When the cluster is configured and running, verify that the node turns off immediately when fenced.
					</p>
                  <div class="tip">
                    <h2>Tip</h2>
                    <p>
							You can fence the node with the <code class="command">fence_node</code> command or <span><strong class="application">Conga</strong></span>.
						</p>
                  </div>
                </li>
              </ol>
            </div>
            <div class="example">
              <a id="ex-bios-acpi-off-CA"></a>
              <div class="example-contents">
                <pre class="screen">
+-------------------------------------------------|------------------------+
|    ACPI Function             [Enabled]          |         Item Help      |
|    ACPI Suspend Type         [S1(POS)]          |------------------------|
|  x Run VGABIOS if S3 Resume   Auto              | Menu Level   *         |
|    Suspend Mode              [Disabled]         |                        |
|    HDD Power Down            [Disabled]         |                        |
|    Soft-Off by PWR-BTTN      [Instant-Off]      |                        |
|    CPU THRM-Throttling       [50.0%]            |                        |
|    Wake-Up by PCI card       [Enabled]          |                        |
|    Power On by Ring          [Enabled]          |                        |
|    Wake Up On LAN            [Enabled]          |                        |
|  x USB KB Wake-Up From S3     Disabled          |                        |
|    Resume by Alarm           [Disabled]         |                        |
|  x  Date(of Month) Alarm       0                |                        |
|  x  Time(hh:mm:ss) Alarm       0 :  0 :  0      |                        |
|    POWER ON Function         [BUTTON ONLY]      |                        |
|  x KB Power ON Password       Enter             |                        |
|  x Hot Key Power ON           Ctrl-F1           |                        |
|                                                 |                        |
|                                                 |                        |
+-------------------------------------------------|------------------------+
</pre>
                <p>
					This example shows <span><strong class="guimenuitem">ACPI Function</strong></span> set to <span><strong class="guimenuitem">Enabled</strong></span>, and <span><strong class="guimenuitem">Soft-Off by PWR-BTTN</strong></span> set to <span><strong class="guimenuitem">Instant-Off</strong></span>.
				</p>
              </div>
              <h6>Example 2.10. <code class="command">BIOS CMOS Setup Utility</code>: <span>Soft-Off by PWR-BTTN</span> set to <span>Instant-Off</span></h6>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-acpi-disable-boot-CA"></a>2.3.3. Disabling ACPI Completely in the <code class="filename">grub.conf</code> File</h3>
                </div>
              </div>
            </div>
            <p>
				The preferred method of disabling ACPI Soft-Off is with <code class="command">chkconfig</code> management (<a href="#s2-acpi-disable-chkconfig-CA" title="2.3.1. Disabling ACPI Soft-Off with chkconfig Management">Section 2.3.1, “Disabling ACPI Soft-Off with <code class="command">chkconfig</code> Management”</a>). If the preferred method is not effective for your cluster, you can disable ACPI Soft-Off with the BIOS power management (<a href="#s2-bios-setting-CA" title="2.3.2. Disabling ACPI Soft-Off with the BIOS">Section 2.3.2, “Disabling ACPI Soft-Off with the BIOS”</a>). If neither of those methods is effective for your cluster, you can disable ACPI completely by appending <strong class="userinput"><code>acpi=off</code></strong> to the kernel boot command line in the <code class="filename">grub.conf</code> file.
			</p>
            <div class="important">
              <h2>Important</h2>
              <p>
					This method completely disables ACPI; some computers do not boot correctly if ACPI is completely disabled. Use this method <span class="emphasis"><em>only</em></span> if the other methods are not effective for your cluster.
				</p>
            </div>
            <p>
				You can disable ACPI completely by editing the <code class="filename">grub.conf</code> file of each cluster node as follows:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						Open <code class="filename">/boot/grub/grub.conf</code> with a text editor.
					</p>
                </li>
                <li>
                  <p>
						Append <strong class="userinput"><code>acpi=off</code></strong> to the kernel boot command line in <code class="filename">/boot/grub/grub.conf</code> (refer to <a href="#ex-grub-acpi-off-CA" title="Example 2.11. Kernel Boot Command Line with acpi=off Appended to It">Example 2.11, “Kernel Boot Command Line with <code class="userinput">acpi=off</code> Appended to It”</a>).
					</p>
                </li>
                <li>
                  <p>
						Reboot the node.
					</p>
                </li>
                <li>
                  <p>
						When the cluster is configured and running, verify that the node turns off immediately when fenced.
					</p>
                  <div class="tip">
                    <h2>Tip</h2>
                    <p>
							You can fence the node with the <code class="command">fence_node</code> command or <span><strong class="application">Conga</strong></span>.
						</p>
                  </div>
                </li>
              </ol>
            </div>
            <div class="example">
              <a id="ex-grub-acpi-off-CA"></a>
              <div class="example-contents">
                <pre class="screen">
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/VolGroup00/LogVol00
#          initrd /initrd-version.img
#boot=/dev/hda
default=0
timeout=5
serial --unit=0 --speed=115200
terminal --timeout=5 serial console
title Red Hat Enterprise Linux Server (2.6.18-36.el5)
        root (hd0,0)
        kernel /vmlinuz-2.6.18-36.el5 ro root=/dev/VolGroup00/LogVol00 console=ttyS0,115200n8 acpi=off
        initrd /initrd-2.6.18-36.el5.img
</pre>
                <p>
					In this example, <strong class="userinput"><code>acpi=off</code></strong> has been appended to the kernel boot command line — the line starting with "kernel /vmlinuz-2.6.18-36.el5".
				</p>
              </div>
              <h6>Example 2.11. Kernel Boot Command Line with <code class="userinput">acpi=off</code> Appended to It</h6>
            </div>
            <br class="example-break" />
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clust-svc-ov-CA"></a>2.4. Considerations for Configuring HA Services</h2>
              </div>
            </div>
          </div>
          <a id="id2748132" class="indexterm"></a>
          <a id="id2748146" class="indexterm"></a>
          <p> A cluster service is a group of cluster resources
configured into a coherent entity that provides specialized services
to clients. A cluster service is represented as a resource tree in the
cluster configuration file,
<code class="filename">/etc/cluster/cluster.conf</code> (in each cluster
node). In the cluster configuration file, each resource tree is an XML
representation that specifies each resource, its attributes, and its
relationship among other resources in the resource tree (parent,
child, and sibling relationships).</p>
          <div class="note">
            <h2>Note</h2>
            <p>
	Because a service consists of resources organized into a
	hierarchical tree, a service is sometimes referred to as a
	<em class="firstterm">resource tree</em> or <em class="firstterm">resource
	group</em>. Both phrases are synonymous with
	<span class="emphasis"><em>cluster service</em></span>.
      </p>
          </div>
          <p>
       At the root of each resource tree is a special type of resource
       — a <em class="firstterm">service resource</em>. Other types of resources comprise
       the rest of a service, determining its
       characteristics. Configuring a cluster service consists of
       creating a service resource, creating subordinate cluster
       resources, and organizing them into a coherent entity that
       conforms to hierarchical restrictions of the service.
    </p>
          <p>
			There are two major considerations to take into account when configuring a cluster service:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					The types of resources needed to create a service
				</p>
              </li>
              <li>
                <p>
					Parent, child, and sibling relationships among resources
				</p>
              </li>
            </ul>
          </div>
          <p>
			The types of resources and the hierarchy of resources depend on the type of service you are configuring.
		</p>
          <a id="id2748248" class="indexterm"></a>
          <a id="id2748257" class="indexterm"></a>
          <p>
			The types of cluster resources are listed in <a href="#ap-ha-resource-params-CA" title="Appendix C. HA Resource Parameters">Appendix C, <i>HA Resource Parameters</i></a>. Information about parent, child, and sibling relationships among resources is described in <a href="#ap-ha-resource-behavior-CA" title="Appendix D. HA Resource Behavior">Appendix D, <i>HA Resource Behavior</i></a>.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-max-luns-CA"></a>2.5. Configuring max_luns</h2>
              </div>
            </div>
          </div>
          <a id="id2748296" class="indexterm"></a>
          <a id="id2748313" class="indexterm"></a>
          <p>
			It is <span class="emphasis"><em>not</em></span> necessary to configure <code class="command">max_luns</code> in Red Hat Enterprise Linux 5.
		</p>
          <p>
			In Red Hat Enterprise Linux releases prior to Red Hat Enterprise Linux 5, if RAID storage in a cluster presents multiple LUNs, it is necessary to enable access to those LUNs by configuring <code class="command">max_luns</code> (or <code class="command">max_scsi_luns</code> for 2.4 kernels) in the <code class="filename">/etc/modprobe.conf</code> file of each node. In Red Hat Enterprise Linux 5, cluster nodes detect multiple LUNs without intervention required; it is <span class="emphasis"><em>not</em></span> necessary to configure <code class="command">max_luns</code> to detect multiple LUNs.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-qdisk-considerations-CA"></a>2.6. Considerations for Using Quorum Disk</h2>
              </div>
            </div>
          </div>
          <a id="id2749258" class="indexterm"></a>
          <a id="id2749272" class="indexterm"></a>
          <a id="id2749285" class="indexterm"></a>
          <a id="id2749303" class="indexterm"></a>
          <p>
			Quorum Disk is a disk-based quorum daemon, <code class="command">qdiskd</code>, that provides supplemental heuristics to determine node fitness. With heuristics you can determine factors that are important to the operation of the node in the event of a network partition. For example, in a four-node cluster with a 3:1 split, ordinarily, the three nodes automatically "win" because of the three-to-one majority. Under those circumstances, the one node is fenced. With <code class="command">qdiskd</code> however, you can set up heuristics that allow the one node to win based on access to a critical resource (for example, a critical network path). If your cluster requires additional methods of determining node health, then you should configure <code class="command">qdiskd</code> to meet those needs.
		</p>
          <div class="note">
            <h2>Note</h2>
            <p>
				Configuring <code class="command">qdiskd</code> is not required unless you have special requirements for node health. An example of a special requirement is an "all-but-one" configuration. In an all-but-one configuration, <code class="command">qdiskd</code> is configured to provide enough quorum votes to maintain quorum even though only one node is working.
			</p>
          </div>
          <div class="important">
            <h2>Important</h2>
            <p>
				Overall, heuristics and other <code class="command">qdiskd</code> parameters for your Red Hat Cluster depend on the site environment and special requirements needed. To understand the use of heuristics and other <code class="command">qdiskd</code> parameters, refer to the <span class="citerefentry"><span class="refentrytitle">qdisk</span>(5)</span> man page. If you require assistance understanding and using <code class="command">qdiskd</code> for your site, contact an authorized Red Hat support representative.
			</p>
          </div>
          <p>
			If you need to use <code class="command">qdiskd</code>, you should take into account the following considerations:
		</p>
          <div class="variablelist">
            <dl>
              <dt>
                <span class="term"> Cluster node votes </span>
              </dt>
              <dd>
                <p>
						Each cluster node should have the same number of votes.
					</p>
              </dd>
              <dt>
                <span class="term"> CMAN membership timeout value </span>
              </dt>
              <dd>
                <p>
						The CMAN membership timeout value (the time a node needs to be unresponsive before CMAN considers that node to be dead, and not a member) should be at least two times that of the <code class="command">qdiskd</code> membership timeout value. The reason is because the quorum daemon must detect failed nodes on its own, and can take much longer to do so than CMAN. The default value for CMAN membership timeout is 10 seconds. Other site-specific conditions may affect the relationship between the membership timeout values of CMAN and <code class="command">qdiskd</code>. For assistance with adjusting the CMAN membership timeout value, contact an authorized Red Hat support representative.
					</p>
              </dd>
              <dt>
                <span class="term"> Fencing </span>
              </dt>
              <dd>
                <p>
						To ensure reliable fencing when using <code class="command">qdiskd</code>, use power fencing. While other types of fencing (such as watchdog timers and software-based solutions to reboot a node internally) can be reliable for clusters not configured with <code class="command">qdiskd</code>, they are not reliable for a cluster configured with <code class="command">qdiskd</code>.
					</p>
              </dd>
              <dt>
                <span class="term"> Maximum nodes </span>
              </dt>
              <dd>
                <p>
						A cluster configured with <code class="command">qdiskd</code> supports a maximum of 16 nodes. The reason for the limit is because of scalability; increasing the node count increases the amount of synchronous I/O contention on the shared quorum disk device.
					</p>
              </dd>
              <dt>
                <span class="term"> Quorum disk device </span>
              </dt>
              <dd>
                <p>
						A quorum disk device should be a shared block device with concurrent read/write access by all nodes in a cluster. The minimum size of the block device is 10 Megabytes. Examples of shared block devices that can be used by <code class="command">qdiskd</code> are a multi-port SCSI RAID array, a Fibre Channel RAID SAN, or a RAID-configured iSCSI target. You can create a quorum disk device with <code class="command">mkqdisk</code>, the Cluster Quorum Disk Utility. For information about using the utility refer to the mkqdisk(8) man page.
					</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
							Using JBOD as a quorum disk is not recommended. A JBOD cannot provide dependable performance and therefore may not allow a node to write to it quickly enough. If a node is unable to write to a quorum disk device quickly enough, the node is falsely evicted from a cluster.
						</p>
                </div>
              </dd>
            </dl>
          </div>
          <p>
		</p>
          <p>
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-multicast-considerations-CA"></a>2.7. Multicast Addresses</h2>
              </div>
            </div>
          </div>
          <a id="id2723749" class="indexterm"></a>
          <a id="id2723762" class="indexterm"></a>
          <p>
			Red Hat Cluster nodes communicate among each other using multicast addresses. Therefore, each network switch and associated networking equipment in a Red Hat Cluster must be configured to enable multicast addresses and support IGMP (Internet Group Management Protocol). Ensure that each network switch and associated networking equipment in a Red Hat Cluster are capable of supporting multicast addresses and IGMP; if they are, ensure that multicast addressing and IGMP are enabled. Without multicast and IGMP, not all nodes can participate in a cluster, causing the cluster to fail.
		</p>
          <div class="note">
            <h2>Note</h2>
            <p>
				Procedures for configuring network switches and associated networking equipment vary according each product. Refer to the appropriate vendor documentation or other information about configuring network switches and associated networking equipment to enable multicast addresses and IGMP.
			</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-conga-considerations-CA"></a>2.8. Considerations for Using <span><strong class="application">Conga</strong></span></h2>
              </div>
            </div>
          </div>
          <a id="id2744331" class="indexterm"></a>
          <a id="id2744349" class="indexterm"></a>
          <p>
			When using <span><strong class="application">Conga</strong></span> to configure and manage your Red Hat Cluster, make sure that each computer running <span><strong class="application">luci</strong></span> (the <span><strong class="application">Conga</strong></span> user interface server) is running on the same network that the cluster is using for cluster communication. Otherwise, <span><strong class="application">luci</strong></span> cannot configure the nodes to communicate on the right network. If the computer running <span><strong class="application">luci</strong></span> is on another network (for example, a public network rather than a private network that the cluster is communicating on), contact an authorized Red Hat support representative to make sure that the appropriate host name is configured for each cluster node.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clust-config-considerations-CA"></a>2.9. General Configuration Considerations</h2>
              </div>
            </div>
          </div>
          <a id="id2744420" class="indexterm"></a>
          <a id="id2744433" class="indexterm"></a>
          <p>
			You can configure a Red Hat Cluster in a variety of ways to suit your needs. Take into account the following considerations when you plan, configure, and implement your Red Hat Cluster.
		</p>
          <div class="variablelist">
            <dl>
              <dt>
                <span class="term"> No-single-point-of-failure hardware configuration </span>
              </dt>
              <dd>
                <p>
						Clusters can include a dual-controller RAID array, multiple bonded network channels, multiple paths between cluster members and storage, and redundant un-interruptible power supply (UPS) systems to ensure that no single failure results in application down time or loss of data.
					</p>
                <p>
						Alternatively, a low-cost cluster can be set up to provide less availability than a no-single-point-of-failure cluster. For example, you can set up a cluster with a single-controller RAID array and only a single Ethernet channel.
					</p>
                <p>
						Certain low-cost alternatives, such as host RAID controllers, software RAID without cluster support, and multi-initiator parallel SCSI configurations are not compatible or appropriate for use as shared cluster storage.
					</p>
              </dd>
              <dt>
                <span class="term"> Data integrity assurance </span>
              </dt>
              <dd>
                <p>
						To ensure data integrity, only one node can run a cluster service and access cluster-service data at a time. The use of power switches in the cluster hardware configuration enables a node to power-cycle another node before restarting that node's cluster services during a failover process. This prevents two nodes from simultaneously accessing the same data and corrupting it. It is strongly recommended that <em class="firstterm">fence devices</em> (hardware or software solutions that remotely power, shutdown, and reboot cluster nodes) are used to guarantee data integrity under all failure conditions. Watchdog timers provide an alternative way to to ensure correct operation of cluster service failover.
					</p>
              </dd>
              <dt>
                <span class="term"> Ethernet channel bonding </span>
              </dt>
              <dd>
                <p>
						Cluster quorum and node health is determined by communication of messages among cluster nodes via Ethernet. In addition, cluster nodes use Ethernet for a variety of other critical cluster functions (for example, fencing). With Ethernet channel bonding, multiple Ethernet interfaces are configured to behave as one, reducing the risk of a single-point-of-failure in the typical switched Ethernet connection among cluster nodes and other cluster hardware.
					</p>
              </dd>
            </dl>
          </div>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ch-config-conga-CA"></a>Chapter 3. Configuring Red Hat Cluster With <span><strong class="application">Conga</strong></span></h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#s1-config-tasks-conga-CA">3.1. Configuration Tasks</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-start-luci-ricci-conga-CA">3.2. Starting <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span></a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-creating-cluster-conga-CA">3.3. Creating A Cluster</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-general-prop-conga-CA">3.4. Global Cluster Properties</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-config-fence-devices-conga-CA">3.5. Configuring Fence Devices</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-create-fence-devices-conga-CA">3.5.1. Creating a Shared Fence Device</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-modify-delete-fence-devices-conga-CA">3.5.2. Modifying or Deleting a Fence Device</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-config-member-conga-CA">3.6. Configuring Cluster Members</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-init-member-conga-CA">3.6.1. Initially Configuring Members</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-add-member-running-conga-CA">3.6.2. Adding a Member to a Running Cluster</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-delete-member-conga-CA">3.6.3. Deleting a Member from a Cluster</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-config-failover-domain-conga-CA">3.7. Configuring a Failover Domain</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-config-add-failoverdm-conga-CA">3.7.1. Adding a Failover Domain</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-config-modify-failoverdm-conga-CA">3.7.2. Modifying a Failover Domain</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-config-add-resource-conga-CA">3.8. Adding Cluster Resources</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-add-service-conga-CA">3.9. Adding a Cluster Service to the Cluster</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-config-storage-conga-CA">3.10. Configuring Cluster Storage</a>
              </span>
            </dt>
          </dl>
        </div>
        <a id="id2728437" class="indexterm"></a>
        <a id="id2651629" class="indexterm"></a>
        <p>
		This chapter describes how to configure Red Hat Cluster software using <span><strong class="application">Conga</strong></span>, and consists of the following sections:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<a href="#s1-config-tasks-conga-CA" title="3.1. Configuration Tasks">Section 3.1, “Configuration Tasks”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-start-luci-ricci-conga-CA" title="3.2. Starting luci and ricci">Section 3.2, “Starting <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span>”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-creating-cluster-conga-CA" title="3.3. Creating A Cluster">Section 3.3, “Creating A Cluster”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-general-prop-conga-CA" title="3.4. Global Cluster Properties">Section 3.4, “Global Cluster Properties”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-config-fence-devices-conga-CA" title="3.5. Configuring Fence Devices">Section 3.5, “Configuring Fence Devices”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-config-member-conga-CA" title="3.6. Configuring Cluster Members">Section 3.6, “Configuring Cluster Members”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-config-failover-domain-conga-CA" title="3.7. Configuring a Failover Domain">Section 3.7, “Configuring a Failover Domain”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-config-add-resource-conga-CA" title="3.8. Adding Cluster Resources">Section 3.8, “Adding Cluster Resources”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-add-service-conga-CA" title="3.9. Adding a Cluster Service to the Cluster">Section 3.9, “Adding a Cluster Service to the Cluster”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-config-storage-conga-CA" title="3.10. Configuring Cluster Storage">Section 3.10, “Configuring Cluster Storage”</a>
			</p>
            </li>
          </ul>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-tasks-conga-CA"></a>3.1. Configuration Tasks</h2>
              </div>
            </div>
          </div>
          <p>
			Configuring Red Hat Cluster software with <span><strong class="application">Conga</strong></span> consists of the following steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Configuring and running the <span><strong class="application">Conga</strong></span> configuration user interface — the <span><strong class="application">luci</strong></span> server. Refer to <a href="#s1-start-luci-ricci-conga-CA" title="3.2. Starting luci and ricci">Section 3.2, “Starting <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span>”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating a cluster. Refer to <a href="#s1-creating-cluster-conga-CA" title="3.3. Creating A Cluster">Section 3.3, “Creating A Cluster”</a>.
				</p>
              </li>
              <li>
                <p>
					Configuring global cluster properties. Refer to <a href="#s1-general-prop-conga-CA" title="3.4. Global Cluster Properties">Section 3.4, “Global Cluster Properties”</a>.
				</p>
              </li>
              <li>
                <p>
					Configuring fence devices. Refer to <a href="#s1-config-fence-devices-conga-CA" title="3.5. Configuring Fence Devices">Section 3.5, “Configuring Fence Devices”</a>.
				</p>
              </li>
              <li>
                <p>
					Configuring cluster members. Refer to <a href="#s1-config-member-conga-CA" title="3.6. Configuring Cluster Members">Section 3.6, “Configuring Cluster Members”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating failover domains. Refer to <a href="#s1-config-failover-domain-conga-CA" title="3.7. Configuring a Failover Domain">Section 3.7, “Configuring a Failover Domain”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating resources. Refer to <a href="#s1-config-add-resource-conga-CA" title="3.8. Adding Cluster Resources">Section 3.8, “Adding Cluster Resources”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating cluster services. Refer to <a href="#s1-add-service-conga-CA" title="3.9. Adding a Cluster Service to the Cluster">Section 3.9, “Adding a Cluster Service to the Cluster”</a>.
				</p>
              </li>
              <li>
                <p>
					Configuring storage. Refer to <a href="#s1-config-storage-conga-CA" title="3.10. Configuring Cluster Storage">Section 3.10, “Configuring Cluster Storage”</a>.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-start-luci-ricci-conga-CA"></a>3.2. Starting <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span></h2>
              </div>
            </div>
          </div>
          <p>
			To administer Red Hat Clusters with <span><strong class="application">Conga</strong></span>, install and run <span><strong class="application">luci</strong></span> and <span><strong class="application">ricci</strong></span> as follows:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At each node to be administered by <span><strong class="application">Conga</strong></span>, install the <span><strong class="application">ricci</strong></span> agent. For example:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>yum install ricci</code></strong>
</pre>
              </li>
              <li>
                <p>
					At each node to be administered by <span><strong class="application">Conga</strong></span>, start <span><strong class="application">ricci</strong></span>. For example:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>service ricci start</code></strong>
Starting ricci:                                            [  OK  ]
</pre>
              </li>
              <li>
                <p>
					Select a computer to host <span><strong class="application">luci</strong></span> and install the <span><strong class="application">luci</strong></span> software on that computer. For example:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>yum install luci</code></strong>
</pre>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						Typically, a computer in a server cage or a data center hosts <span><strong class="application">luci</strong></span>; however, a cluster computer can host <span><strong class="application">luci</strong></span>.
					</p>
                </div>
              </li>
              <li>
                <p>
					At the computer running <span><strong class="application">luci</strong></span>, initialize the <span><strong class="application">luci</strong></span> server using the <code class="command">luci_admin init</code> command. For example:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>luci_admin init</code></strong>
Initializing the Luci server


Creating the 'admin' user

Enter password:  &lt;Type password and press ENTER.&gt;
Confirm password: &lt;Re-type password and press ENTER.&gt;

Please wait...
The admin password has been successfully set.
Generating SSL certificates...
Luci server has been successfully initialized


Restart the Luci server for changes to take effect
eg. service luci restart
</pre>
              </li>
              <li>
                <p>
					Start <span><strong class="application">luci</strong></span> using <code class="command">service luci restart</code>. For example:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>service luci restart</code></strong>
Shutting down luci:                                        [  OK  ]
Starting luci: generating https SSL certificates...  done
                                                           [  OK  ]

Please, point your web browser to https://nano-01:8084 to access luci
</pre>
              </li>
              <li>
                <p>
					At a Web browser, place the URL of the <span><strong class="application">luci</strong></span> server into the URL address box and click <span><strong class="guiicon">Go </strong></span> (or the equivalent). The URL syntax for the <span><strong class="application">luci</strong></span> server is <strong class="userinput"><code>https://<em class="replaceable"><code>luci_server_hostname</code></em>:8084</code></strong>. The first time you access <span><strong class="application">luci</strong></span>, two SSL certificate dialog boxes are displayed. Upon acknowledging the dialog boxes, your Web browser displays the <span><strong class="application">luci</strong></span> login page.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-creating-cluster-conga-CA"></a>3.3. Creating A Cluster</h2>
              </div>
            </div>
          </div>
          <p>
			Creating a cluster with <span><strong class="application">luci</strong></span> consists of selecting cluster nodes, entering their passwords, and submitting the request to create a cluster. If the node information and passwords are correct, <span><strong class="application">Conga</strong></span> automatically installs software into the cluster nodes and starts the cluster. Create a cluster as follows:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					As administrator of <span><strong class="application">luci</strong></span>, select the <span><strong class="guimenu">cluster</strong></span> tab.
				</p>
              </li>
              <li>
                <p>
					Click <span><strong class="guimenu">Create a New Cluster</strong></span>.
				</p>
              </li>
              <li>
                <p>
					At the <span><strong class="guimenu">Cluster Name</strong></span> text box, enter a cluster name. The cluster name cannot exceed 15 characters. Add the node name and password for each cluster node. Enter the node name for each node in the <span><strong class="guimenu">Node Hostname</strong></span> column; enter the root password for each node in the in the <span><strong class="guimenu">Root Password</strong></span> column. Check the <span><strong class="guimenu">Enable Shared Storage Support</strong></span> checkbox if clustered storage is required.
				</p>
              </li>
              <li>
                <p>
					Click <span><strong class="guibutton">Submit</strong></span>. Clicking <span><strong class="guibutton">Submit</strong></span> causes the following actions:
				</p>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
							Cluster software packages to be downloaded onto each cluster node.
						</p>
                    </li>
                    <li>
                      <p>
							Cluster software to be installed onto each cluster node.
						</p>
                    </li>
                    <li>
                      <p>
							Cluster configuration file to be created and propagated to each node in the cluster.
						</p>
                    </li>
                    <li>
                      <p>
							Starting the cluster.
						</p>
                    </li>
                  </ol>
                </div>
                <p>
					A progress page shows the progress of those actions for each node in the cluster.
				</p>
                <p>
					When the process of creating a new cluster is complete, a page is displayed providing a configuration interface for the newly created cluster.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-general-prop-conga-CA"></a>3.4. Global Cluster Properties</h2>
              </div>
            </div>
          </div>
          <p>
			When a cluster is created, or if you select a cluster to configure, a cluster-specific page is displayed. The page provides an interface for configuring cluster-wide properties and detailed properties. You can configure cluster-wide properties with the tabbed interface below the cluster name. The interface provides the following tabs: <span><strong class="guimenu">General</strong></span>, <span><strong class="guimenu">Fence</strong></span>, <span><strong class="guimenu">Multicast</strong></span>, and <span><strong class="guimenu">Quorum Partition</strong></span>. To configure the parameters in those tabs, follow the steps in this section. If you do not need to configure parameters in a tab, skip the step for that tab.
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					<span><strong class="guimenu">General</strong></span> tab — This tab displays cluster name and provides an interface for configuring the configuration version and advanced cluster properties. The parameters are summarized as follows:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							The <span><strong class="guimenu">Cluster Name</strong></span> text box displays the cluster name; it does not accept a cluster name change. You cannot change the cluster name. The only way to change the name of a Red Hat cluster is to create a new cluster configuration with the new name.
						</p>
                    </li>
                    <li>
                      <p>
							The <span><strong class="guimenu">Configuration Version</strong></span> value is set to <strong class="userinput"><code>1</code></strong> by default and is automatically incremented each time you modify your cluster configuration. However, if you need to set it to another value, you can specify it at the <span><strong class="guimenu">Configuration Version</strong></span> text box.
						</p>
                    </li>
                    <li>
                      <p>
							You can enter advanced cluster properties by clicking <span><strong class="guimenu">Show advanced cluster properties</strong></span>. Clicking <span><strong class="guimenu">Show advanced cluster properties</strong></span> reveals a list of advanced properties. You can click any advanced property for online help about the property.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					Enter the values required and click <span><strong class="guibutton">Apply</strong></span> for changes to take effect.
				</p>
              </li>
              <li>
                <p>
					<span><strong class="guimenu">Fence</strong></span> tab — This tab provides an interface for configuring these <span><strong class="guimenu">Fence Daemon Properties</strong></span> parameters: <span><strong class="guimenu">Post-Fail Delay</strong></span> and <span><strong class="guimenu">Post-Join Delay</strong></span>. The parameters are summarized as follows:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							The <span><strong class="guimenu">Post-Fail Delay</strong></span> parameter is the number of seconds the fence daemon (<code class="command">fenced</code>) waits before fencing a node (a member of the fence domain) after the node has failed. The <span><strong class="guimenu">Post-Fail Delay</strong></span> default value is <strong class="userinput"><code>0</code></strong>. Its value may be varied to suit cluster and network performance.
						</p>
                    </li>
                    <li>
                      <p>
							The <span><strong class="guimenu">Post-Join Delay</strong></span> parameter is the number of seconds the fence daemon (<code class="command">fenced</code>) waits before fencing a node after the node joins the fence domain. The <span><strong class="guimenu">Post-Join Delay</strong></span> default value is <strong class="userinput"><code>3</code></strong>. A typical setting for <span><strong class="guimenu">Post-Join Delay</strong></span> is between 20 and 30 seconds, but can vary according to cluster and network performance.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					Enter values required and Click <span><strong class="guibutton">Apply</strong></span> for changes to take effect.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						For more information about <span><strong class="guimenu">Post-Join Delay</strong></span> and <span><strong class="guimenu">Post-Fail Delay</strong></span>, refer to the <span class="citerefentry"><span class="refentrytitle">fenced</span>(8)</span> man page.
					</p>
                </div>
              </li>
              <li>
                <p>
					<span><strong class="guimenu">Multicast</strong></span> tab — This tab provides an interface for configuring these <span><strong class="guimenu">Multicast Configuration</strong></span> parameters: <span><strong class="guimenu">Let cluster choose the multicast address</strong></span> and <span><strong class="guimenu">Specify the multicast address manually</strong></span>. Red Hat Cluster software chooses a multicast address for cluster management communication among cluster nodes; therefore, the default setting is <span><strong class="guimenu">Let cluster choose the multicast address</strong></span>. If you need to use a specific multicast address, click <span><strong class="guimenu">Specify the multicast address manually</strong></span>, enter a multicast address into the text box, and click <span><strong class="guibutton">Apply</strong></span> for changes to take effect.
				</p>
              </li>
              <li>
                <p>
					<span><strong class="guimenu">Quorum Partition</strong></span> tab — This tab provides an interface for configuring these <span><strong class="guimenu">Quorum Partition Configuration</strong></span> parameters: <span><strong class="guimenu">Do not use a Quorum Partition</strong></span>, <span><strong class="guimenu">Use a Quorum Partition</strong></span>, <span><strong class="guimenu">Interval</strong></span>, <span><strong class="guimenu">Votes</strong></span>, <span><strong class="guimenu">TKO</strong></span>, <span><strong class="guimenu">Minimum Score</strong></span>, <span><strong class="guimenu">Device</strong></span>, <span><strong class="guimenu">Label</strong></span>, and <span><strong class="guimenu">Heuristics</strong></span>. The <span><strong class="guimenu">Do not use a Quorum Partition</strong></span> parameter is enabled by default. <a href="#tb-qdisk-params-rhel5-conga-CA" title="Table 3.1. Quorum-Disk Parameters">Table 3.1, “Quorum-Disk Parameters”</a> describes the parameters. If you need to use a quorum disk, click <span><strong class="guimenu">Use a Quorum Partition</strong></span>, enter quorum disk parameters, click <span><strong class="guibutton">Apply</strong></span>, and restart the cluster for the changes to take effect.
				</p>
                <div class="important">
                  <h2>Important</h2>
                  <p>
						Quorum-disk parameters and heuristics depend on the site environment and the special requirements needed. To understand the use of quorum-disk parameters and heuristics, refer to the <span class="citerefentry"><span class="refentrytitle">qdisk</span>(5)</span> man page. If you require assistance understanding and using quorum disk, contact an authorized Red Hat support representative.
					</p>
                </div>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						Clicking <span><strong class="guimenu">Apply</strong></span> on the <span><strong class="guimenu">Quorum Partition</strong></span> tab propagates changes to the cluster configuration file (<code class="filename">/etc/cluster/cluster.conf</code>) in each cluster node. However, for the quorum disk to operate, you must restart the cluster (refer to <a href="#s1-admin-start-conga-CA" title="4.1. Starting, Stopping, and Deleting Clusters">Section 4.1, “Starting, Stopping, and Deleting Clusters”</a>).
					</p>
                </div>
              </li>
            </ol>
          </div>
          <div class="table">
            <a id="tb-qdisk-params-rhel5-conga-CA"></a>
            <div class="table-contents">
              <table summary="Quorum-Disk Parameters" border="1">
                <colgroup>
                  <col />
                  <col />
                </colgroup>
                <thead>
                  <tr>
                    <th>
							Parameter
						</th>
                    <th>
							Description
						</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
							<span><strong class="guimenu">Do not use a Quorum Partition</strong></span>
						</td>
                    <td>
							Disables quorum partition. Disables quorum-disk parameters in the <span><strong class="guimenu">Quorum Partition</strong></span> tab.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Use a Quorum Partition</strong></span>
						</td>
                    <td>
							Enables quorum partition. Enables quorum-disk parameters in the <span><strong class="guimenu">Quorum Partition</strong></span> tab.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Interval</strong></span>
						</td>
                    <td>
							The frequency of read/write cycles, in seconds.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Votes</strong></span>
						</td>
                    <td>
							The number of votes the quorum daemon advertises to CMAN when it has a high enough score.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">TKO</strong></span>
						</td>
                    <td>
							The number of cycles a node must miss to be declared dead.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Minimum Score</strong></span>
						</td>
                    <td>
							The minimum score for a node to be considered "alive". If omitted or set to 0, the default function, <code class="command">floor((<em class="replaceable"><code>n</code></em>+1)/2)</code>, is used, where <em class="replaceable"><code>n</code></em> is the sum of the heuristics scores. The <span><strong class="guimenu">Minimum Score</strong></span> value must never exceed the sum of the heuristic scores; otherwise, the quorum disk cannot be available.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Device</strong></span>
						</td>
                    <td>
							The storage device the quorum daemon uses. The device must be the same on all nodes.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Label</strong></span>
						</td>
                    <td>
							Specifies the quorum disk label created by the <code class="command">mkqdisk</code> utility. If this field contains an entry, the label overrides the <span><strong class="guimenu">Device</strong></span> field. If this field is used, the quorum daemon reads <code class="filename">/proc/partitions</code> and checks for qdisk signatures on every block device found, comparing the label against the specified label. This is useful in configurations where the quorum device name differs among nodes.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Heuristics</strong></span>
						</td>
                    <td>
							<table class="simplelist" border="0" summary="Simple list"><tr><td><span><strong class="guimenu">Path to Program</strong></span> — The program used to determine if this heuristic is alive. This can be anything that can be executed by <code class="command">/bin/sh -c</code>. A return value of <span class="returnvalue">0</span> indicates success; anything else indicates failure. This field is required.</td></tr><tr><td><span><strong class="guimenu">Interval</strong></span> — The frequency (in seconds) at which the heuristic is polled. The default interval for every heuristic is 2 seconds.</td></tr><tr><td><span><strong class="guimenu">Score</strong></span> — The weight of this heuristic. Be careful when determining scores for heuristics. The default score for each heuristic is 1. </td></tr></table>
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Apply</strong></span>
						</td>
                    <td>
							Propagates the changes to the cluster configuration file (<code class="filename">/etc/cluster/cluster.conf</code>) in each cluster node.
						</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h6>Table 3.1. Quorum-Disk Parameters</h6>
          </div>
          <br class="table-break" />
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-fence-devices-conga-CA"></a>3.5. Configuring Fence Devices</h2>
              </div>
            </div>
          </div>
          <p>
			Configuring fence devices consists of creating, modifying, and deleting fence devices. Creating a fence device consists of selecting a fence device type and entering parameters for that fence device (for example, name, IP address, login, and password). Modifying a fence device consists of selecting an existing fence device and changing parameters for that fence device. Deleting a fence device consists of selecting an existing fence device and deleting it.
		</p>
          <div class="tip">
            <h2>Tip</h2>
            <p>
				If you are creating a new cluster, you can create fence devices when you configure cluster nodes. Refer to <a href="#s1-config-member-conga-CA" title="3.6. Configuring Cluster Members">Section 3.6, “Configuring Cluster Members”</a>.
			</p>
          </div>
          <p>
			With <span><strong class="application">Conga</strong></span> you can create shared and non-shared fence devices.
		</p>
          <p>
			The following shared fence devices are available:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					APC Power Switch
				</p>
              </li>
              <li>
                <p>
					Brocade Fabric Switch
				</p>
              </li>
              <li>
                <p>
					Bull PAP
				</p>
              </li>
              <li>
                <p>
					Egenera SAN Controller
				</p>
              </li>
              <li>
                <p>
					GNBD
				</p>
              </li>
              <li>
                <p>
					IBM Blade Center
				</p>
              </li>
              <li>
                <p>
					McData SAN Switch
				</p>
              </li>
              <li>
                <p>
					QLogic SANbox2
				</p>
              </li>
              <li>
                <p>
					SCSI Fencing
				</p>
              </li>
              <li>
                <p>
					Virtual Machine Fencing
				</p>
              </li>
              <li>
                <p>
					Vixel SAN Switch
				</p>
              </li>
              <li>
                <p>
					WTI Power Switch
				</p>
              </li>
            </ul>
          </div>
          <p>
			The following non-shared fence devices are available:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Dell DRAC
				</p>
              </li>
              <li>
                <p>
					HP iLO
				</p>
              </li>
              <li>
                <p>
					IBM RSA II
				</p>
              </li>
              <li>
                <p>
					IPMI LAN
				</p>
              </li>
              <li>
                <p>
					RPS10 Serial Switch
				</p>
              </li>
            </ul>
          </div>
          <p>
			This section provides procedures for the following tasks:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Creating <span class="emphasis"><em>shared</em></span> fence devices — Refer to <a href="#s2-create-fence-devices-conga-CA" title="3.5.1. Creating a Shared Fence Device">Section 3.5.1, “Creating a Shared Fence Device”</a>. The procedures apply <span class="emphasis"><em>only</em></span> to creating shared fence devices. You can create <span class="emphasis"><em>non-shared</em></span> (and shared) fence devices while configuring nodes (refer to <a href="#s1-config-member-conga-CA" title="3.6. Configuring Cluster Members">Section 3.6, “Configuring Cluster Members”</a>).
				</p>
              </li>
              <li>
                <p>
					Modifying or deleting fence devices — Refer to <a href="#s2-modify-delete-fence-devices-conga-CA" title="3.5.2. Modifying or Deleting a Fence Device">Section 3.5.2, “Modifying or Deleting a Fence Device”</a>. The procedures apply to both shared and non-shared fence devices.
				</p>
              </li>
            </ul>
          </div>
          <p>
			The starting point of each procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
		</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-create-fence-devices-conga-CA"></a>3.5.1. Creating a Shared Fence Device</h3>
                </div>
              </div>
            </div>
            <p>
				To create a shared fence device, follow these steps:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Shared Fence Devices</strong></span>. Clicking <span><strong class="guimenu">Shared Fence Devices</strong></span> causes the display of the fence devices for a cluster and causes the display of menu items for fence device configuration: <span><strong class="guimenu">Add a Fence Device</strong></span> and <span><strong class="guimenu">Configure a Fence Device</strong></span>.
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							If this is an initial cluster configuration, no fence devices have been created, and therefore none are displayed.
						</p>
                  </div>
                </li>
                <li>
                  <p>
						Click <span><strong class="guimenu">Add a Fence Device</strong></span>. Clicking <span><strong class="guimenu">Add a Fence Device</strong></span> causes the <span><strong class="guilabel">Add a Sharable Fence Device</strong></span> page to be displayed (refer to <a href="#fig-fence-device-config-dbox-conga-CA" title="Figure 3.1. Fence Device Configuration">Figure 3.1, “Fence Device Configuration”</a>).
					</p>
                  <div class="figure">
                    <a id="fig-fence-device-config-dbox-conga-CA"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="./images/fence-device-config-dbox-conga.png" alt="Fence Device Configuration" />
                        <div class="longdesc">
                          <p>
									fence configuration dialog box
								</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 3.1. Fence Device Configuration</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
						At the <span><strong class="guilabel">Add a Sharable Fence Device</strong></span> page, click the drop-down box under <span><strong class="guimenu">Fencing Type</strong></span> and select the type of fence device to configure.
					</p>
                </li>
                <li>
                  <p>
						Specify the information in the <span><strong class="guilabel">Fencing Type </strong></span> dialog box according to the type of fence device. Refer to <a href="#ap-fence-device-param-CA" title="Appendix B. Fence Device Parameters">Appendix B, <i>Fence Device Parameters</i></a> for more information about fence device parameters.
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guibutton">Add this shared fence device</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						Clicking <span><strong class="guibutton">Add this shared fence device</strong></span> causes a progress page to be displayed temporarily. After the fence device has been added, the detailed cluster properties menu is updated with the fence device under <span><strong class="guimenu">Configure a Fence Device</strong></span>.
					</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-modify-delete-fence-devices-conga-CA"></a>3.5.2. Modifying or Deleting a Fence Device</h3>
                </div>
              </div>
            </div>
            <p>
				To modify or delete a fence device, follow these steps:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Shared Fence Devices</strong></span>. Clicking <span><strong class="guimenu">Shared Fence Devices</strong></span> causes the display of the fence devices for a cluster and causes the display of menu items for fence device configuration: <span><strong class="guimenu">Add a Fence Device</strong></span> and <span><strong class="guimenu">Configure a Fence Device</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guimenu">Configure a Fence Device</strong></span>. Clicking <span><strong class="guimenu">Configure a Fence Device</strong></span> causes the display of a list of fence devices under <span><strong class="guimenu">Configure a Fence Device</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						Click a fence device in the list. Clicking a fence device in the list causes the display of a <span><strong class="guilabel">Fence Device Form</strong></span> page for the fence device selected from the list.
					</p>
                </li>
                <li>
                  <p>
						Either modify or delete the fence device as follows:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								To modify the fence device, enter changes to the parameters displayed. Refer to <a href="#ap-fence-device-param-CA" title="Appendix B. Fence Device Parameters">Appendix B, <i>Fence Device Parameters</i></a> for more information about fence device parameters. Click <span><strong class="guibutton">Update this fence device</strong></span> and wait for the configuration to be updated.
							</p>
                      </li>
                      <li>
                        <p>
								To delete the fence device, click <span><strong class="guibutton">Delete this fence device</strong></span> and wait for the configuration to be updated.
							</p>
                        <div class="note">
                          <h2>Note</h2>
                          <p>
									You can create shared fence devices on the node configuration page, also. However, you can only modify or delete a shared fence device via <span><strong class="guimenu">Shared Fence Devices</strong></span> at the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu).
								</p>
                        </div>
                      </li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-member-conga-CA"></a>3.6. Configuring Cluster Members</h2>
              </div>
            </div>
          </div>
          <p>
			Configuring cluster members consists of initially configuring nodes in a newly configured cluster, adding members, and deleting members. The following sections provide procedures for initial configuration of nodes, adding nodes, and deleting nodes:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<a href="#s2-init-member-conga-CA" title="3.6.1. Initially Configuring Members">Section 3.6.1, “Initially Configuring Members”</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-add-member-running-conga-CA" title="3.6.2. Adding a Member to a Running Cluster">Section 3.6.2, “Adding a Member to a Running Cluster”</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-delete-member-conga-CA" title="3.6.3. Deleting a Member from a Cluster">Section 3.6.3, “Deleting a Member from a Cluster”</a>
				</p>
              </li>
            </ul>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-init-member-conga-CA"></a>3.6.1. Initially Configuring Members</h3>
                </div>
              </div>
            </div>
            <p>
				Creating a cluster consists of selecting a set of nodes (or members) to be part of the cluster. Once you have completed the initial step of creating a cluster and creating fence devices, you need to configure cluster nodes. To initially configure cluster nodes after creating a new cluster, follow the steps in this section. The starting point of the procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Nodes</strong></span>. Clicking <span><strong class="guimenu">Nodes</strong></span> causes the display of an <span><strong class="guimenu">Add a Node</strong></span> element and a <span><strong class="guimenu">Configure</strong></span> element with a list of the nodes already configured in the cluster.
					</p>
                </li>
                <li>
                  <p>
						Click a link for a node at either the list in the center of the page or in the list in the detailed menu under the <span><strong class="guimenu">clusters</strong></span> menu. Clicking a link for a node causes a page to be displayed for that link showing how that node is configured.
					</p>
                </li>
                <li>
                  <p>
						At the bottom of the page, under <span><strong class="guimenu">Main Fencing Method</strong></span>, click <span><strong class="guibutton">Add a fence device to this level</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						Select a fence device and provide parameters for the fence device (for example port number).
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							You can choose from an existing fence device or create a new fence device.
						</p>
                  </div>
                </li>
                <li>
                  <p>
						Click <span><strong class="guibutton">Update main fence properties</strong></span> and wait for the change to take effect.
					</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-add-member-running-conga-CA"></a>3.6.2. Adding a Member to a Running Cluster</h3>
                </div>
              </div>
            </div>
            <p>
				To add a member to a running cluster, follow the steps in this section. The starting point of the procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Nodes</strong></span>. Clicking <span><strong class="guimenu">Nodes</strong></span> causes the display of an <span><strong class="guimenu">Add a Node</strong></span> element and a <span><strong class="guimenu">Configure</strong></span> element with a list of the nodes already configured in the cluster. (In addition, a list of the cluster nodes is displayed in the center of the page.)
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guimenu">Add a Node</strong></span>. Clicking <span><strong class="guimenu">Add a Node</strong></span> causes the display of the <span><strong class="guilabel">Add a node to <em class="replaceable"><code>cluster name</code></em></strong></span> page.
					</p>
                </li>
                <li>
                  <p>
						At that page, enter the node name in the <span><strong class="guimenu">Node Hostname</strong></span> text box; enter the root password in the <span><strong class="guimenu">Root Password</strong></span> text box. Check the <span><strong class="guimenu">Enable Shared Storage Support</strong></span> checkbox if clustered storage is required. If you want to add more nodes, click <span><strong class="guibutton">Add another entry</strong></span> and enter node name and password for the each additional node.
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guibutton">Submit</strong></span>. Clicking <span><strong class="guibutton">Submit</strong></span> causes the following actions:
					</p>
                  <div class="orderedlist">
                    <ol>
                      <li>
                        <p>
								Cluster software packages to be downloaded onto the added node.
							</p>
                      </li>
                      <li>
                        <p>
								Cluster software to be installed (or verification that the appropriate software packages are installed) onto the added node.
							</p>
                      </li>
                      <li>
                        <p>
								Cluster configuration file to be updated and propagated to each node in the cluster — including the added node.
							</p>
                      </li>
                      <li>
                        <p>
								Joining the added node to cluster.
							</p>
                      </li>
                    </ol>
                  </div>
                  <p>
						A progress page shows the progress of those actions for each added node.
					</p>
                </li>
                <li>
                  <p>
						When the process of adding a node is complete, a page is displayed providing a configuration interface for the cluster.
					</p>
                </li>
                <li>
                  <p>
						At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Nodes</strong></span>. Clicking <span><strong class="guimenu">Nodes</strong></span> causes the following displays:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								A list of cluster nodes in the center of the page
							</p>
                      </li>
                      <li>
                        <p>
								The <span><strong class="guimenu">Add a Node</strong></span> element and the <span><strong class="guimenu">Configure</strong></span> element with a list of the nodes configured in the cluster at the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu)
							</p>
                      </li>
                    </ul>
                  </div>
                </li>
                <li>
                  <p>
						Click the link for an added node at either the list in the center of the page or in the list in the detailed menu under the <span><strong class="guimenu">clusters</strong></span> menu. Clicking the link for the added node causes a page to be displayed for that link showing how that node is configured.
					</p>
                </li>
                <li>
                  <p>
						At the bottom of the page, under <span><strong class="guimenu">Main Fencing Method</strong></span>, click <span><strong class="guibutton">Add a fence device to this level</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						Select a fence device and provide parameters for the fence device (for example port number).
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							You can choose from an existing fence device or create a new fence device.
						</p>
                  </div>
                </li>
                <li>
                  <p>
						Click <span><strong class="guibutton">Update main fence properties</strong></span> and wait for the change to take effect.
					</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-delete-member-conga-CA"></a>3.6.3. Deleting a Member from a Cluster</h3>
                </div>
              </div>
            </div>
            <p>
				To delete a member from an existing cluster that is currently in operation, follow the steps in this section. The starting point of the procedure is at the <span><strong class="guilabel">Choose a cluster to administer</strong></span> page (displayed on the <span><strong class="guimenu">cluster</strong></span> tab).
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						Click the link of the node to be deleted. Clicking the link of the node to be deleted causes a page to be displayed for that link showing how that node is configured.
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							To allow services running on a node to fail over when the node is deleted, skip the next step.
						</p>
                  </div>
                </li>
                <li>
                  <p>
						Disable or relocate each service that is running on the node to be deleted:
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							Repeat this step for each service that needs to be disabled or started on another node.
						</p>
                  </div>
                  <div class="orderedlist">
                    <ol>
                      <li>
                        <p>
								Under <span><strong class="guimenu">Services on this Node</strong></span>, click the link for a service. Clicking that link cause a configuration page for that service to be displayed.
							</p>
                      </li>
                      <li>
                        <p>
								On that page, at the <span><strong class="guimenu">Choose a task</strong></span>drop-down box, choose to either disable the service are start it on another node and click <span><strong class="guibutton">Go</strong></span>.
							</p>
                      </li>
                      <li>
                        <p>
								Upon confirmation that the service has been disabled or started on another node, click the <span><strong class="guimenu">cluster</strong></span> tab. Clicking the <span><strong class="guimenu">cluster</strong></span> tab causes the <span><strong class="guilabel">Choose a cluster to administer</strong></span> page to be displayed.
							</p>
                      </li>
                      <li>
                        <p>
								At the <span><strong class="guilabel">Choose a cluster to administer</strong></span> page, click the link of the node to be deleted. Clicking the link of the node to be deleted causes a page to be displayed for that link showing how that node is configured.
							</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>
						On that page, at the <span><strong class="guimenu">Choose a task</strong></span>drop-down box, choose <span><strong class="guimenuitem">Delete this node</strong></span> and click <span><strong class="guibutton">Go</strong></span>. When the node is deleted, a page is displayed that lists the nodes in the cluster. Check the list to make sure that the node has been deleted.
					</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-failover-domain-conga-CA"></a>3.7. Configuring a Failover Domain</h2>
              </div>
            </div>
          </div>
          <p>
			A failover domain is a named subset of cluster nodes that are eligible to run a cluster service in the event of a node failure. A failover domain can have the following characteristics:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Unrestricted — Allows you to specify that a subset of members are preferred, but that a cluster service assigned to this domain can run on any available member.
				</p>
              </li>
              <li>
                <p>
					Restricted — Allows you to restrict the members that can run a particular cluster service. If none of the members in a restricted failover domain are available, the cluster service cannot be started (either manually or by the cluster software).
				</p>
              </li>
              <li>
                <p>
					Unordered — When a cluster service is assigned to an unordered failover domain, the member on which the cluster service runs is chosen from the available failover domain members with no priority ordering.
				</p>
              </li>
              <li>
                <p>
					Ordered — Allows you to specify a preference order among the members of a failover domain. The member at the top of the list is the most preferred, followed by the second member in the list, and so on.
				</p>
              </li>
            </ul>
          </div>
          <div class="note">
            <h2>Note</h2>
            <p>
				Changing a failover domain configuration has no effect on currently running services.
			</p>
          </div>
          <div class="note">
            <h2>Note</h2>
            <p>
				Failover domains are <span class="emphasis"><em>not</em></span> required for operation.
			</p>
          </div>
          <p>
			By default, failover domains are unrestricted and unordered.
		</p>
          <p>
			In a cluster with several members, using a restricted failover domain can minimize the work to set up the cluster to run a cluster service (such as <code class="filename">httpd</code>), which requires you to set up the configuration identically on all members that run the cluster service). Instead of setting up the entire cluster to run the cluster service, you must set up only the members in the restricted failover domain that you associate with the cluster service.
		</p>
          <div class="tip">
            <h2>Tip</h2>
            <p>
				To configure a preferred member, you can create an unrestricted failover domain comprising only one cluster member. Doing that causes a cluster service to run on that cluster member primarily (the preferred member), but allows the cluster service to fail over to any of the other members.
			</p>
          </div>
          <p>
			The following sections describe adding a failover domain and modifying a failover domain:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<a href="#s2-config-add-failoverdm-conga-CA" title="3.7.1. Adding a Failover Domain">Section 3.7.1, “Adding a Failover Domain”</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-config-modify-failoverdm-conga-CA" title="3.7.2. Modifying a Failover Domain">Section 3.7.2, “Modifying a Failover Domain”</a>
				</p>
              </li>
            </ul>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-config-add-failoverdm-conga-CA"></a>3.7.1. Adding a Failover Domain</h3>
                </div>
              </div>
            </div>
            <p>
				To add a failover domain, follow the steps in this section. The starting point of the procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Failover Domains</strong></span>. Clicking <span><strong class="guimenu">Failover Domains</strong></span> causes the display of failover domains with related services and the display of menu items for failover domains: <span><strong class="guimenu">Add a Failover Domain</strong></span> and <span><strong class="guimenu">Configure a Failover Domain </strong></span>.
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guimenu">Add a Failover Domain</strong></span>. Clicking <span><strong class="guimenu">Add a Failover Domain</strong></span> causes the display of the <span><strong class="guilabel">Add a Failover Domain</strong></span> page.
					</p>
                </li>
                <li>
                  <p>
						At the <span><strong class="guilabel">Add a Failover Domain</strong></span> page, specify a failover domain name at the <span><strong class="guimenu">Failover Domain Name</strong></span> text box.
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							The name should be descriptive enough to distinguish its purpose relative to other names used in your cluster.
						</p>
                  </div>
                </li>
                <li>
                  <p>
						To enable setting failover priority of the members in the failover domain, click the <span><strong class="guimenu">Prioritized</strong></span> checkbox. With <span><strong class="guimenu">Prioritized</strong></span> checked, you can set the priority value, <span><strong class="guimenu">Priority</strong></span>, for each node selected as members of the failover domain.
					</p>
                </li>
                <li>
                  <p>
						To restrict failover to members in this failover domain, click the checkbox next to <span><strong class="guimenu">Restrict failover to this domain's members</strong></span>. With <span><strong class="guimenu">Restrict failover to this domain's members</strong></span> checked, services assigned to this failover domain fail over only to nodes in this failover domain.
					</p>
                </li>
                <li>
                  <p>
						Configure members for this failover domain. Under <span><strong class="guimenu">Failover domain membership</strong></span>, click the <span><strong class="guimenu">Member</strong></span>checkbox for each node that is to be a member of the failover domain. If <span><strong class="guimenu">Prioritized</strong></span> is checked, set the priority in the <span><strong class="guimenu">Priority</strong></span> text box for each member of the failover domain.
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guibutton">Submit</strong></span>. Clicking <span><strong class="guibutton">Submit</strong></span> causes a progress page to be displayed followed by the display of the <span><strong class="guilabel">Failover Domain Form</strong></span> page. That page displays the added resource and includes the failover domain in the cluster menu to the left under <span><strong class="guimenu">Domain</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						To make additional changes to the failover domain, continue modifications at the <span><strong class="guilabel">Failover Domain Form</strong></span> page and click <span><strong class="guibutton">Submit</strong></span> when you are done.
					</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-config-modify-failoverdm-conga-CA"></a>3.7.2. Modifying a Failover Domain</h3>
                </div>
              </div>
            </div>
            <p>
				To modify a failover domain, follow the steps in this section. The starting point of the procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Failover Domains</strong></span>. Clicking <span><strong class="guimenu">Failover Domains</strong></span> causes the display of failover domains with related services and the display of menu items for failover domains: <span><strong class="guimenu">Add a Failover Domain</strong></span> and <span><strong class="guimenu">Configure a Failover Domain </strong></span>.
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guimenu">Configure a Failover Domain</strong></span>. Clicking <span><strong class="guimenu">Configure a Failover Domain</strong></span> causes the display of failover domains under <span><strong class="guimenu">Configure a Failover Domain</strong></span> at the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu).
					</p>
                </li>
                <li>
                  <p>
						At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click the failover domain to modify. Clicking the failover domain causes the display of the <span><strong class="guilabel">Failover Domain Form</strong></span> page. At the <span><strong class="guilabel">Failover Domain Form</strong></span> page, you can modify the failover domain name, prioritize failover, restrict failover to this domain, and modify failover domain membership.
					</p>
                </li>
                <li>
                  <p>
						Modifying failover name — To change the failover domain name, modify the text at the <span><strong class="guimenu">Failover Domain Name</strong></span> text box.
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							The name should be descriptive enough to distinguish its purpose relative to other names used in your cluster.
						</p>
                  </div>
                </li>
                <li>
                  <p>
						Failover priority — To enable or disable prioritized failover in this failover domain, click the <span><strong class="guimenu">Prioritized</strong></span> checkbox. With <span><strong class="guimenu">Prioritized</strong></span> checked, you can set the priority value, <span><strong class="guimenu">Priority</strong></span>, for each node selected as members of the failover domain. With <span><strong class="guimenu">Prioritized</strong></span><span class="emphasis"><em>not</em></span> checked, setting priority levels is disabled for this failover domain.
					</p>
                </li>
                <li>
                  <p>
						Restricted failover — To enable or disable restricted failover for members in this failover domain, click the checkbox next to <span><strong class="guimenu">Restrict failover to this domain's members</strong></span>. With <span><strong class="guimenu">Restrict failover to this domain's members</strong></span> checked, services assigned to this failover domain fail over only to nodes in this failover domain. With <span><strong class="guimenu">Restrict failover to this domain's members</strong></span><span class="emphasis"><em>not</em></span> checked, services assigned to this failover domain can fail over to nodes outside this failover domain.
					</p>
                </li>
                <li>
                  <p>
						Modifying failover domain membership — Under <span><strong class="guimenu">Failover domain membership</strong></span>, click the <span><strong class="guimenu">Member</strong></span>checkbox for each node that is to be a member of the failover domain. A checked box for a node means that the node is a member of the failover domain. If <span><strong class="guimenu">Prioritized</strong></span> is checked, you can adjust the priority in the <span><strong class="guimenu">Priority</strong></span> text box for each member of the failover domain.
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guibutton">Submit</strong></span>. Clicking <span><strong class="guibutton">Submit</strong></span> causes a progress page to be displayed followed by the display of the <span><strong class="guilabel">Failover Domain Form</strong></span> page. That page displays the added resource and includes the failover domain in the cluster menu to the left under <span><strong class="guimenu">Domain</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						To make additional changes to the failover domain, continue modifications at the <span><strong class="guilabel">Failover Domain Form</strong></span> page and click <span><strong class="guibutton">Submit</strong></span> when you are done.
					</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-add-resource-conga-CA"></a>3.8. Adding Cluster Resources</h2>
              </div>
            </div>
          </div>
          <p>
			To add a cluster resource, follow the steps in this section. The starting point of the procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Resources</strong></span>. Clicking <span><strong class="guimenu">Resources</strong></span> causes the display of resources in the center of the page and causes the display of menu items for resource configuration: <span><strong class="guimenu">Add a Resource</strong></span> and <span><strong class="guimenu">Configure a Resource</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Click <span><strong class="guimenu">Add a Resource</strong></span>. Clicking <span><strong class="guimenu">Add a Resource</strong></span> causes the <span><strong class="guilabel">Add a Resource</strong></span> page to be displayed.
				</p>
              </li>
              <li>
                <p>
					At the <span><strong class="guilabel">Add a Resource</strong></span> page, click the drop-down box under <span><strong class="guimenu">Select a Resource Type</strong></span> and select the type of resource to configure. <a href="#ap-ha-resource-params-CA" title="Appendix C. HA Resource Parameters">Appendix C, <i>HA Resource Parameters</i></a> describes resource paramaters.
				</p>
              </li>
              <li>
                <p>
					Click <span><strong class="guibutton">Submit</strong></span>. Clicking <span><strong class="guibutton">Submit</strong></span> causes a progress page to be displayed followed by the display of <span><strong class="guilabel">Resources for<em class="replaceable"><code>cluster name</code></em></strong></span> page. That page displays the added resource (and other resources).
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-add-service-conga-CA"></a>3.9. Adding a Cluster Service to the Cluster</h2>
              </div>
            </div>
          </div>
          <a id="id2729278" class="indexterm"></a>
          <a id="id2729291" class="indexterm"></a>
          <p>
			To add a cluster service to the cluster, follow the steps in this section. The starting point of the procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Services</strong></span>. Clicking <span><strong class="guimenu">Services</strong></span> causes the display of services in the center of the page and causes the display of menu items for services configuration: <span><strong class="guimenu">Add a Service</strong></span> and <span><strong class="guimenu">Configure a Service</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Click <span><strong class="guimenu">Add a Service</strong></span>. Clicking <span><strong class="guimenu">Add a Service</strong></span> causes the <span><strong class="guilabel">Add a Service</strong></span> page to be displayed.
				</p>
              </li>
              <li>
                <p>
					On the <span><strong class="guilabel">Add a Service</strong></span> page, at the <span><strong class="guimenu">Service name</strong></span> text box, type the name of the service. Below the <span><strong class="guimenu">Service name</strong></span> text box is an checkbox labeled <span><strong class="guimenu">Automatically start this service</strong></span>. The checkbox is checked by default. When the checkbox is checked, the service is started automatically when a cluster is started and running. If the checkbox is <span class="emphasis"><em>not</em></span> checked, the service must be started manually any time the cluster comes up from the stopped state.
				</p>
                <div class="tip">
                  <h2>Tip</h2>
                  <p>
						Use a descriptive name that clearly distinguishes the service from other services in the cluster.
					</p>
                </div>
              </li>
              <li>
                <p>
					Add a resource to the service; click <span><strong class="guibutton">Add a resource to this service</strong></span>. Clicking <span><strong class="guibutton">Add a resource to this service</strong></span> causes the display of two drop-down boxes: <span><strong class="guimenu">Add a new local resource</strong></span> and <span><strong class="guimenu">Use an existing global resource</strong></span>. Adding a new local resource adds a resource that is available <span class="emphasis"><em>only</em></span> to this service. The process of adding a local resource is the same as adding a global resource described in <a href="#s1-config-add-resource-conga-CA" title="3.8. Adding Cluster Resources">Section 3.8, “Adding Cluster Resources”</a>. Adding a global resource adds a resource that has been previously added as a global resource (refer to <a href="#s1-config-add-resource-conga-CA" title="3.8. Adding Cluster Resources">Section 3.8, “Adding Cluster Resources”</a>).
				</p>
              </li>
              <li>
                <p>
					At the drop-down box of either <span><strong class="guimenu">Add a new local resource</strong></span> or <span><strong class="guimenu">Use an existing global resource</strong></span>, select the resource to add and configure it according to the options presented. (The options are the same as described in <a href="#s1-config-add-resource-conga-CA" title="3.8. Adding Cluster Resources">Section 3.8, “Adding Cluster Resources”</a>.)
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						If you are adding a Samba-service resource, connect a Samba-service resource directly to the service, <span class="emphasis"><em>not</em></span> to a resource within a service.
					</p>
                </div>
              </li>
              <li>
                <p>
					If you want to add resources to that resource, click <span><strong class="guibutton">Add a child</strong></span>. Clicking <span><strong class="guibutton">Add a child</strong></span> causes the display of additional options to local and global resources. You can continue adding children resources to the resource to suit your requirements. To view children resources, click the triangle icon to the left of <span><strong class="guimenu">Show Children</strong></span>.
				</p>
              </li>
              <li>
                <p>
					When you have completed adding resources to the service, and have completed adding children resources to resources, click <span><strong class="guibutton">Submit</strong></span>. Clicking <span><strong class="guibutton">Submit</strong></span> causes a progress page to be displayed followed by a page displaying the added service (and other services).
				</p>
              </li>
            </ol>
          </div>
          <div class="note">
            <h2>Note</h2>
            <p>
				To verify the existence of the IP service resource used in a cluster service, you must use the <code class="command">/sbin/ip addr list</code> command on a cluster node. The following output shows the <code class="command">/sbin/ip addr list</code> command executed on a node running a cluster service:
			</p>
            <pre class="screen">
1: lo: &lt;LOOPBACK,UP&gt; mtu 16436 qdisc noqueue 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1356 qdisc pfifo_fast qlen 1000
    link/ether 00:05:5d:9a:d8:91 brd ff:ff:ff:ff:ff:ff
    inet 10.11.4.31/22 brd 10.11.7.255 scope global eth0
    inet6 fe80::205:5dff:fe9a:d891/64 scope link
    inet 10.11.4.240/22 scope global secondary eth0
       valid_lft forever preferred_lft forever
</pre>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-storage-conga-CA"></a>3.10. Configuring Cluster Storage</h2>
              </div>
            </div>
          </div>
          <a id="id2753142" class="indexterm"></a>
          <a id="id2753156" class="indexterm"></a>
          <p>
			To configure storage for a cluster, click the <span><strong class="guimenu">storage</strong></span> tab. Clicking that tab causes the display of the <span><strong class="guilabel">Welcome to Storage Configuration Interface</strong></span> page.
		</p>
          <p>
			The <span><strong class="guimenu">storage</strong></span> tab allows you to monitor and configure storage on remote systems. It provides a means for configuring disk partitions, logical volumes (clustered and single system use), file system parameters, and mount points. The <span><strong class="guimenu">storage</strong></span> tab provides an interface for setting up shared storage for clusters and offers GFS and other file systems as file system options. When a you select the <span><strong class="guimenu">storage</strong></span> tab, the <span><strong class="guilabel">Welcome to Storage Configuration Interface</strong></span> page shows a list of systems available to the you in a navigation table to the left. A small form allows you to choose a storage unit size to suit your preference. That choice is persisted and can be changed at any time by returning to this page. In addition, you can change the unit type on specific configuration forms throughout the storage user interface. This general choice allows you to avoid difficult decimal representations of storage size (for example, if you know that most of your storage is measured in gigabytes, terabytes, or other more familiar representations).
		</p>
          <p>
			Additionally, the <span><strong class="guilabel">Welcome to Storage Configuration Interface</strong></span> page lists systems that you are authorized to access, but currently are unable to administer because of a problem. Examples of problems:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					A computer is unreachable via the network.
				</p>
              </li>
              <li>
                <p>
					A computer has been re-imaged and the <span><strong class="application">luci</strong></span> server admin must re-authenticate with the <span><strong class="application">ricci</strong></span> agent on the computer.
				</p>
              </li>
            </ul>
          </div>
          <p>
			A reason for the trouble is displayed if the storage user interface can determine it.
		</p>
          <p>
			Only those computers that the user is privileged to administer is shown in the main navigation table. If you have no permissions on any computers, a message is displayed.
		</p>
          <p>
			After you select a computer to administer, a general properties page is displayed for the computer. This page is divided into three sections:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<span><strong class="guimenu"> Hard Drives </strong></span>
				</p>
              </li>
              <li>
                <p>
					<span><strong class="guimenu"> Partitions </strong></span>
				</p>
              </li>
              <li>
                <p>
					<span><strong class="guimenu"> Volume Groups </strong></span>
				</p>
              </li>
            </ul>
          </div>
          <p>
			Each section is set up as an expandable tree, with links to property sheets for specific devices, partitions, and storage entities.
		</p>
          <p>
			Configure the storage for your cluster to suit your cluster requirements. If you are configuring Red Hat GFS, configure clustered logical volumes first, using CLVM. For more information about CLVM and GFS refer to Red Hat documentation for those products.
		</p>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ch-mgmt-conga-CA"></a>Chapter 4. Managing Red Hat Cluster With <span><strong class="application">Conga</strong></span></h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#s1-admin-start-conga-CA">4.1. Starting, Stopping, and Deleting Clusters</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-admin-manage-nodes-conga-CA">4.2. Managing Cluster Nodes</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-admin-manage-ha-services-conga-CA">4.3. Managing High-Availability Services</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-admin-problems-conga-CA">4.4. Diagnosing and Correcting Problems in a Cluster</a>
              </span>
            </dt>
          </dl>
        </div>
        <a id="id2803658" class="indexterm"></a>
        <a id="id2723541" class="indexterm"></a>
        <p>
		This chapter describes various administrative tasks for managing a Red Hat Cluster and consists of the following sections:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<a href="#s1-admin-start-conga-CA" title="4.1. Starting, Stopping, and Deleting Clusters">Section 4.1, “Starting, Stopping, and Deleting Clusters”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-admin-manage-nodes-conga-CA" title="4.2. Managing Cluster Nodes">Section 4.2, “Managing Cluster Nodes”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-admin-manage-ha-services-conga-CA" title="4.3. Managing High-Availability Services">Section 4.3, “Managing High-Availability Services”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-admin-problems-conga-CA" title="4.4. Diagnosing and Correcting Problems in a Cluster">Section 4.4, “Diagnosing and Correcting Problems in a Cluster”</a>
			</p>
            </li>
          </ul>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-start-conga-CA"></a>4.1. Starting, Stopping, and Deleting Clusters</h2>
              </div>
            </div>
          </div>
          <a id="id2715258" class="indexterm"></a>
          <a id="id2653451" class="indexterm"></a>
          <p>
			You can perform the following cluster-management functions through the <span><strong class="application">luci</strong></span> server component of <span><strong class="application">Conga</strong></span>:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Restart a cluster.
				</p>
              </li>
              <li>
                <p>
					Start a cluster.
				</p>
              </li>
              <li>
                <p>
					Stop a cluster.
				</p>
              </li>
              <li>
                <p>
					Delete a cluster.
				</p>
              </li>
            </ul>
          </div>
          <p>
			To perform one of the functions in the preceding list, follow the steps in this section. The starting point of the procedure is at the <span><strong class="guimenu">cluster</strong></span> tab (at the <span><strong class="guilabel">Choose a cluster to administer</strong></span> page).
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At the right of the <span><strong class="guimenu">Cluster Name</strong></span> for each cluster listed on the <span><strong class="guilabel">Choose a cluster to administer</strong></span> page is a drop-down box. By default, the drop-down box is set to <span><strong class="guimenu">Restart this cluster</strong></span>. Clicking the drop-down box box reveals all the selections available: <span><strong class="guimenu">Restart this cluster</strong></span>, <span><strong class="guimenu">Stop this cluster</strong></span>/<span><strong class="guimenu">Start this cluster</strong></span>, and <span><strong class="guimenu">Delete this cluster</strong></span>. The actions of each function are summarized as follows:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<span><strong class="guimenu">Restart this cluster</strong></span> — Selecting this action causes the cluster to be restarted. You can select this action for any state the cluster is in.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Stop this cluster</strong></span>/<span><strong class="guimenu">Start this cluster</strong></span> — <span><strong class="guimenu">Stop this cluster</strong></span> is available when a cluster is running. <span><strong class="guimenu">Start this cluster</strong></span> is available when a cluster is stopped.
						</p>
                      <p>
							Selecting <span><strong class="guimenu">Stop this cluster</strong></span> shuts down cluster software in all cluster nodes.
						</p>
                      <p>
							Selecting <span><strong class="guimenu">Start this cluster</strong></span> starts cluster software.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Delete this cluster</strong></span> — Selecting this action halts a running cluster, disables cluster software from starting automatically, and removes the cluster configuration file from each node. You can select this action for any state the cluster is in. Deleting a cluster frees each node in the cluster for use in another cluster.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
					Select one of the functions and click <span><strong class="guibutton">Go</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guibutton">Go</strong></span> causes a progress page to be displayed. When the action is complete, a page is displayed showing either of the following pages according to the action selected:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							For <span><strong class="guimenu">Restart this cluster</strong></span> and <span><strong class="guimenu">Stop this cluster</strong></span>/<span><strong class="guimenu">Start this cluster</strong></span> — Displays a page with the list of nodes for the cluster.
						</p>
                    </li>
                    <li>
                      <p>
							For <span><strong class="guimenu">Delete this cluster</strong></span> — Displays the <span><strong class="guilabel">Choose a cluster to administer</strong></span> page in the <span><strong class="guimenu">cluster</strong></span> tab, showing a list of clusters.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-manage-nodes-conga-CA"></a>4.2. Managing Cluster Nodes</h2>
              </div>
            </div>
          </div>
          <a id="id2798063" class="indexterm"></a>
          <a id="id2798387" class="indexterm"></a>
          <p>
			You can perform the following node-management functions through the <span><strong class="application">luci</strong></span> server component of <span><strong class="application">Conga</strong></span>:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Make a node leave or join a cluster.
				</p>
              </li>
              <li>
                <p>
					Fence a node.
				</p>
              </li>
              <li>
                <p>
					Reboot a node.
				</p>
              </li>
              <li>
                <p>
					Delete a node.
				</p>
              </li>
            </ul>
          </div>
          <p>
			To perform one the functions in the preceding list, follow the steps in this section. The starting point of the procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Nodes</strong></span>. Clicking <span><strong class="guimenu">Nodes</strong></span> causes the display of nodes in the center of the page and causes the display of an <span><strong class="guimenu">Add a Node</strong></span> element and a <span><strong class="guimenu">Configure</strong></span> element with a list of the nodes already configured in the cluster.
				</p>
              </li>
              <li>
                <p>
					At the right of each node listed on the page displayed from the preceding step, click the <span><strong class="guimenu">Choose a task</strong></span> drop-down box. Clicking <span><strong class="guimenu">Choose a task</strong></span> drop-down box reveals the following selections: <span><strong class="guimenu">Have node leave cluster</strong></span>/<span><strong class="guimenu">Have node join cluster</strong></span>, <span><strong class="guimenu">Fence this node</strong></span>, <span><strong class="guimenu">Reboot this node</strong></span>, and <span><strong class="guimenu">Delete</strong></span>. The actions of each function are summarized as follows:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<span><strong class="guimenu">Have node leave cluster</strong></span>/<span><strong class="guimenu">Have node join cluster</strong></span> — <span><strong class="guimenu">Have node leave cluster</strong></span> is available when a node has joined of a cluster. <span><strong class="guimenu">Have node join cluster</strong></span> is available when a node has left a cluster.
						</p>
                      <p>
							Selecting <span><strong class="guimenu">Have node leave cluster</strong></span> shuts down cluster software and makes the node leave the cluster. Making a node leave a cluster prevents the node from automatically joining the cluster when it is rebooted.
						</p>
                      <p>
							Selecting <span><strong class="guimenu">Have node join cluster</strong></span> starts cluster software and makes the node join the cluster. Making a node join a cluster allows the node to automatically join the cluster when it is rebooted.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Fence this node</strong></span> — Selecting this action causes the node to be fenced according to how the node is configured to be fenced.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Reboot this node</strong></span> — Selecting this action causes the node to be rebooted.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Delete</strong></span> — Selecting this action causes the node to be deleted from the cluster configuration. It also stops all cluster services on the node, and deletes the <code class="filename">cluster.conf</code> file from <code class="filename">/etc/cluster/</code>.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
					Select one of the functions and click <span><strong class="guibutton">Go</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guibutton">Go</strong></span> causes a progress page to be displayed. When the action is complete, a page is displayed showing the list of nodes for the cluster.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-manage-ha-services-conga-CA"></a>4.3. Managing High-Availability Services</h2>
              </div>
            </div>
          </div>
          <a id="id2774550" class="indexterm"></a>
          <p>
			You can perform the following management functions for high-availability services through the <span><strong class="application">luci</strong></span> server component of <span><strong class="application">Conga</strong></span>:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Configure a service.
				</p>
              </li>
              <li>
                <p>
					Stop or start a service.
				</p>
              </li>
              <li>
                <p>
					Restart a service.
				</p>
              </li>
              <li>
                <p>
					Delete a service
				</p>
              </li>
            </ul>
          </div>
          <p>
			To perform one the functions in the preceding list, follow the steps in this section. The starting point of the procedure is at the cluster-specific page that you navigate to from <span><strong class="guilabel">Choose a cluster to administer</strong></span> displayed on the <span><strong class="guimenu">cluster</strong></span> tab.
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At the detailed menu for the cluster (below the <span><strong class="guimenu">clusters</strong></span> menu), click <span><strong class="guimenu">Services</strong></span>. Clicking <span><strong class="guimenu">Services</strong></span> causes the display of services for the cluster in the center of the page.
				</p>
              </li>
              <li>
                <p>
					At the right of each service listed on the page, click the <span><strong class="guimenu">Choose a task</strong></span> drop-down box. Clicking <span><strong class="guimenu">Choose a task</strong></span> drop-down box reveals the following selections depending on if the service is running:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							If service is running — <span><strong class="guimenu">Configure this service</strong></span>, <span><strong class="guimenu">Restart this service</strong></span>, and <span><strong class="guimenu">Stop this service</strong></span>.
						</p>
                    </li>
                    <li>
                      <p>
							If service is not running — <span><strong class="guimenu">Configure this service</strong></span>, <span><strong class="guimenu">Start this service</strong></span>, and <span><strong class="guimenu">Delete this service</strong></span>.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					The actions of each function are summarized as follows:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<span><strong class="guimenu">Configure this service</strong></span> — <span><strong class="guimenu">Configure this service</strong></span> is available when the service is running or not running. Selecting <span><strong class="guimenu">Configure this service</strong></span> causes the services configuration page for the service to be displayed. On that page, you can change the configuration of the service. For example, you can add a resource to the service. (For more information about adding resources and services, refer to<a href="#s1-config-add-resource-conga-CA" title="3.8. Adding Cluster Resources">Section 3.8, “Adding Cluster Resources”</a> and <a href="#s1-add-service-conga-CA" title="3.9. Adding a Cluster Service to the Cluster">Section 3.9, “Adding a Cluster Service to the Cluster”</a>.) In addition, a drop-down box on the page provides other functions depending on if the service is running.
						</p>
                      <p>
							When a service is running, the drop-down box provides the following functions: restarting, disabling, and relocating the service.
						</p>
                      <p>
							When a service is not running, the drop-down box on the configuration page provides the following functions: enabling and deleting the service.
						</p>
                      <p>
							If you are making configuration changes, save the changes by clicking <span><strong class="guibutton">Save</strong></span>. Clicking <span><strong class="guibutton">Save</strong></span> causes a progress page to be displayed. When the change is complete, another page is displayed showing a list of services for the cluster.
						</p>
                      <p>
							If you have selected one of the functions in the drop-down box on the configuration page, click <span><strong class="guibutton">Go</strong></span>. Clicking <span><strong class="guibutton">Go</strong></span> causes a progress page to be displayed. When the change is complete, another page is displayed showing a list of services for the cluster.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Restart this service</strong></span> and <span><strong class="guimenu">Stop this service</strong></span> — These selections are available when the service is running. Select either function and click <span><strong class="guibutton">Go</strong></span> to make the change take effect. Clicking <span><strong class="guibutton">Go</strong></span> causes a progress page to be displayed. When the change is complete, another page is displayed showing a list of services for the cluster.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Start this service</strong></span> and <span><strong class="guimenu">Delete this service</strong></span> — These selections are available when the service is not running. Select either function and click <span><strong class="guibutton">Go</strong></span> to make the change take effect. Clicking <span><strong class="guibutton">Go</strong></span> causes a progress page to be displayed. When the change is complete, another page is displayed showing a list of services for the cluster.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-problems-conga-CA"></a>4.4. Diagnosing and Correcting Problems in a Cluster</h2>
              </div>
            </div>
          </div>
          <a id="id2770068" class="indexterm"></a>
          <a id="id2770082" class="indexterm"></a>
          <a id="id2770095" class="indexterm"></a>
          <p>
			For information about diagnosing and correcting problems in a cluster, contact an authorized Red Hat support representative.
		</p>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ch-config-scc-CA"></a>Chapter 5. Configuring Red Hat Cluster With <code class="command">system-config-cluster</code></h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#s1-config-tasks-CA">5.1. Configuration Tasks</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-start-clustertool-CA">5.2. Starting the <span><strong class="application">Cluster Configuration Tool</strong></span></a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-naming-cluster-CA">5.3. Configuring Cluster Properties</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-config-fence-devices-CA">5.4. Configuring Fence Devices</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-add-delete-member-CA">5.5. Adding and Deleting Members</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-add-member-new-CA">5.5.1. Adding a Member to a Cluster</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-add-member-running-CA">5.5.2. Adding a Member to a Running Cluster</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-delete-member-CA">5.5.3. Deleting a Member from a Cluster</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-config-failover-domain-CA">5.6. Configuring a Failover Domain</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#s2-config-add-failoverdm-CA">5.6.1. Adding a Failover Domain</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-config-remove-failoverdm-CA">5.6.2. Removing a Failover Domain</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#s2-config-remove-member-failoverdm-CA">5.6.3. Removing a Member from a Failover Domain</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#s1-config-service-dev-CA">5.7. Adding Cluster Services</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-add-service-CA">5.8. Adding a Cluster Service to the Cluster</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-propagate-config-CA">5.9. Propagating The Configuration File: New Cluster</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-starting-cluster-CA">5.10. Starting the Cluster Software</a>
              </span>
            </dt>
          </dl>
        </div>
        <a id="id2780706" class="indexterm"></a>
        <a id="id2737606" class="indexterm"></a>
        <p>
		This chapter describes how to configure Red Hat Cluster software using <code class="command">system-config-cluster</code>, and consists of the following sections:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<a href="#s1-config-tasks-CA" title="5.1. Configuration Tasks">Section 5.1, “Configuration Tasks”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-start-clustertool-CA" title="5.2. Starting the Cluster Configuration Tool">Section 5.2, “Starting the <span><strong class="application">Cluster Configuration Tool</strong></span>”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-naming-cluster-CA" title="5.3. Configuring Cluster Properties">Section 5.3, “Configuring Cluster Properties”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-config-fence-devices-CA" title="5.4. Configuring Fence Devices">Section 5.4, “Configuring Fence Devices”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-add-delete-member-CA" title="5.5. Adding and Deleting Members">Section 5.5, “Adding and Deleting Members”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-config-failover-domain-CA" title="5.6. Configuring a Failover Domain">Section 5.6, “Configuring a Failover Domain”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-config-service-dev-CA" title="5.7. Adding Cluster Services">Section 5.7, “Adding Cluster Services”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-add-service-CA" title="5.8. Adding a Cluster Service to the Cluster">Section 5.8, “Adding a Cluster Service to the Cluster”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-propagate-config-CA" title="5.9. Propagating The Configuration File: New Cluster">Section 5.9, “Propagating The Configuration File: New Cluster”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-starting-cluster-CA" title="5.10. Starting the Cluster Software">Section 5.10, “Starting the Cluster Software”</a>
			</p>
            </li>
          </ul>
        </div>
        <div class="tip">
          <h2>Tip</h2>
          <p>
			While <code class="command">system-config-cluster</code> provides several convenient tools for configuring and managing a Red Hat Cluster, the newer, more comprehensive tool, <span><strong class="application">Conga</strong></span>, provides more convenience and flexibility than <code class="command">system-config-cluster</code>. You may want to consider using <span><strong class="application">Conga</strong></span> instead (refer to <a href="#ch-config-conga-CA" title="Chapter 3. Configuring Red Hat Cluster With Conga">Chapter 3, <i>Configuring Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a> and <a href="#ch-mgmt-conga-CA" title="Chapter 4. Managing Red Hat Cluster With Conga">Chapter 4, <i>Managing Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a>).
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-tasks-CA"></a>5.1. Configuration Tasks</h2>
              </div>
            </div>
          </div>
          <p>
			Configuring Red Hat Cluster software with <code class="command">system-config-cluster</code> consists of the following steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Starting the <span><strong class="application">Cluster Configuration Tool</strong></span>, <code class="command">system-config-cluster</code>. Refer to <a href="#s1-start-clustertool-CA" title="5.2. Starting the Cluster Configuration Tool">Section 5.2, “Starting the <span><strong class="application">Cluster Configuration Tool</strong></span>”</a>.
				</p>
              </li>
              <li>
                <p>
					Configuring cluster properties. Refer to <a href="#s1-naming-cluster-CA" title="5.3. Configuring Cluster Properties">Section 5.3, “Configuring Cluster Properties”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating fence devices. Refer to <a href="#s1-config-fence-devices-CA" title="5.4. Configuring Fence Devices">Section 5.4, “Configuring Fence Devices”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating cluster members. Refer to <a href="#s1-add-delete-member-CA" title="5.5. Adding and Deleting Members">Section 5.5, “Adding and Deleting Members”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating failover domains. Refer to <a href="#s1-config-failover-domain-CA" title="5.6. Configuring a Failover Domain">Section 5.6, “Configuring a Failover Domain”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating resources. Refer to <a href="#s1-config-service-dev-CA" title="5.7. Adding Cluster Services">Section 5.7, “Adding Cluster Services”</a>.
				</p>
              </li>
              <li>
                <p>
					Creating cluster services.
				</p>
                <p>
					Refer to <a href="#s1-add-service-CA" title="5.8. Adding a Cluster Service to the Cluster">Section 5.8, “Adding a Cluster Service to the Cluster”</a>.
				</p>
              </li>
              <li>
                <p>
					Propagating the configuration file to the other nodes in the cluster.
				</p>
                <p>
					Refer to <a href="#s1-propagate-config-CA" title="5.9. Propagating The Configuration File: New Cluster">Section 5.9, “Propagating The Configuration File: New Cluster”</a>.
				</p>
              </li>
              <li>
                <p>
					Starting the cluster software. Refer to <a href="#s1-starting-cluster-CA" title="5.10. Starting the Cluster Software">Section 5.10, “Starting the Cluster Software”</a>.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-start-clustertool-CA"></a>5.2. Starting the <span><strong class="application">Cluster Configuration Tool</strong></span></h2>
              </div>
            </div>
          </div>
          <p>
			You can start the <span><strong class="application">Cluster Configuration Tool</strong></span> by logging in to a cluster node as root with the <code class="command">ssh -Y</code> command and issuing the <code class="command">system-config-cluster</code> command. For example, to start the <span><strong class="application">Cluster Configuration Tool</strong></span> on cluster node nano-01, do the following:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Log in to a cluster node and run <code class="command">system-config-cluster</code>. For example:
				</p>
                <pre class="screen">
$ <strong class="userinput"><code> ssh -Y root@nano-01</code></strong>
  .
  .
  .
# <strong class="userinput"><code>system-config-cluster</code></strong>
</pre>
              </li>
              <li>
                <p>
					If this is the first time you have started the <span><strong class="application">Cluster Configuration Tool</strong></span>, the program prompts you to either open an existing configuration or create a new one. Click <span><strong class="guibutton">Create New Configuration</strong></span> to start a new configuration file (refer to <a href="#fig-software-clustertool-new-CA" title="Figure 5.1. Starting a New Configuration File">Figure 5.1, “Starting a New Configuration File”</a>).
				</p>
                <div class="figure">
                  <a id="fig-software-clustertool-new-CA"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="./images/cluconfig-new-5.0.png" alt="Starting a New Configuration File" />
                      <div class="longdesc">
                        <p>
								Starting a New Configuration File.
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 5.1. Starting a New Configuration File</h6>
                </div>
                <br class="figure-break" />
                <div class="note">
                  <h2>Note</h2>
                  <p>
						The <span><strong class="guimenu">Cluster Management</strong></span> tab for the Red Hat Cluster Suite management GUI is available after you save the configuration file with the <span><strong class="application">Cluster Configuration Tool</strong></span>, exit, and restart the Red Hat Cluster Suite management GUI (<code class="command">system-config-cluster</code>). (The <span><strong class="guimenu">Cluster Management</strong></span> tab displays the status of the cluster service manager, cluster nodes, and resources, and shows statistics concerning cluster service operation. To manage the cluster system further, choose the <span><strong class="guimenu">Cluster Configuration</strong></span> tab.)
					</p>
                </div>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guibutton">Create New Configuration</strong></span> causes the <span><strong class="guilabel">New Configuration</strong></span> dialog box to be displayed (refer to <a href="#fig-software-clustertool-newconfig-CA" title="Figure 5.2. Creating A New Configuration">Figure 5.2, “Creating A New Configuration”</a>). The <span><strong class="guilabel">New Configuration</strong></span> dialog box provides a text box for cluster name and the following checkboxes: <span><strong class="guimenu">Custom Configure Multicast</strong></span> and <span><strong class="guimenu">Use a Quorum Disk</strong></span>. In most circumstances you only need to configure the cluster name.
				</p>
                <div class="tip">
                  <h2>Tip</h2>
                  <p>
						Choose the cluster name carefully. The only way to change the name of a Red Hat cluster is to create a new cluster configuration with the new name.
					</p>
                </div>
                <p>
					Red Hat Cluster software chooses a multicast address for cluster management communication among cluster nodes. If you need to use a specific multicast address, click the <span><strong class="guimenu">Custom Configure Multicast</strong></span> checkbox and enter a multicast address in the <span><strong class="guimenu">Address</strong></span> text boxes. If you need to use a quorum disk, click the <span><strong class="guimenu">Use a Quorum disk</strong></span> checkbox and enter quorum disk parameters. The following quorum-disk parameters are available in the dialog box if you enable <span><strong class="guimenu">Use a Quorum disk</strong></span>: <span><strong class="guimenu">Interval</strong></span>, <span><strong class="guimenu">TKO</strong></span>, <span><strong class="guimenu">Votes</strong></span>, <span><strong class="guimenu">Minimum Score</strong></span>, <span><strong class="guimenu">Device</strong></span>, <span><strong class="guimenu">Label</strong></span>, and <span><strong class="guimenu">Quorum Disk Heuristic</strong></span>. <a href="#tb-qdisk-params-rhel5-CA" title="Table 5.1. Quorum-Disk Parameters">Table 5.1, “Quorum-Disk Parameters”</a> describes the parameters.
				</p>
                <div class="important">
                  <h2>Important</h2>
                  <p>
						Quorum-disk parameters and heuristics depend on the site environment and special requirements needed. To understand the use of quorum-disk parameters and heuristics, refer to the <span class="citerefentry"><span class="refentrytitle">qdisk</span>(5)</span> man page. If you require assistance understanding and using quorum disk, contact an authorized Red Hat support representative.
					</p>
                </div>
                <div class="tip">
                  <h2>Tip</h2>
                  <p>
						It is probable that configuring a quorum disk requires changing quorum-disk parameters after the initial configuration. The <span><strong class="application">Cluster Configuration Tool</strong></span> (<code class="command">system-config-cluster</code>) provides only the display of quorum-disk parameters after initial configuration. If you need to configure quorum disk, consider using <span><strong class="application">Conga</strong></span> instead; <span><strong class="application">Conga</strong></span> allows modification of quorum disk parameters.
					</p>
                  <p>
						<span class="emphasis"><em>Overall:</em></span>
					</p>
                  <p>
						While <code class="command">system-config-cluster</code> provides several convenient tools for configuring and managing a Red Hat Cluster, the newer, more comprehensive tool, <span><strong class="application">Conga</strong></span>, provides more convenience and flexibility than <code class="command">system-config-cluster</code>. You may want to consider using <span><strong class="application">Conga</strong></span> instead (refer to <a href="#ch-config-conga-CA" title="Chapter 3. Configuring Red Hat Cluster With Conga">Chapter 3, <i>Configuring Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a> and <a href="#ch-mgmt-conga-CA" title="Chapter 4. Managing Red Hat Cluster With Conga">Chapter 4, <i>Managing Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a>).
					</p>
                </div>
                <div class="figure">
                  <a id="fig-software-clustertool-newconfig-CA"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="./images/cluconfig-newconfig-5.0.png" alt="Creating A New Configuration" />
                      <div class="longdesc">
                        <p>
								New Configuration
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 5.2. Creating A New Configuration</h6>
                </div>
                <br class="figure-break" />
              </li>
              <li>
                <p>
					When you have completed entering the cluster name and other parameters in the <span><strong class="guilabel">New Configuration</strong></span> dialog box, click <span><strong class="guibutton">OK</strong></span>. Clicking <span><strong class="guibutton">OK</strong></span> starts the <span><strong class="application">Cluster Configuration Tool</strong></span>, displaying a graphical representation of the configuration (<a href="#fig-software-clusterstart-CA" title="Figure 5.3. The Cluster Configuration Tool">Figure 5.3, “The <span>Cluster Configuration Tool</span>”</a>).
				</p>
                <div class="figure">
                  <a id="fig-software-clusterstart-CA"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="./images/cluconfig-start.png" alt="The Cluster Configuration Tool" />
                      <div class="longdesc">
                        <p>
								The <span><strong class="application">Cluster Configuration Tool</strong></span>.
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 5.3. The <span>Cluster Configuration Tool</span></h6>
                </div>
                <br class="figure-break" />
              </li>
            </ol>
          </div>
          <div class="table">
            <a id="tb-qdisk-params-rhel5-CA"></a>
            <div class="table-contents">
              <table summary="Quorum-Disk Parameters" border="1">
                <colgroup>
                  <col />
                  <col />
                </colgroup>
                <thead>
                  <tr>
                    <th>
							Parameter
						</th>
                    <th>
							Description
						</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
							<span><strong class="guimenu">Use a Quorum Disk</strong></span>
						</td>
                    <td>
							Enables quorum disk. Enables quorum-disk parameters in the <span><strong class="guilabel">New Configuration</strong></span> dialog box.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Interval</strong></span>
						</td>
                    <td>
							The frequency of read/write cycles, in seconds.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">TKO</strong></span>
						</td>
                    <td>
							The number of cycles a node must miss in order to be declared dead.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Votes</strong></span>
						</td>
                    <td>
							The number of votes the quorum daemon advertises to CMAN when it has a high enough score.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Minimum Score</strong></span>
						</td>
                    <td>
							The minimum score for a node to be considered "alive". If omitted or set to 0, the default function, <code class="command">floor((<em class="replaceable"><code>n</code></em>+1)/2)</code>, is used, where <em class="replaceable"><code>n</code></em> is the sum of the heuristics scores. The <span><strong class="guimenu">Minimum Score</strong></span> value must never exceed the sum of the heuristic scores; otherwise, the quorum disk cannot be available.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Device</strong></span>
						</td>
                    <td>
							The storage device the quorum daemon uses. The device must be the same on all nodes.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Label</strong></span>
						</td>
                    <td>
							Specifies the quorum disk label created by the <code class="command">mkqdisk</code> utility. If this field contains an entry, the label overrides the <span><strong class="guimenu">Device</strong></span> field. If this field is used, the quorum daemon reads <code class="filename">/proc/partitions</code> and checks for qdisk signatures on every block device found, comparing the label against the specified label. This is useful in configurations where the quorum device name differs among nodes.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Quorum Disk Heuristics</strong></span>
						</td>
                    <td>
							<table class="simplelist" border="0" summary="Simple list"><tr><td><span><strong class="guimenu">Program</strong></span> — The program used to determine if this heuristic is alive. This can be anything that can be executed by <code class="command">/bin/sh -c</code>. A return value of <span class="returnvalue">0</span> indicates success; anything else indicates failure. This field is required.</td></tr><tr><td><span><strong class="guimenu">Score</strong></span> — The weight of this heuristic. Be careful when determining scores for heuristics. The default score for each heuristic is 1. </td></tr><tr><td><span><strong class="guimenu">Interval</strong></span> — The frequency (in seconds) at which the heuristic is polled. The default interval for every heuristic is 2 seconds.</td></tr></table>
						</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h6>Table 5.1. Quorum-Disk Parameters</h6>
          </div>
          <br class="table-break" />
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-naming-cluster-CA"></a>5.3. Configuring Cluster Properties</h2>
              </div>
            </div>
          </div>
          <p>
			In addition to configuring cluster parameters in the preceding section (<a href="#s1-start-clustertool-CA" title="5.2. Starting the Cluster Configuration Tool">Section 5.2, “Starting the <span><strong class="application">Cluster Configuration Tool</strong></span>”</a>), you can configure the following cluster properties: <span><strong class="guimenu">Cluster Alias</strong></span> (optional), a <span><strong class="guimenu">Config Version</strong></span> (optional), and <span><strong class="guimenu">Fence Daemon Properties</strong></span>. To configure cluster properties, follow these steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At the left frame, click <span><strong class="guimenu">Cluster</strong></span>.
				</p>
              </li>
              <li>
                <p>
					At the bottom of the right frame (labeled <span><strong class="guimenu">Properties</strong></span>), click the <span><strong class="guibutton">Edit Cluster Properties</strong></span> button. Clicking that button causes a <span><strong class="guilabel">Cluster Properties</strong></span> dialog box to be displayed. The <span><strong class="guilabel">Cluster Properties</strong></span> dialog box presents text boxes for <span><strong class="guimenu">Cluster Alias</strong></span>, <span><strong class="guimenu">Config Version</strong></span>, and two <span><strong class="guimenu">Fence Daemon Properties</strong></span> parameters: <span><strong class="guimenu">Post-Join Delay</strong></span> and <span><strong class="guimenu">Post-Fail Delay</strong></span>.
				</p>
              </li>
              <li>
                <p>
					(Optional) At the <span><strong class="guimenu">Cluster Alias</strong></span> text box, specify a cluster alias for the cluster. The default cluster alias is set to the true cluster name provided when the cluster is set up (refer to <a href="#s1-start-clustertool-CA" title="5.2. Starting the Cluster Configuration Tool">Section 5.2, “Starting the <span><strong class="application">Cluster Configuration Tool</strong></span>”</a>). The cluster alias should be descriptive enough to distinguish it from other clusters and systems on your network (for example, <strong class="userinput"><code>nfs_cluster</code></strong> or <strong class="userinput"><code>httpd_cluster</code></strong>). The cluster alias cannot exceed 15 characters.
				</p>
              </li>
              <li>
                <p>
					(Optional) The <span><strong class="guimenu">Config Version</strong></span> value is set to <strong class="userinput"><code>1</code></strong> by default and is automatically incremented each time you save your cluster configuration. However, if you need to set it to another value, you can specify it at the <span><strong class="guimenu">Config Version</strong></span> text box.
				</p>
              </li>
              <li>
                <p>
					Specify the <span><strong class="guimenu">Fence Daemon Properties</strong></span> parameters: <span><strong class="guimenu">Post-Join Delay</strong></span> and <span><strong class="guimenu">Post-Fail Delay</strong></span>.
				</p>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
							The <span><strong class="guimenu">Post-Join Delay</strong></span> parameter is the number of seconds the fence daemon (<code class="command">fenced</code>) waits before fencing a node after the node joins the fence domain. The <span><strong class="guimenu">Post-Join Delay</strong></span> default value is <strong class="userinput"><code>3</code></strong>. A typical setting for <span><strong class="guimenu">Post-Join Delay</strong></span> is between 20 and 30 seconds, but can vary according to cluster and network performance.
						</p>
                    </li>
                    <li>
                      <p>
							The <span><strong class="guimenu">Post-Fail Delay</strong></span> parameter is the number of seconds the fence daemon (<code class="command">fenced</code>) waits before fencing a node (a member of the fence domain) after the node has failed.The <span><strong class="guimenu">Post-Fail Delay</strong></span> default value is <strong class="userinput"><code>0</code></strong>. Its value may be varied to suit cluster and network performance.
						</p>
                    </li>
                  </ol>
                </div>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						For more information about <span><strong class="guimenu">Post-Join Delay</strong></span> and <span><strong class="guimenu">Post-Fail Delay</strong></span>, refer to the <span class="citerefentry"><span class="refentrytitle">fenced</span>(8)</span> man page.
					</p>
                </div>
              </li>
              <li>
                <p>
					Save cluster configuration changes by selecting <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span>.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-fence-devices-CA"></a>5.4. Configuring Fence Devices</h2>
              </div>
            </div>
          </div>
          <p>
			Configuring fence devices for the cluster consists of selecting one or more fence devices and specifying fence-device-dependent parameters (for example, name, IP address, login, and password).
		</p>
          <p>
			To configure fence devices, follow these steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Click <span><strong class="guimenu">Fence Devices</strong></span>. At the bottom of the right frame (labeled <span><strong class="guimenu">Properties</strong></span>), click the <span><strong class="guibutton">Add a Fence Device</strong></span> button. Clicking <span><strong class="guibutton"> Add a Fence Device</strong></span> causes the <span><strong class="guilabel">Fence Device Configuration</strong></span> dialog box to be displayed (refer to <a href="#fig-fence-device-config-dbox-CA" title="Figure 5.4. Fence Device Configuration">Figure 5.4, “Fence Device Configuration”</a>).
				</p>
                <div class="figure">
                  <a id="fig-fence-device-config-dbox-CA"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="./images/fence-device-config-dbox.png" alt="Fence Device Configuration" />
                      <div class="longdesc">
                        <p>
								fence configuration dialog box
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 5.4. Fence Device Configuration</h6>
                </div>
                <br class="figure-break" />
              </li>
              <li>
                <p>
					At the <span><strong class="guilabel">Fence Device Configuration</strong></span> dialog box, click the drop-down box under <span><strong class="guimenu">Add a New Fence Device</strong></span> and select the type of fence device to configure.
				</p>
              </li>
              <li>
                <p>
					Specify the information in the <span><strong class="guilabel">Fence Device Configuration</strong></span> dialog box according to the type of fence device. Refer to <a href="#ap-fence-device-param-CA" title="Appendix B. Fence Device Parameters">Appendix B, <i>Fence Device Parameters</i></a> for more information about fence device parameters.
				</p>
              </li>
              <li>
                <p>
					Click <span><strong class="guibutton">OK</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-add-delete-member-CA"></a>5.5. Adding and Deleting Members</h2>
              </div>
            </div>
          </div>
          <p>
			The procedure to add a member to a cluster varies depending on whether the cluster is a newly-configured cluster or a cluster that is already configured and running. To add a member to a new cluster, refer to <a href="#s2-add-member-new-CA" title="5.5.1. Adding a Member to a Cluster">Section 5.5.1, “Adding a Member to a Cluster”</a>. To add a member to an existing cluster, refer to <a href="#s2-add-member-running-CA" title="5.5.2. Adding a Member to a Running Cluster">Section 5.5.2, “Adding a Member to a Running Cluster”</a>. To delete a member from a cluster, refer to <a href="#s2-delete-member-CA" title="5.5.3. Deleting a Member from a Cluster">Section 5.5.3, “Deleting a Member from a Cluster”</a>.
		</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-add-member-new-CA"></a>5.5.1. Adding a Member to a Cluster</h3>
                </div>
              </div>
            </div>
            <p>
				To add a member to a new cluster, follow these steps:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						Click <span><strong class="guimenu">Cluster Node</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						At the bottom of the right frame (labeled <span><strong class="guimenu">Properties</strong></span>), click the <span><strong class="guibutton">Add a Cluster Node</strong></span> button. Clicking that button causes a <span><strong class="guilabel">Node Properties</strong></span> dialog box to be displayed. The <span><strong class="guilabel">Node Properties</strong></span> dialog box presents text boxes for <span><strong class="guimenu">Cluster Node Name</strong></span> and <span><strong class="guimenu">Quorum Votes</strong></span> (refer to <a href="#fig-soft-newmember-dlm-CA" title="Figure 5.5. Adding a Member to a New Cluster">Figure 5.5, “Adding a Member to a New Cluster”</a>).
					</p>
                  <div class="figure">
                    <a id="fig-soft-newmember-dlm-CA"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="./images/newmember-dlm.png" alt="Adding a Member to a New Cluster" />
                        <div class="longdesc">
                          <p>
									new member dialog
								</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 5.5. Adding a Member to a New Cluster</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
						At the <span><strong class="guimenu">Cluster Node Name</strong></span> text box, specify a node name. The entry can be a name or an IP address of the node on the cluster subnet.
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							Each node must be on the same subnet as the node from which you are running the <span><strong class="application">Cluster Configuration Tool</strong></span> and must be defined either in DNS or in the <code class="filename">/etc/hosts</code> file of each cluster node.
						</p>
                  </div>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							The node on which you are running the <span><strong class="application">Cluster Configuration Tool</strong></span> must be explicitly added as a cluster member; the node is not automatically added to the cluster configuration as a result of running the <span><strong class="application">Cluster Configuration Tool</strong></span>.
						</p>
                  </div>
                </li>
                <li>
                  <p>
						Optionally, at the <span><strong class="guimenu">Quorum Votes</strong></span> text box, you can specify a value; however in most configurations you can leave it blank. Leaving the <span><strong class="guimenu">Quorum Votes</strong></span> text box blank causes the quorum votes value for that node to be set to the default value of <strong class="userinput"><code>1</code></strong>.
					</p>
                </li>
                <li>
                  <p>
						Click <span><strong class="guibutton">OK</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						Configure fencing for the node:
					</p>
                  <div class="orderedlist">
                    <ol>
                      <li>
                        <p>
								Click the node that you added in the previous step.
							</p>
                      </li>
                      <li>
                        <p>
								At the bottom of the right frame (below <span><strong class="guimenu">Properties</strong></span>), click <span><strong class="guibutton">Manage Fencing For This Node</strong></span>. Clicking <span><strong class="guibutton">Manage Fencing For This Node</strong></span> causes the <span><strong class="guilabel">Fence Configuration</strong></span> dialog box to be displayed.
							</p>
                      </li>
                      <li>
                        <p>
								At the <span><strong class="guilabel">Fence Configuration</strong></span> dialog box, bottom of the right frame (below <span><strong class="guimenu">Properties</strong></span>), click <span><strong class="guibutton">Add a New Fence Level</strong></span>. Clicking <span><strong class="guibutton">Add a New Fence Level</strong></span> causes a fence-level element (for example, <span><strong class="guimenu">Fence-Level-1</strong></span>, <span><strong class="guimenu">Fence-Level-2</strong></span>, and so on) to be displayed below the node in the left frame of the <span><strong class="guilabel">Fence Configuration</strong></span> dialog box.
							</p>
                      </li>
                      <li>
                        <p>
								Click the fence-level element.
							</p>
                      </li>
                      <li>
                        <p>
								At the bottom of the right frame (below <span><strong class="guimenu">Properties</strong></span>), click <span><strong class="guibutton">Add a New Fence to this Level</strong></span>. Clicking <span><strong class="guibutton">Add a New Fence to this Level</strong></span> causes the <span><strong class="guilabel">Fence Properties</strong></span> dialog box to be displayed.
							</p>
                      </li>
                      <li>
                        <p>
								At the <span><strong class="guilabel">Fence Properties</strong></span> dialog box, click the <span><strong class="guimenu">Fence Device Type</strong></span> drop-down box and select the fence device for this node. Also, provide additional information required (for example, <span><strong class="guimenu">Port</strong></span> and <span><strong class="guimenu">Switch</strong></span> for an APC Power Device).
							</p>
                      </li>
                      <li>
                        <p>
								At the <span><strong class="guilabel">Fence Properties</strong></span> dialog box, click <span><strong class="guibutton">OK</strong></span>. Clicking <span><strong class="guibutton">OK</strong></span> causes a fence device element to be displayed below the fence-level element.
							</p>
                      </li>
                      <li>
                        <p>
								To create additional fence devices at this fence level, return to step 6d. Otherwise, proceed to the next step.
							</p>
                      </li>
                      <li>
                        <p>
								To create additional fence levels, return to step 6c. Otherwise, proceed to the next step.
							</p>
                      </li>
                      <li>
                        <p>
								If you have configured all the fence levels and fence devices for this node, click <span><strong class="guibutton">Close</strong></span>.
							</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>
						Choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
					</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-add-member-running-CA"></a>5.5.2. Adding a Member to a Running Cluster</h3>
                </div>
              </div>
            </div>
            <p>
				The procedure for adding a member to a running cluster depends on whether the cluster contains only two nodes or more than two nodes. To add a member to a running cluster, follow the steps in one of the following sections according to the number of nodes in the cluster:
			</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
						For clusters with <span class="emphasis"><em>only</em></span> two nodes —
					</p>
                  <p>
						<a href="#s3-add-member-running-2node-CA" title="5.5.2.1. Adding a Member to a Running Cluster That Contains Only Two Nodes">Section 5.5.2.1, “Adding a Member to a Running Cluster That Contains <span class="emphasis"><em>Only</em></span> Two Nodes”</a>
					</p>
                </li>
                <li>
                  <p>
						For clusters with <span class="emphasis"><em>more than</em></span> two nodes —
					</p>
                  <p>
						<a href="#s3-add-member-running-more-than-2nodes-CA" title="5.5.2.2. Adding a Member to a Running Cluster That Contains More Than Two Nodes">Section 5.5.2.2, “Adding a Member to a Running Cluster That Contains <span class="emphasis"><em>More Than</em></span> Two Nodes”</a>
					</p>
                </li>
              </ul>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="s3-add-member-running-2node-CA"></a>5.5.2.1. Adding a Member to a Running Cluster That Contains <span class="emphasis"><em>Only</em></span> Two Nodes</h4>
                  </div>
                </div>
              </div>
              <p>
					To add a member to an existing cluster that is currently in operation, and contains <span class="emphasis"><em>only</em></span> two nodes, follow these steps:
				</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
							Add the node and configure fencing for it as in
						</p>
                    <p>
							<a href="#s2-add-member-new-CA" title="5.5.1. Adding a Member to a Cluster">Section 5.5.1, “Adding a Member to a Cluster”</a>.
						</p>
                  </li>
                  <li>
                    <p>
							Click <span><strong class="guibutton">Send to Cluster</strong></span> to propagate the updated configuration to other running nodes in the cluster.
						</p>
                  </li>
                  <li>
                    <p>
							Use the <code class="command">scp</code> command to send the updated <code class="filename">/etc/cluster/cluster.conf</code> file from one of the existing cluster nodes to the new node.
						</p>
                  </li>
                  <li>
                    <p>
							At the Red Hat Cluster Suite management GUI <span><strong class="application">Cluster Status Tool</strong></span> tab, disable each service listed under <span><strong class="guimenu">Services</strong></span>.
						</p>
                  </li>
                  <li>
                    <p>
							Stop the cluster software on the two running nodes by running the following commands at each node in this order:
						</p>
                    <div class="orderedlist">
                      <ol>
                        <li>
                          <p>
									<code class="command">service rgmanager stop</code>
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service gfs stop</code>, if you are using Red Hat GFS
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service clvmd stop</code>, if CLVM has been used to create clustered volumes
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service cman stop</code>
								</p>
                        </li>
                      </ol>
                    </div>
                  </li>
                  <li>
                    <p>
							Start cluster software on all cluster nodes (including the added one) by running the following commands in this order:
						</p>
                    <div class="orderedlist">
                      <ol>
                        <li>
                          <p>
									<code class="command">service cman start</code>
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service clvmd start</code>, if CLVM has been used to create clustered volumes
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service gfs start</code>, if you are using Red Hat GFS
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service rgmanager start</code>
								</p>
                        </li>
                      </ol>
                    </div>
                  </li>
                  <li>
                    <p>
							Start the Red Hat Cluster Suite management GUI. At the <span><strong class="application">Cluster Configuration Tool</strong></span> tab, verify that the configuration is correct. At the <span><strong class="application">Cluster Status Tool</strong></span> tab verify that the nodes and services are running as expected.
						</p>
                  </li>
                </ol>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="s3-add-member-running-more-than-2nodes-CA"></a>5.5.2.2. Adding a Member to a Running Cluster That Contains <span class="emphasis"><em>More Than</em></span> Two Nodes</h4>
                  </div>
                </div>
              </div>
              <p>
					To add a member to an existing cluster that is currently in operation, and contains <span class="emphasis"><em>more than</em></span> two nodes, follow these steps:
				</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
							Add the node and configure fencing for it as in
						</p>
                    <p>
							<a href="#s2-add-member-new-CA" title="5.5.1. Adding a Member to a Cluster">Section 5.5.1, “Adding a Member to a Cluster”</a>.
						</p>
                  </li>
                  <li>
                    <p>
							Click <span><strong class="guibutton">Send to Cluster</strong></span> to propagate the updated configuration to other running nodes in the cluster.
						</p>
                  </li>
                  <li>
                    <p>
							Use the <code class="command">scp</code> command to send the updated <code class="filename">/etc/cluster/cluster.conf</code> file from one of the existing cluster nodes to the new node.
						</p>
                  </li>
                  <li>
                    <p>
							Start cluster services on the new node by running the following commands in this order:
						</p>
                    <div class="orderedlist">
                      <ol>
                        <li>
                          <p>
									<code class="command"> service cman start</code>
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service clvmd start</code>, if CLVM has been used to create clustered volumes
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service gfs start</code>, if you are using Red Hat GFS
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">service rgmanager start</code>
								</p>
                        </li>
                      </ol>
                    </div>
                  </li>
                  <li>
                    <p>
							Start the Red Hat Cluster Suite management GUI. At the <span><strong class="application">Cluster Configuration Tool</strong></span> tab, verify that the configuration is correct. At the <span><strong class="application">Cluster Status Tool</strong></span> tab verify that the nodes and services are running as expected.
						</p>
                  </li>
                </ol>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-delete-member-CA"></a>5.5.3. Deleting a Member from a Cluster</h3>
                </div>
              </div>
            </div>
            <p>
				To delete a member from an existing cluster that is currently in operation, follow these steps:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At one of the running nodes (not to be removed), run the Red Hat Cluster Suite management GUI. At the <span><strong class="application">Cluster Status Tool</strong></span> tab, under <span><strong class="guimenu">Services</strong></span>, disable or relocate each service that is running on the node to be deleted.
					</p>
                </li>
                <li>
                  <p>
						Stop the cluster software on the node to be deleted by running the following commands at that node in this order:
					</p>
                  <div class="orderedlist">
                    <ol>
                      <li>
                        <p>
								<code class="command">service rgmanager stop</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">service gfs stop</code>, if you are using Red Hat GFS
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">service clvmd stop</code>, if CLVM has been used to create clustered volumes
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command"> service cman stop</code>
							</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>
						At the <span><strong class="application">Cluster Configuration Tool</strong></span> (on one of the running members), delete the member as follows:
					</p>
                  <div class="orderedlist">
                    <ol>
                      <li>
                        <p>
								If necessary, click the triangle icon to expand the <span><strong class="guimenu">Cluster Nodes</strong></span> property.
							</p>
                      </li>
                      <li>
                        <p>
								Select the cluster node to be deleted. At the bottom of the right frame (labeled <span><strong class="guimenu">Properties</strong></span>), click the <span><strong class="guibutton">Delete Node</strong></span> button.
							</p>
                      </li>
                      <li>
                        <p>
								Clicking the <span><strong class="guibutton">Delete Node</strong></span> button causes a warning dialog box to be displayed requesting confirmation of the deletion (<a href="#fig-soft-deletemember-CA" title="Figure 5.6. Confirm Deleting a Member">Figure 5.6, “Confirm Deleting a Member”</a>).
							</p>
                        <div class="figure">
                          <a id="fig-soft-deletemember-CA"></a>
                          <div class="figure-contents">
                            <div class="mediaobject">
                              <img src="./images/deletemember.png" alt="Confirm Deleting a Member" />
                              <div class="longdesc">
                                <p>
											delete member box
										</p>
                              </div>
                            </div>
                          </div>
                          <h6>Figure 5.6. Confirm Deleting a Member</h6>
                        </div>
                        <br class="figure-break" />
                      </li>
                      <li>
                        <p>
								At that dialog box, click <span><strong class="guibutton">Yes</strong></span> to confirm deletion.
							</p>
                      </li>
                      <li>
                        <p>
								Propagate the updated configuration by clicking the <span><strong class="guibutton">Send to Cluster</strong></span> button. (Propagating the updated configuration automatically saves the configuration.)
							</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>
						Stop the cluster software on the remaining running nodes by running the following commands at each node in this order:
					</p>
                  <div class="orderedlist">
                    <ol>
                      <li>
                        <p>
								<code class="command">service rgmanager stop</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">service gfs stop</code>, if you are using Red Hat GFS
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">service clvmd stop</code>, if CLVM has been used to create clustered volumes
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command"> service cman stop</code>
							</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>
						Start cluster software on all remaining cluster nodes by running the following commands in this order:
					</p>
                  <div class="orderedlist">
                    <ol>
                      <li>
                        <p>
								<code class="command"> service cman start</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">service clvmd start</code>, if CLVM has been used to create clustered volumes
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">service gfs start</code>, if you are using Red Hat GFS
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">service rgmanager start</code>
							</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>
						Start the Red Hat Cluster Suite management GUI. At the <span><strong class="application">Cluster Configuration Tool</strong></span> tab, verify that the configuration is correct. At the <span><strong class="application">Cluster Status Tool</strong></span> tab verify that the nodes and services are running as expected.
					</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-failover-domain-CA"></a>5.6. Configuring a Failover Domain</h2>
              </div>
            </div>
          </div>
          <p>
			A failover domain is a named subset of cluster nodes that are eligible to run a cluster service in the event of a node failure. A failover domain can have the following characteristics:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Unrestricted — Allows you to specify that a subset of members are preferred, but that a cluster service assigned to this domain can run on any available member.
				</p>
              </li>
              <li>
                <p>
					Restricted — Allows you to restrict the members that can run a particular cluster service. If none of the members in a restricted failover domain are available, the cluster service cannot be started (either manually or by the cluster software).
				</p>
              </li>
              <li>
                <p>
					Unordered — When a cluster service is assigned to an unordered failover domain, the member on which the cluster service runs is chosen from the available failover domain members with no priority ordering.
				</p>
              </li>
              <li>
                <p>
					Ordered — Allows you to specify a preference order among the members of a failover domain. The member at the top of the list is the most preferred, followed by the second member in the list, and so on.
				</p>
              </li>
            </ul>
          </div>
          <div class="note">
            <h2>Note</h2>
            <p>
				Changing a failover domain configuration has no effect on currently running services.
			</p>
          </div>
          <div class="note">
            <h2>Note</h2>
            <p>
				Failover domains are <span class="emphasis"><em>not</em></span> required for operation.
			</p>
          </div>
          <p>
			By default, failover domains are unrestricted and unordered.
		</p>
          <p>
			In a cluster with several members, using a restricted failover domain can minimize the work to set up the cluster to run a cluster service (such as <code class="filename">httpd</code>), which requires you to set up the configuration identically on all members that run the cluster service). Instead of setting up the entire cluster to run the cluster service, you must set up only the members in the restricted failover domain that you associate with the cluster service.
		</p>
          <div class="tip">
            <h2>Tip</h2>
            <p>
				To configure a preferred member, you can create an unrestricted failover domain comprising only one cluster member. Doing that causes a cluster service to run on that cluster member primarily (the preferred member), but allows the cluster service to fail over to any of the other members.
			</p>
          </div>
          <p>
			The following sections describe adding a failover domain, removing a failover domain, and removing members from a failover domain:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<a href="#s2-config-add-failoverdm-CA" title="5.6.1. Adding a Failover Domain">Section 5.6.1, “Adding a Failover Domain”</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-config-remove-failoverdm-CA" title="5.6.2. Removing a Failover Domain">Section 5.6.2, “Removing a Failover Domain”</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#s2-config-remove-member-failoverdm-CA" title="5.6.3. Removing a Member from a Failover Domain">Section 5.6.3, “Removing a Member from a Failover Domain”</a>
				</p>
              </li>
            </ul>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-config-add-failoverdm-CA"></a>5.6.1. Adding a Failover Domain</h3>
                </div>
              </div>
            </div>
            <p>
				To add a failover domain, follow these steps:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the left frame of the <span><strong class="application">Cluster Configuration Tool</strong></span>, click <span><strong class="guimenu">Failover Domains</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						At the bottom of the right frame (labeled <span><strong class="guimenu">Properties</strong></span>), click the <span><strong class="guibutton">Create a Failover Domain</strong></span> button. Clicking the <span><strong class="guibutton">Create a Failover Domain</strong></span> button causes the <span><strong class="guilabel">Add Failover Domain</strong></span> dialog box to be displayed.
					</p>
                </li>
                <li>
                  <p>
						At the <span><strong class="guilabel">Add Failover Domain</strong></span> dialog box, specify a failover domain name at the <span><strong class="guimenu">Name for new Failover Domain</strong></span> text box and click <span><strong class="guibutton">OK</strong></span>. Clicking <span><strong class="guibutton">OK</strong></span> causes the <span><strong class="guilabel">Failover Domain Configuration</strong></span> dialog box to be displayed (<a href="#fig-soft-failoverdn-CA" title="Figure 5.7. Failover Domain Configuration: Configuring a Failover Domain">Figure 5.7, “<span>Failover Domain Configuration</span>: Configuring a Failover Domain”</a>).
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							The name should be descriptive enough to distinguish its purpose relative to other names used in your cluster.
						</p>
                  </div>
                  <div class="figure">
                    <a id="fig-soft-failoverdn-CA"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="./images/failoverdn.png" alt="Failover Domain Configuration: Configuring a Failover Domain" />
                        <div class="longdesc">
                          <p>
									failover dialog box
								</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 5.7. <span>Failover Domain Configuration</span>: Configuring a Failover Domain</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
						Click the <span><strong class="guimenu">Available Cluster Nodes</strong></span> drop-down box and select the members for this failover domain.
					</p>
                </li>
                <li>
                  <p>
						To restrict failover to members in this failover domain, click (check) the <span><strong class="guimenu">Restrict Failover To This Domains Members</strong></span> checkbox. (With <span><strong class="guimenu">Restrict Failover To This Domains Members</strong></span> checked, services assigned to this failover domain fail over only to nodes in this failover domain.)
					</p>
                </li>
                <li>
                  <p>
						To prioritize the order in which the members in the failover domain assume control of a failed cluster service, follow these steps:
					</p>
                  <div class="orderedlist">
                    <ol>
                      <li>
                        <p>
								Click (check) the <span><strong class="guimenu">Prioritized List</strong></span> checkbox (<a href="#fig-soft-failoverdn-pri-CA" title="Figure 5.8. Failover Domain Configuration: Adjusting Priority">Figure 5.8, “<span>Failover Domain Configuration</span>: Adjusting Priority”</a>). Clicking <span><strong class="guimenu">Prioritized List</strong></span> causes the <span><strong class="guimenu">Priority</strong></span> column to be displayed next to the <span><strong class="guimenu">Member Node</strong></span> column.
							</p>
                        <div class="figure">
                          <a id="fig-soft-failoverdn-pri-CA"></a>
                          <div class="figure-contents">
                            <div class="mediaobject">
                              <img src="./images/failoverdn-pri.png" alt="Failover Domain Configuration: Adjusting Priority" />
                              <div class="longdesc">
                                <p>
											failover dialog box priority
										</p>
                              </div>
                            </div>
                          </div>
                          <h6>Figure 5.8. <span>Failover Domain Configuration</span>: Adjusting Priority</h6>
                        </div>
                        <br class="figure-break" />
                      </li>
                      <li>
                        <p>
								For each node that requires a priority adjustment, click the node listed in the <span><strong class="guimenu">Member Node/Priority</strong></span> columns and adjust priority by clicking one of the <span><strong class="guimenu">Adjust Priority</strong></span> arrows. Priority is indicated by the position in the <span><strong class="guimenu">Member Node</strong></span> column and the value in the <span><strong class="guimenu">Priority</strong></span> column. The node priorities are listed highest to lowest, with the highest priority node at the top of the <span><strong class="guimenu">Member Node</strong></span> column (having the lowest <span><strong class="guimenu">Priority</strong></span> number).
							</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>
						Click <span><strong class="guibutton">Close</strong></span> to create the domain.
					</p>
                </li>
                <li>
                  <p>
						At the <span><strong class="application">Cluster Configuration Tool</strong></span>, perform one of the following actions depending on whether the configuration is for a new cluster or for one that is operational and running:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								New cluster — If this is a new cluster, choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
							</p>
                      </li>
                      <li>
                        <p>
								Running cluster — If this cluster is operational and running, and you want to propagate the change immediately, click the <span><strong class="guibutton">Send to Cluster</strong></span> button. Clicking <span><strong class="guibutton">Send to Cluster</strong></span> automatically saves the configuration change. If you do not want to propagate the change immediately, choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
							</p>
                      </li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-config-remove-failoverdm-CA"></a>5.6.2. Removing a Failover Domain</h3>
                </div>
              </div>
            </div>
            <p>
				To remove a failover domain, follow these steps:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the left frame of the <span><strong class="application">Cluster Configuration Tool</strong></span>, click the failover domain that you want to delete (listed under <span><strong class="guimenu">Failover Domains</strong></span>).
					</p>
                </li>
                <li>
                  <p>
						At the bottom of the right frame (labeled <span><strong class="guimenu">Properties</strong></span>), click the <span><strong class="guibutton">Delete Failover Domain</strong></span> button. Clicking the <span><strong class="guibutton">Delete Failover Domain</strong></span> button causes a warning dialog box do be displayed asking if you want to remove the failover domain. Confirm that the failover domain identified in the warning dialog box is the one you want to delete and click <span><strong class="guibutton">Yes</strong></span>. Clicking <span><strong class="guibutton">Yes</strong></span> causes the failover domain to be removed from the list of failover domains under <span><strong class="guimenu">Failover Domains</strong></span> in the left frame of the <span><strong class="application">Cluster Configuration Tool</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						At the <span><strong class="application">Cluster Configuration Tool</strong></span>, perform one of the following actions depending on whether the configuration is for a new cluster or for one that is operational and running:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								New cluster — If this is a new cluster, choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
							</p>
                      </li>
                      <li>
                        <p>
								Running cluster — If this cluster is operational and running, and you want to propagate the change immediately, click the <span><strong class="guibutton">Send to Cluster</strong></span> button. Clicking <span><strong class="guibutton">Send to Cluster</strong></span> automatically saves the configuration change. If you do not want to propagate the change immediately, choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
							</p>
                      </li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-config-remove-member-failoverdm-CA"></a>5.6.3. Removing a Member from a Failover Domain</h3>
                </div>
              </div>
            </div>
            <p>
				To remove a member from a failover domain, follow these steps:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						At the left frame of the <span><strong class="application">Cluster Configuration Tool</strong></span>, click the failover domain that you want to change (listed under <span><strong class="guimenu">Failover Domains</strong></span>).
					</p>
                </li>
                <li>
                  <p>
						At the bottom of the right frame (labeled <span><strong class="guimenu">Properties</strong></span>), click the <span><strong class="guibutton">Edit Failover Domain Properties</strong></span> button. Clicking the <span><strong class="guibutton">Edit Failover Domain Properties</strong></span> button causes the <span><strong class="guilabel">Failover Domain Configuration</strong></span> dialog box to be displayed (<a href="#fig-soft-failoverdn-CA" title="Figure 5.7. Failover Domain Configuration: Configuring a Failover Domain">Figure 5.7, “<span>Failover Domain Configuration</span>: Configuring a Failover Domain”</a>).
					</p>
                </li>
                <li>
                  <p>
						At the <span><strong class="guilabel">Failover Domain Configuration</strong></span> dialog box, in the <span><strong class="guimenu">Member Node</strong></span> column, click the node name that you want to delete from the failover domain and click the <span><strong class="guibutton">Remove Member from Domain</strong></span> button. Clicking <span><strong class="guibutton">Remove Member from Domain</strong></span> removes the node from the <span><strong class="guimenu">Member Node</strong></span> column. Repeat this step for each node that is to be deleted from the failover domain. (Nodes must be deleted one at a time.)
					</p>
                </li>
                <li>
                  <p>
						When finished, click <span><strong class="guibutton">Close</strong></span>.
					</p>
                </li>
                <li>
                  <p>
						At the <span><strong class="application">Cluster Configuration Tool</strong></span>, perform one of the following actions depending on whether the configuration is for a new cluster or for one that is operational and running:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								New cluster — If this is a new cluster, choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
							</p>
                      </li>
                      <li>
                        <p>
								Running cluster — If this cluster is operational and running, and you want to propagate the change immediately, click the <span><strong class="guibutton">Send to Cluster</strong></span> button. Clicking <span><strong class="guibutton">Send to Cluster</strong></span> automatically saves the configuration change. If you do not want to propagate the change immediately, choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
							</p>
                      </li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-config-service-dev-CA"></a>5.7. Adding Cluster Services</h2>
              </div>
            </div>
          </div>
          <p>
			To specify a device for a cluster service, follow these steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					On the <span><strong class="guimenu">Resources</strong></span> property of the <span><strong class="application">Cluster Configuration Tool</strong></span>, click the <span><strong class="guibutton">Create a Resource</strong></span> button. Clicking the <span><strong class="guibutton">Create a Resource</strong></span> button causes the <span><strong class="guilabel">Resource Configuration</strong></span> dialog box to be displayed.
				</p>
              </li>
              <li>
                <p>
					At the <span><strong class="guilabel">Resource Configuration</strong></span> dialog box, under <span><strong class="guimenu">Select a Resource Type</strong></span>, click the drop-down box. At the drop-down box, select a resource to configure. <a href="#ap-ha-resource-params-CA" title="Appendix C. HA Resource Parameters">Appendix C, <i>HA Resource Parameters</i></a> describes resource paramaters.
				</p>
              </li>
              <li>
                <p>
					When finished, click <span><strong class="guibutton">OK</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the change to the <code class="filename">/etc/cluster/cluster.conf</code> configuration file.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-add-service-CA"></a>5.8. Adding a Cluster Service to the Cluster</h2>
              </div>
            </div>
          </div>
          <a id="id2741686" class="indexterm"></a>
          <a id="id2741699" class="indexterm"></a>
          <p>
			To add a cluster service to the cluster, follow these steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At the left frame, click <span><strong class="guimenu">Services</strong></span>.
				</p>
              </li>
              <li>
                <p>
					At the bottom of the right frame (labeled <span><strong class="guimenu">Properties</strong></span>), click the <span><strong class="guibutton">Create a Service</strong></span> button. Clicking <span><strong class="guibutton">Create a Service</strong></span> causes the <span><strong class="guilabel">Add a Service</strong></span> dialog box to be displayed.
				</p>
              </li>
              <li>
                <p>
					At the <span><strong class="guilabel">Add a Service</strong></span> dialog box, type the name of the service in the <span><strong class="guimenu">Name</strong></span> text box and click <span><strong class="guibutton">OK</strong></span>. Clicking <span><strong class="guibutton">OK</strong></span> causes the <span><strong class="guilabel">Service Management</strong></span> dialog box to be displayed (refer to <a href="#fig-soft-addsvc-CA" title="Figure 5.9. Adding a Cluster Service">Figure 5.9, “Adding a Cluster Service”</a>).
				</p>
                <div class="tip">
                  <h2>Tip</h2>
                  <p>
						Use a descriptive name that clearly distinguishes the service from other services in the cluster.
					</p>
                </div>
                <div class="figure">
                  <a id="fig-soft-addsvc-CA"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="./images/service-management-dbox.png" alt="Adding a Cluster Service" />
                      <div class="longdesc">
                        <p>
								Add Cluster Service dialog box
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 5.9. Adding a Cluster Service</h6>
                </div>
                <br class="figure-break" />
                <p>
				</p>
              </li>
              <li>
                <p>
					If you want to restrict the members on which this cluster service is able to run, choose a failover domain from the <span><strong class="guimenu">Failover Domain</strong></span> drop-down box. (Refer to <a href="#s1-config-failover-domain-CA" title="5.6. Configuring a Failover Domain">Section 5.6, “Configuring a Failover Domain”</a> for instructions on how to configure a failover domain.)
				</p>
              </li>
              <li>
                <p>
					<span><strong class="guimenu">Autostart This Service</strong></span> checkbox — This is checked by default. If <span><strong class="guimenu">Autostart This Service</strong></span> is checked, the service is started automatically when a cluster is started and running. If <span><strong class="guimenu">Autostart This Service</strong></span> is <span class="emphasis"><em>not</em></span> checked, the service must be started manually any time the cluster comes up from stopped state.
				</p>
              </li>
              <li>
                <p>
					<span><strong class="guimenu">Run Exclusive</strong></span> checkbox — This sets a policy wherein the service only runs on nodes that have <span class="emphasis"><em>no other</em></span> services running on them. For example, for a very busy web server that is clustered for high availability, it would would be advisable to keep that service on a node alone with no other services competing for his resources — that is, <span><strong class="guimenu">Run Exclusive</strong></span> checked. On the other hand, services that consume few resources (like NFS and Samba), can run together on the same node without little concern over contention for resources. For those types of services you can leave the <span><strong class="guimenu">Run Exclusive</strong></span> unchecked.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						Circumstances that require enabling <span><strong class="guimenu">Run Exclusive</strong></span> are rare. Enabling <span><strong class="guimenu">Run Exclusive</strong></span> can render a service offline if the node it is running on fails and no other nodes are empty.
					</p>
                </div>
              </li>
              <li>
                <p>
					Select a recovery policy to specify how the resource manager should recover from a service failure. At the upper right of the <span><strong class="guilabel">Service Management</strong></span> dialog box, there are three <span><strong class="guimenu">Recovery Policy</strong></span> options available:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<span><strong class="guimenu">Restart</strong></span> — Restart the service in the node the service is currently located. The default setting is <span><strong class="guimenu">Restart</strong></span>. If the service cannot be restarted in the current node, the service is relocated.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Relocate</strong></span> — Relocate the service before restarting. Do not restart the node where the service is currently located.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guimenu">Disable</strong></span> — Do not restart the service at all.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
					Click the <span><strong class="guibutton">Add a Shared Resource to this service</strong></span> button and choose the a resource listed that you have configured in <a href="#s1-config-service-dev-CA" title="5.7. Adding Cluster Services">Section 5.7, “Adding Cluster Services”</a>.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						If you are adding a Samba-service resource, connect a Samba-service resource directly to the service, <span class="emphasis"><em>not</em></span> to a resource within a service. That is, at the <span><strong class="guilabel">Service Management</strong></span> dialog box, use either <span><strong class="guibutton">Create a new resource for this service</strong></span> or <span><strong class="guibutton">Add a Shared Resource to this service</strong></span>; do <span class="emphasis"><em>not</em></span> use <span><strong class="guibutton">Attach a new Private Resource to the Selection</strong></span> or <span><strong class="guibutton">Attach a Shared Resource to the selection</strong></span>.
					</p>
                </div>
              </li>
              <li>
                <p>
					If needed, you may also create a <em class="firstterm">private</em> resource that you can create that becomes a subordinate resource by clicking on the <span><strong class="guibutton">Attach a new Private Resource to the Selection</strong></span> button. The process is the same as creating a shared resource described in <a href="#s1-config-service-dev-CA" title="5.7. Adding Cluster Services">Section 5.7, “Adding Cluster Services”</a>. The private resource will appear as a child to the shared resource to which you associated with the shared resource. Click the triangle icon next to the shared resource to display any private resources associated.
				</p>
              </li>
              <li>
                <p>
					When finished, click <span><strong class="guibutton">OK</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes to the cluster configuration.
				</p>
              </li>
            </ol>
          </div>
          <div class="note">
            <h2>Note</h2>
            <p>
				To verify the existence of the IP service resource used in a cluster service, you must use the <code class="command">/sbin/ip addr list</code> command on a cluster node. The following output shows the <code class="command">/sbin/ip addr list</code> command executed on a node running a cluster service:
			</p>
            <pre class="screen">
1: lo: &lt;LOOPBACK,UP&gt; mtu 16436 qdisc noqueue 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1356 qdisc pfifo_fast qlen 1000
    link/ether 00:05:5d:9a:d8:91 brd ff:ff:ff:ff:ff:ff
    inet 10.11.4.31/22 brd 10.11.7.255 scope global eth0
    inet6 fe80::205:5dff:fe9a:d891/64 scope link
    inet 10.11.4.240/22 scope global secondary eth0
       valid_lft forever preferred_lft forever
</pre>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-propagate-config-CA"></a>5.9. Propagating The Configuration File: New Cluster</h2>
              </div>
            </div>
          </div>
          <a id="id2763132" class="indexterm"></a>
          <a id="id2763145" class="indexterm"></a>
          <p>
			For newly defined clusters, you must propagate the configuration file to the cluster nodes as follows:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Log in to the node where you created the configuration file.
				</p>
              </li>
              <li>
                <p>
					Using the <code class="command">scp</code> command, copy the <code class="filename">/etc/cluster/cluster.conf</code> file to all nodes in the cluster.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						Propagating the cluster configuration file this way is necessary for the first time a cluster is created. Once a cluster is installed and running, the cluster configuration file is propagated using the Red Hat cluster management GUI <span><strong class="guibutton">Send to Cluster</strong></span> button. For more information about propagating the cluster configuration using the GUI <span><strong class="guibutton">Send to Cluster</strong></span> button, refer to <a href="#s1-admin-modify-CA" title="6.3. Modifying the Cluster Configuration">Section 6.3, “Modifying the Cluster Configuration”</a>.
					</p>
                </div>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-starting-cluster-CA"></a>5.10. Starting the Cluster Software</h2>
              </div>
            </div>
          </div>
          <a id="id2763245" class="indexterm"></a>
          <a id="id2763255" class="indexterm"></a>
          <p>
			After you have propagated the cluster configuration to the cluster nodes you can either reboot each node or start the cluster software on each cluster node by running the following commands at each node in this order:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					<code class="command">service cman start</code>
				</p>
              </li>
              <li>
                <p>
					<code class="command">service clvmd start</code>, if CLVM has been used to create clustered volumes
				</p>
              </li>
              <li>
                <p>
					<code class="command">service gfs start</code>, if you are using Red Hat GFS
				</p>
              </li>
              <li>
                <p>
					<code class="command">service rgmanager start</code>
				</p>
              </li>
              <li>
                <p>
					Start the Red Hat Cluster Suite management GUI. At the <span><strong class="application">Cluster Configuration Tool</strong></span> tab, verify that the configuration is correct. At the <span><strong class="application">Cluster Status Tool</strong></span> tab verify that the nodes and services are running as expected.
				</p>
              </li>
            </ol>
          </div>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ch-mgmt-scc-CA"></a>Chapter 6. Managing Red Hat Cluster With <code class="command">system-config-cluster</code></h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#s1-admin-start-CA">6.1. Starting and Stopping the Cluster Software</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-admin-service-CA">6.2. Managing High-Availability Services</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-admin-modify-CA">6.3. Modifying the Cluster Configuration</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-admin-backup-CA">6.4. Backing Up and Restoring the Cluster Database</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-admin-disable-CA">6.5. Disabling the Cluster Software</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#s1-admin-problems-CA">6.6. Diagnosing and Correcting Problems in a Cluster</a>
              </span>
            </dt>
          </dl>
        </div>
        <a id="id2769896" class="indexterm"></a>
        <a id="id2717220" class="indexterm"></a>
        <p>
		This chapter describes various administrative tasks for managing a Red Hat Cluster and consists of the following sections:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<a href="#s1-admin-start-CA" title="6.1. Starting and Stopping the Cluster Software">Section 6.1, “Starting and Stopping the Cluster Software”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-admin-service-CA" title="6.2. Managing High-Availability Services">Section 6.2, “Managing High-Availability Services”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-admin-backup-CA" title="6.4. Backing Up and Restoring the Cluster Database">Section 6.4, “Backing Up and Restoring the Cluster Database”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-admin-disable-CA" title="6.5. Disabling the Cluster Software">Section 6.5, “Disabling the Cluster Software”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-admin-problems-CA" title="6.6. Diagnosing and Correcting Problems in a Cluster">Section 6.6, “Diagnosing and Correcting Problems in a Cluster”</a>
			</p>
            </li>
          </ul>
        </div>
        <div class="tip">
          <h2>Tip</h2>
          <p>
			While <code class="command">system-config-cluster</code> provides several convenient tools for configuring and managing a Red Hat Cluster, the newer, more comprehensive tool, <span><strong class="application">Conga</strong></span>, provides more convenience and flexibility than <code class="command">system-config-cluster</code>. You may want to consider using <span><strong class="application">Conga</strong></span> instead (refer to <a href="#ch-config-conga-CA" title="Chapter 3. Configuring Red Hat Cluster With Conga">Chapter 3, <i>Configuring Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a> and <a href="#ch-mgmt-conga-CA" title="Chapter 4. Managing Red Hat Cluster With Conga">Chapter 4, <i>Managing Red Hat Cluster With <span><strong class="application">Conga</strong></span></i></a>).
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-start-CA"></a>6.1. Starting and Stopping the Cluster Software</h2>
              </div>
            </div>
          </div>
          <a id="id2793376" class="indexterm"></a>
          <a id="id2796632" class="indexterm"></a>
          <a id="id2746862" class="indexterm"></a>
          <p>
			To start the cluster software on a member, type the following commands in this order:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					<code class="command"> service cman start</code>
				</p>
              </li>
              <li>
                <p>
					<code class="command">service clvmd start</code>, if CLVM has been used to create clustered volumes
				</p>
              </li>
              <li>
                <p>
					<code class="command">service gfs start</code>, if you are using Red Hat GFS
				</p>
              </li>
              <li>
                <p>
					<code class="command">service rgmanager start</code>
				</p>
              </li>
            </ol>
          </div>
          <p>
			To stop the cluster software on a member, type the following commands in this order:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					<code class="command">service rgmanager stop</code>
				</p>
              </li>
              <li>
                <p>
					<code class="command">service gfs stop</code>, if you are using Red Hat GFS
				</p>
              </li>
              <li>
                <p>
					<code class="command">service clvmd stop</code>, if CLVM has been used to create clustered volumes
				</p>
              </li>
              <li>
                <p>
					<code class="command">service cman stop</code>
				</p>
              </li>
            </ol>
          </div>
          <p>
			Stopping the cluster services on a member causes its services to fail over to an active member.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-service-CA"></a>6.2. Managing High-Availability Services</h2>
              </div>
            </div>
          </div>
          <p>
			You can manage cluster services with the <span><strong class="application">Cluster Status Tool</strong></span> (<a href="#fig-intro-clustatus-service-CA" title="Figure 6.1. Cluster Status Tool">Figure 6.1, “<span>Cluster Status Tool</span>”</a>) through the <span><strong class="guimenu">Cluster Management</strong></span> tab in Cluster Administration GUI.
		</p>
          <div class="figure">
            <a id="fig-intro-clustatus-service-CA"></a>
            <div class="figure-contents">
              <div class="mediaobject">
                <img src="./images/clustatus.png" alt="Cluster Status Tool" />
                <div class="longdesc">
                  <p>
						cluster status tool
					</p>
                </div>
              </div>
            </div>
            <h6>Figure 6.1. <span>Cluster Status Tool</span></h6>
          </div>
          <br class="figure-break" />
          <p>
			You can use the <span><strong class="application">Cluster Status Tool</strong></span> to enable, disable, restart, or relocate a high-availability service. The <span><strong class="application">Cluster Status Tool</strong></span> displays the current cluster status in the <span><strong class="guimenu">Services </strong></span> area and automatically updates the status every 10 seconds.
		</p>
          <p>
			To enable a service, you can select the service in the <span><strong class="guimenu">Services</strong></span> area and click <span><strong class="guiicon">Enable</strong></span>. To disable a service, you can select the service in the <span><strong class="guimenu">Services</strong></span> area and click <span><strong class="guiicon">Disable</strong></span>. To restart a service, you can select the service in the <span><strong class="guimenu">Services</strong></span> area and click <span><strong class="guiicon">Restart</strong></span>. To relocate a service from one node to another, you can drag the service to another node and drop the service onto that node. Relocating a service restarts the service on that node. (Relocating a service to its current node — that is, dragging a service to its current node and dropping the service onto that node — restarts the service.)
		</p>
          <a id="id2771622" class="indexterm"></a>
          <a id="id2716332" class="indexterm"></a>
          <a id="id2774080" class="indexterm"></a>
          <p>
			The following tables describe the members and services status information displayed by the <span><strong class="application">Cluster Status Tool</strong></span>.
		</p>
          <div class="table">
            <a id="tb-admin-memberstattool-CA"></a>
            <div class="table-contents">
              <table summary="Members Status" border="1">
                <colgroup>
                  <col />
                  <col />
                </colgroup>
                <thead>
                  <tr>
                    <th>
							Members Status
						</th>
                    <th>
							Description
						</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
							<span><strong class="guimenu">Member</strong></span>
						</td>
                    <td>
							<table class="simplelist" border="0" summary="Simple list"><tr><td>The node is part of the cluster.</td></tr><tr><td>Note: A node can be a member of a cluster; however, the node may be inactive and incapable of running services. For example, if <code class="command">rgmanager</code> is not running on the node, but all other cluster software components are running in the node, the node appears as a <span><strong class="guimenu">Member</strong></span> in the <span><strong class="application">Cluster Status Tool</strong></span>. </td></tr></table>
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Dead</strong></span>
						</td>
                    <td>
							The node is unable to participate as a cluster member. The most basic cluster software is not running on the node.
						</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h6>Table 6.1. Members Status</h6>
          </div>
          <br class="table-break" />
          <div class="table">
            <a id="tb-admin-servicestat-CA"></a>
            <div class="table-contents">
              <table summary="Services Status" border="1">
                <colgroup>
                  <col />
                  <col />
                </colgroup>
                <thead>
                  <tr>
                    <th>
							Services Status
						</th>
                    <th>
							Description
						</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
							<span><strong class="guimenu">Started</strong></span>
						</td>
                    <td>
							The service resources are configured and available on the cluster system that owns the service.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Pending</strong></span>
						</td>
                    <td>
							The service has failed on a member and is pending start on another member.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Disabled</strong></span>
						</td>
                    <td>
							The service has been disabled, and does not have an assigned owner. A disabled service is never restarted automatically by the cluster.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Stopped</strong></span>
						</td>
                    <td>
							The service is not running; it is waiting for a member capable of starting the service. A service remains in the stopped state if autostart is disabled.
						</td>
                  </tr>
                  <tr>
                    <td>
							<span><strong class="guimenu">Failed</strong></span>
						</td>
                    <td>
							The service has failed to start on the cluster and cannot successfully stop the service. A failed service is never restarted automatically by the cluster.
						</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h6>Table 6.2. Services Status</h6>
          </div>
          <br class="table-break" />
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-modify-CA"></a>6.3. Modifying the Cluster Configuration</h2>
              </div>
            </div>
          </div>
          <a id="id2765627" class="indexterm"></a>
          <a id="id2755686" class="indexterm"></a>
          <p>
			To modify the cluster configuration (the cluster configuration file (<code class="filename">/etc/cluster/cluster.conf</code>), use the <span><strong class="application">Cluster Configuration Tool</strong></span>. For more information about using the <span><strong class="application">Cluster Configuration Tool</strong></span>, refer to <a href="#ch-config-scc-CA" title="Chapter 5. Configuring Red Hat Cluster With system-config-cluster">Chapter 5, <i>Configuring Red Hat Cluster With <code class="command">system-config-cluster</code></i></a>.
		</p>
          <div class="warning">
            <h2>Warning</h2>
            <p>
				Do not manually edit the contents of the <code class="filename">/etc/cluster/cluster.conf</code> file without guidance from an authorized Red Hat representative or unless you fully understand the consequences of editing the <code class="filename">/etc/cluster/cluster.conf</code> file manually.
			</p>
          </div>
          <div class="important">
            <h2>Important</h2>
            <p>
				Although the <span><strong class="application">Cluster Configuration Tool</strong></span> provides a <span><strong class="guimenu">Quorum Votes</strong></span> parameter in the <span><strong class="guilabel">Properties</strong></span> dialog box of each cluster member, that parameter is intended <span class="emphasis"><em>only</em></span> for use during initial cluster configuration. Furthermore, it is recommended that you retain the default <span><strong class="guimenu">Quorum Votes</strong></span> value of <strong class="userinput"><code>1</code></strong>. For more information about using the <span><strong class="application">Cluster Configuration Tool</strong></span>, refer to <a href="#ch-config-scc-CA" title="Chapter 5. Configuring Red Hat Cluster With system-config-cluster">Chapter 5, <i>Configuring Red Hat Cluster With <code class="command">system-config-cluster</code></i></a>.
			</p>
          </div>
          <p>
			To edit the cluster configuration file, click the <span><strong class="guimenu">Cluster Configuration</strong></span> tab in the cluster configuration GUI. Clicking the <span><strong class="guimenu">Cluster Configuration</strong></span> tab displays a graphical representation of the cluster configuration. Change the configuration file according the the following steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Make changes to cluster elements (for example, create a service).
				</p>
              </li>
              <li>
                <p>
					Propagate the updated configuration file throughout the cluster by clicking <span><strong class="guibutton">Send to Cluster</strong></span>.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						The <span><strong class="application">Cluster Configuration Tool</strong></span> does not display the <span><strong class="guibutton">Send to Cluster</strong></span> button if the cluster is new and has not been started yet, or if the node from which you are running the <span><strong class="application">Cluster Configuration Tool</strong></span> is not a member of the cluster. If the <span><strong class="guibutton">Send to Cluster</strong></span> button is not displayed, you can still use the <span><strong class="application">Cluster Configuration Tool</strong></span>; however, you cannot propagate the configuration. You can still <span class="emphasis"><em>save</em></span> the configuration file. For information about using the <span><strong class="application">Cluster Configuration Tool</strong></span> for a new cluster configuration, refer to <a href="#ch-config-scc-CA" title="Chapter 5. Configuring Red Hat Cluster With system-config-cluster">Chapter 5, <i>Configuring Red Hat Cluster With <code class="command">system-config-cluster</code></i></a>.
					</p>
                </div>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guibutton">Send to Cluster</strong></span> causes a <span><strong class="guilabel">Warning</strong></span> dialog box to be displayed. Click <span><strong class="guibutton">Yes</strong></span> to save and propagate the configuration.
				</p>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guibutton">Yes</strong></span> causes an <span><strong class="guilabel">Information</strong></span> dialog box to be displayed, confirming that the current configuration has been propagated to the cluster. Click <span><strong class="guibutton">OK</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Click the <span><strong class="guimenu">Cluster Management</strong></span> tab and verify that the changes have been propagated to the cluster members.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-backup-CA"></a>6.4. Backing Up and Restoring the Cluster Database</h2>
              </div>
            </div>
          </div>
          <a id="id2772885" class="indexterm"></a>
          <a id="id2772898" class="indexterm"></a>
          <a id="id2772911" class="indexterm"></a>
          <a id="id2772924" class="indexterm"></a>
          <p>
			The <span><strong class="application">Cluster Configuration Tool</strong></span> automatically retains backup copies of the three most recently used configuration files (besides the currently used configuration file). Retaining the backup copies is useful if the cluster does not function correctly because of misconfiguration and you need to return to a previous working configuration.
		</p>
          <p>
			Each time you save a configuration file, the <span><strong class="application">Cluster Configuration Tool</strong></span> saves backup copies of the three most recently used configuration files as <code class="filename">/etc/cluster/cluster.conf.bak.1</code>, <code class="filename">/etc/cluster/cluster.conf.bak.2</code>, and <code class="filename">/etc/cluster/cluster.conf.bak.3</code>. The backup file <code class="filename">/etc/cluster/cluster.conf.bak.1</code> is the newest backup, <code class="filename">/etc/cluster/cluster.conf.bak.2</code> is the second newest backup, and <code class="filename">/etc/cluster/cluster.conf.bak.3</code> is the third newest backup.
		</p>
          <p>
			If a cluster member becomes inoperable because of misconfiguration, restore the configuration file according to the following steps:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					At the <span><strong class="application">Cluster Configuration Tool</strong></span> tab of the Red Hat Cluster Suite management GUI, click <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Open</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guimenu">File =&gt; Open</strong></span> causes the <span><strong class="guilabel">system-config-cluster</strong></span> dialog box to be displayed.
				</p>
              </li>
              <li>
                <p>
					At the the <span><strong class="guilabel">system-config-cluster</strong></span> dialog box, select a backup file (for example, <code class="filename">/etc/cluster/cluster.conf.bak.1</code>). Verify the file selection in the <span><strong class="guimenu">Selection</strong></span> box and click <span><strong class="guibutton">OK</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Increment the configuration version beyond the current working version number as follows:
				</p>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
							Click <span><strong class="guimenu">Cluster</strong></span> =&gt; <span><strong class="guimenu">Edit Cluster Properties</strong></span>.
						</p>
                    </li>
                    <li>
                      <p>
							At the <span><strong class="guilabel">Cluster Properties</strong></span> dialog box, change the <span><strong class="guimenu">Config Version</strong></span> value and click <span><strong class="guibutton">OK</strong></span>.
						</p>
                    </li>
                  </ol>
                </div>
              </li>
              <li>
                <p>
					Click <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save As</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save As</strong></span> causes the <span><strong class="guilabel">system-config-cluster</strong></span> dialog box to be displayed.
				</p>
              </li>
              <li>
                <p>
					At the the <span><strong class="guilabel">system-config-cluster</strong></span> dialog box, select <code class="filename">/etc/cluster/cluster.conf</code> and click <span><strong class="guibutton">OK</strong></span>. (Verify the file selection in the <span><strong class="guimenu">Selection</strong></span> box.)
				</p>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guibutton">OK</strong></span> causes an <span><strong class="guilabel">Information</strong></span> dialog box to be displayed. At that dialog box, click <span><strong class="guibutton">OK</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Propagate the updated configuration file throughout the cluster by clicking <span><strong class="guibutton">Send to Cluster</strong></span>.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						The <span><strong class="application">Cluster Configuration Tool</strong></span> does not display the <span><strong class="guibutton">Send to Cluster</strong></span> button if the cluster is new and has not been started yet, or if the node from which you are running the <span><strong class="application">Cluster Configuration Tool</strong></span> is not a member of the cluster. If the <span><strong class="guibutton">Send to Cluster</strong></span> button is not displayed, you can still use the <span><strong class="application">Cluster Configuration Tool</strong></span>; however, you cannot propagate the configuration. You can still <span class="emphasis"><em>save</em></span> the configuration file. For information about using the <span><strong class="application">Cluster Configuration Tool</strong></span> for a new cluster configuration, refer to <a href="#ch-config-scc-CA" title="Chapter 5. Configuring Red Hat Cluster With system-config-cluster">Chapter 5, <i>Configuring Red Hat Cluster With <code class="command">system-config-cluster</code></i></a>.
					</p>
                </div>
              </li>
              <li>
                <p>
					Clicking <span><strong class="guibutton">Send to Cluster</strong></span> causes a <span><strong class="guilabel">Warning</strong></span> dialog box to be displayed. Click <span><strong class="guibutton">Yes</strong></span> to propagate the configuration.
				</p>
              </li>
              <li>
                <p>
					Click the <span><strong class="guimenu">Cluster Management</strong></span> tab and verify that the changes have been propagated to the cluster members.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-disable-CA"></a>6.5. Disabling the Cluster Software</h2>
              </div>
            </div>
          </div>
          <a id="id2737396" class="indexterm"></a>
          <a id="id2737409" class="indexterm"></a>
          <a id="id2737422" class="indexterm"></a>
          <p>
			It may become necessary to temporarily disable the cluster software on a cluster member. For example, if a cluster member experiences a hardware failure, you may want to reboot that member, but prevent it from rejoining the cluster to perform maintenance on the system.
		</p>
          <p>
			Use the <code class="command">/sbin/chkconfig</code> command to stop the member from joining the cluster at boot-up as follows:
		</p>
          <pre class="screen">
# <strong class="userinput"><code>chkconfig --level 2345 rgmanager off</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 gfs off</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 clvmd off</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 cman off</code></strong>
</pre>
          <p>
			Once the problems with the disabled cluster member have been resolved, use the following commands to allow the member to rejoin the cluster:
		</p>
          <pre class="screen">
# <strong class="userinput"><code>chkconfig --level 2345 rgmanager on</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 gfs on</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 clvmd on</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 cman on</code></strong>
</pre>
          <p>
			You can then reboot the member for the changes to take effect or run the following commands in the order shown to restart cluster software:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					<code class="command">service cman start</code>
				</p>
              </li>
              <li>
                <p>
					<code class="command">service clvmd start</code>, if CLVM has been used to create clustered volumes
				</p>
              </li>
              <li>
                <p>
					<code class="command">service gfs start</code>, if you are using Red Hat GFS
				</p>
              </li>
              <li>
                <p>
					<code class="command">service rgmanager start</code>
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-admin-problems-CA"></a>6.6. Diagnosing and Correcting Problems in a Cluster</h2>
              </div>
            </div>
          </div>
          <a id="id2740399" class="indexterm"></a>
          <a id="id2740413" class="indexterm"></a>
          <a id="id2740426" class="indexterm"></a>
          <p>
			For information about diagnosing and correcting problems in a cluster, contact an authorized Red Hat support representative.
		</p>
        </div>
      </div>
      <div class="appendix" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ap-httpd-service-CA"></a>Appendix A. Example of Setting Up Apache HTTP Server</h2>
            </div>
          </div>
        </div>
        <a id="id2802225" class="indexterm"></a>
        <a id="id2757765" class="indexterm"></a>
        <a id="id2786052" class="indexterm"></a>
        <p>
		This appendix provides an example of setting up a highly available Apache HTTP Server on a Red Hat Cluster. The example describes how to set up a service to fail over an Apache HTTP Server. Variables in the example apply to this example only; they are provided to assist setting up a service that suits your requirements.
	</p>
        <div class="note">
          <h2>Note</h2>
          <p>
			This example uses the <span><strong class="application">Cluster Configuration Tool</strong></span> (<code class="command">system-config-cluster</code>). You can use comparable <span><strong class="application">Conga</strong></span> functions to make an Apache HTTP Server highly available on a Red Hat Cluster.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-apache-setup-CA"></a>A.1. Apache HTTP Server Setup Overview</h2>
              </div>
            </div>
          </div>
          <p>
			First, configure Apache HTTP Server on all nodes in the cluster. If using a failover domain , assign the service to all cluster nodes configured to run the Apache HTTP Server. Refer to <a href="#s1-config-failover-domain-CA" title="5.6. Configuring a Failover Domain">Section 5.6, “Configuring a Failover Domain”</a> for instructions. The cluster software ensures that only one cluster system runs the Apache HTTP Server at one time. The example configuration consists of installing the <code class="filename">httpd</code> RPM package on all cluster nodes (or on nodes in the failover domain, if used) and configuring a shared GFS shared resource for the Web content.
		</p>
          <p>
			When installing the Apache HTTP Server on the cluster systems, run the following command to ensure that the cluster nodes do not automatically start the service when the system boots:
		</p>
          <pre class="screen">
# <strong class="userinput"><code>chkconfig --del httpd</code></strong>
</pre>
          <p>
			Rather than having the system init scripts spawn the <code class="command">httpd</code> daemon, the cluster infrastructure initializes the service on the active cluster node. This ensures that the corresponding IP address and file system mounts are active on only one cluster node at a time.
		</p>
          <p>
			When adding an <code class="filename">httpd</code> service, a <em class="firstterm">floating</em> IP address must be assigned to the service so that the IP address will transfer from one cluster node to another in the event of failover or service relocation. The cluster infrastructure binds this IP address to the network interface on the cluster system that is currently running the Apache HTTP Server. This IP address ensures that the cluster node running <code class="filename">httpd</code> is transparent to the clients accessing the service.
		</p>
          <p>
			The file systems that contain the Web content cannot be automatically mounted on the shared storage resource when the cluster nodes boot. Instead, the cluster software must mount and unmount the file system as the <code class="filename">httpd</code> service is started and stopped. This prevents the cluster systems from accessing the same data simultaneously, which may result in data corruption. Therefore, do not include the file systems in the <code class="filename">/etc/fstab</code> file.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-apache-sharedfs-CA"></a>A.2. Configuring Shared Storage</h2>
              </div>
            </div>
          </div>
          <p>
			To set up the shared file system resource, perform the following tasks as root on one cluster system:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					On one cluster node, use the interactive <code class="command">parted</code> utility to create a partition to use for the document root directory. Note that it is possible to create multiple document root directories on different disk partitions.
				</p>
              </li>
              <li>
                <p>
					Use the <code class="command">mkfs</code> command to create an ext3 file system on the partition you created in the previous step. Specify the drive letter and the partition number. For example:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>mkfs -t ext3 /dev/sde3</code></strong>
</pre>
              </li>
              <li>
                <p>
					Mount the file system that contains the document root directory. For example:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>mount /dev/sde3 /var/www/html</code></strong>
</pre>
                <p>
					Do not add this mount information to the <code class="filename">/etc/fstab</code> file because only the cluster software can mount and unmount file systems used in a service.
				</p>
              </li>
              <li>
                <p>
					Copy all the required files to the document root directory.
				</p>
              </li>
              <li>
                <p>
					If you have CGI files or other files that must be in different directories or in separate partitions, repeat these steps, as needed.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-apache-inshttpd-CA"></a>A.3. Installing and Configuring the Apache HTTP Server</h2>
              </div>
            </div>
          </div>
          <p>
			The Apache HTTP Server must be installed and configured on all nodes in the assigned failover domain, if used, or in the cluster. The basic server configuration must be the same on all nodes on which it runs for the service to fail over correctly. The following example shows a basic Apache HTTP Server installation that includes no third-party modules or performance tuning.
		</p>
          <p>
			On all node in the cluster (or nodes in the failover domain, if used), install the <code class="filename">httpd</code> RPM package. For example:
		</p>
          <p>
			<code class="command"> rpm -Uvh httpd-<em class="replaceable"><code>&lt;version&gt;</code></em>.<em class="replaceable"><code>&lt;arch&gt;</code></em>.rpm</code>
		</p>
          <a id="id2724781" class="indexterm"></a>
          <a id="id2741119" class="indexterm"></a>
          <a id="id2726868" class="indexterm"></a>
          <p>
			To configure the Apache HTTP Server as a cluster service, perform the following tasks:
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Edit the <code class="filename">/etc/httpd/conf/httpd.conf</code> configuration file and customize the file according to your configuration. For example:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							Specify the directory that contains the HTML files. Also specify this mount point when adding the service to the cluster configuration. It is only required to change this field if the mount point for the web site's content differs from the default setting of <code class="filename">/var/www/html/</code>. For example:
						</p>
                      <pre class="screen">
DocumentRoot "/mnt/httpdservice/html"
</pre>
                    </li>
                    <li>
                      <p>
							Specify a unique IP address to which the service will listen for requests. For example:
						</p>
                      <pre class="screen">
Listen 192.168.1.100:80
</pre>
                      <p>
							This IP address then must be configured as a cluster resource for the service using the <span><strong class="application">Cluster Configuration Tool</strong></span>.
						</p>
                    </li>
                    <li>
                      <p>
							If the script directory resides in a non-standard location, specify the directory that contains the CGI programs. For example:
						</p>
                      <pre class="screen">
ScriptAlias /cgi-bin/ "/mnt/httpdservice/cgi-bin/"
</pre>
                    </li>
                    <li>
                      <p>
							Specify the path that was used in the previous step, and set the access permissions to default to that directory. For example:
						</p>
                      <pre class="screen">
&lt;Directory /mnt/httpdservice/cgi-bin"&gt;
AllowOverride None
Options None 
Order allow,deny 
Allow from all 
&lt;/Directory&gt;
</pre>
                      <p>
							Additional changes may need to be made to tune the Apache HTTP Server or add module functionality. For information on setting up other options, refer to the <em class="citetitle">Red Hat Enterprise Linux System Administration Guide</em> and the <em class="citetitle">Red Hat Enterprise Linux Reference Guide</em>.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
					The standard Apache HTTP Server start script, <code class="filename">/etc/rc.d/init.d/httpd</code> is also used within the cluster framework to start and stop the Apache HTTP Server on the active cluster node. Accordingly, when configuring the service, specify this script by adding it as a <span><strong class="guimenu">Script</strong></span> resource in the <span><strong class="application">Cluster Configuration Tool</strong></span>.
				</p>
              </li>
              <li>
                <p>
					Copy the configuration file over to the other nodes of the cluster (or nodes of the failover domain, if configured).
				</p>
              </li>
            </ol>
          </div>
          <p>
			Before the service is added to the cluster configuration, ensure that the Apache HTTP Server directories are not mounted. Then, on one node, invoke the <span><strong class="application">Cluster Configuration Tool</strong></span> to add the service, as follows. This example assumes a failover domain named <code class="filename">httpd-domain</code> was created for this service.
		</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					Add the init script for the Apache HTTP Server service.
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							Select the <span><strong class="guimenu">Resources</strong></span> tab and click <span><strong class="guibutton">Create a Resource</strong></span>. The <span><strong class="guilabel">Resources Configuration</strong></span> properties dialog box is displayed.
						</p>
                    </li>
                    <li>
                      <p>
							Select <span><strong class="guimenu">Script</strong></span> form the drop down menu.
						</p>
                    </li>
                    <li>
                      <p>
							Enter a <span><strong class="guimenu">Name</strong></span> to be associated with the Apache HTTP Server service.
						</p>
                    </li>
                    <li>
                      <p>
							Specify the path to the Apache HTTP Server init script (for example, <strong class="userinput"><code>/etc/rc.d/init.d/httpd</code></strong>) in the <span><strong class="guimenu">File (with path)</strong></span> field.
						</p>
                    </li>
                    <li>
                      <p>
							Click <span><strong class="guibutton">OK</strong></span>.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
					Add a device for the Apache HTTP Server content files and/or custom scripts.
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							Click <span><strong class="guibutton">Create a Resource</strong></span>.
						</p>
                    </li>
                    <li>
                      <p>
							In the <span><strong class="guilabel">Resource Configuration</strong></span> dialog, select <span><strong class="guimenu">File System</strong></span> from the drop-down menu.
						</p>
                    </li>
                    <li>
                      <p>
							Enter the <span><strong class="guimenu">Name</strong></span> for the resource (for example, <strong class="userinput"><code>httpd-content</code></strong>.
						</p>
                    </li>
                    <li>
                      <p>
							Choose <span><strong class="guimenu">ext3</strong></span> from the <span><strong class="guimenu">File System Type</strong></span> drop-down menu.
						</p>
                    </li>
                    <li>
                      <p>
							Enter the mount point in the <span><strong class="guimenu">Mount Point</strong></span> field (for example, <strong class="userinput"><code>/var/www/html/</code></strong>).
						</p>
                    </li>
                    <li>
                      <p>
							Enter the device special file name in the <span><strong class="guimenu">Device</strong></span> field (for example, <strong class="userinput"><code>/dev/sda3</code></strong>).
						</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
					Add an IP address for the Apache HTTP Server service.
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							Click <span><strong class="guibutton">Create a Resource</strong></span>.
						</p>
                    </li>
                    <li>
                      <p>
							Choose <span><strong class="guimenu">IP Address</strong></span> from the drop-down menu.
						</p>
                    </li>
                    <li>
                      <p>
							Enter the <span><strong class="guimenu">IP Address</strong></span> to be associated with the Apache HTTP Server service.
						</p>
                    </li>
                    <li>
                      <p>
							Make sure that the <span><strong class="guimenu">Monitor Link</strong></span> checkbox is left checked.
						</p>
                    </li>
                    <li>
                      <p>
							Click <span><strong class="guibutton">OK</strong></span>.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
					Click the <span><strong class="guimenu">Services</strong></span> property.
				</p>
              </li>
              <li>
                <p>
					Create the Apache HTTP Server service.
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							Click <span><strong class="guibutton">Create a Service</strong></span>. Type a <span><strong class="guimenu">Name</strong></span> for the service in the <span><strong class="guilabel">Add a Service</strong></span> dialog.
						</p>
                    </li>
                    <li>
                      <p>
							In the <span><strong class="guilabel">Service Management</strong></span> dialog, select a <span><strong class="guimenu">Failover Domain</strong></span> from the drop-down menu or leave it as <span><strong class="guimenu">None</strong></span>.
						</p>
                    </li>
                    <li>
                      <p>
							Click the <span><strong class="guibutton">Add a Shared Resource to this service</strong></span> button. From the available list, choose each resource that you created in the previous steps. Repeat this step until all resources have been added.
						</p>
                    </li>
                    <li>
                      <p>
							Click <span><strong class="guibutton">OK</strong></span>.
						</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
					Choose <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save your changes.
				</p>
              </li>
            </ol>
          </div>
        </div>
      </div>
      <div class="appendix" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ap-fence-device-param-CA"></a>Appendix B. Fence Device Parameters</h2>
            </div>
          </div>
        </div>
        <a id="id2751343" class="indexterm"></a>
        <p>
		This appendix provides tables with parameter descriptions of fence devices.
	</p>
        <div class="note">
          <h2>Note</h2>
          <p>
			Certain fence devices have an optional <span><strong class="guimenu">Password Script</strong></span> parameter. The <span><strong class="guimenu">Password Script</strong></span>parameter allows specifying that a fence-device password is supplied from a script rather than from the <span><strong class="guimenu">Password</strong></span> parameter. Using the <span><strong class="guimenu">Password Script</strong></span> parameter supersedes the <span><strong class="guimenu">Password</strong></span> parameter, allowing passwords to not be visible in the cluster configuration file (<code class="filename">/etc/cluster/cluster.conf</code>).
		</p>
        </div>
        <a id="id2790494" class="indexterm"></a>
        <a id="id2804905" class="indexterm"></a>
        <a id="id2738528" class="indexterm"></a>
        <div class="table">
          <a id="tb-software-fence-apc-CA"></a>
          <div class="table-contents">
            <table summary="APC Power Switch" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the APC device connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.1. APC Power Switch</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-brocade-CA"></a>
          <div class="table-contents">
            <table summary="Brocade Fabric Switch" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the Brocade device connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.2. Brocade Fabric Switch</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-bullpap-CA"></a>
          <div class="table-contents">
            <table summary="Bull PAP (Platform Administration Processor)" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the PAP console.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the PAP console.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the PAP console.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
                <tr>
                  <td>
						Domain
					</td>
                  <td>
						Domain of the Bull PAP system to power cycle
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.3. Bull PAP (Platform Administration Processor)</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-dracmc-CA"></a>
          <div class="table-contents">
            <table summary="Dell DRAC" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						The name assigned to the DRAC.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the DRAC.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the DRAC.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the DRAC.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.4. Dell DRAC</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-egen-CA"></a>
          <div class="table-contents">
            <table summary="Egenera SAN Controller" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the BladeFrame device connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						CServer
					</td>
                  <td>
						The hostname (and optionally the username in the form of <strong class="userinput"><code>username@hostname</code></strong>) assigned to the device. Refer to the <span class="citerefentry"><span class="refentrytitle">fence_egenera</span>(8)</span> man page.
					</td>
                </tr>
                <tr>
                  <td>
						ESH Path (optional)
					</td>
                  <td>
						The path to the esh command on the cserver (default is /opt/pan- mgr/bin/esh)
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.5. Egenera SAN Controller</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-gnbd-CA"></a>
          <div class="table-contents">
            <table summary="GNBD (Global Network Block Device)" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the GNBD device used to fence the cluster. Note that the GFS server must be accessed via GNBD for cluster node fencing support.
					</td>
                </tr>
                <tr>
                  <td>
						Server
					</td>
                  <td>
						The hostname of each GNBD to disable. For multiple hostnames, separate each hostname with a space.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.6. GNBD (Global Network Block Device)</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-hpilo-CA"></a>
          <div class="table-contents">
            <table summary="HP iLO (Integrated Lights Out)" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the server with HP iLO support.
					</td>
                </tr>
                <tr>
                  <td>
						Hostname
					</td>
                  <td>
						The hostname assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.7. HP iLO (Integrated Lights Out)</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-bladectr-CA"></a>
          <div class="table-contents">
            <table summary="IBM Blade Center" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the IBM BladeCenter device connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.8. IBM Blade Center</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-rsaII-CA"></a>
          <div class="table-contents">
            <table summary="IBM Remote Supervisor Adapter II (RSA II)" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the RSA device connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.9. IBM Remote Supervisor Adapter II (RSA II)</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-ipmi-CA"></a>
          <div class="table-contents">
            <table summary="IPMI (Intelligent Platform Management Interface) LAN" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the IPMI port.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name of a user capable of issuing power on/off commands to the given IPMI port.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the IPMI port.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
                <tr>
                  <td>
						Authentication Type
					</td>
                  <td>
						<code class="option">none</code>, <code class="option">password</code>, <code class="option">md2</code>, or <code class="option">md5</code>
					</td>
                </tr>
                <tr>
                  <td>
						Use Lanplus
					</td>
                  <td>
						<code class="option">True</code> or <code class="option">1</code>. If blank, then value is <code class="option">False</code>.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.10. IPMI (Intelligent Platform Management Interface) LAN</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-manual-CA"></a>
          <div class="table-contents">
            <table summary="Manual Fencing" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name to assign the Manual fencing agent. Refer to <code class="command">fence_manual</code>(8) for more information.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.11. Manual Fencing</h6>
        </div>
        <br class="table-break" />
        <div class="warning">
          <h2>Warning</h2>
          <p>
			Manual fencing is <span class="emphasis"><em>not</em></span> supported for production environments.
		</p>
        </div>
        <div class="table">
          <a id="tb-software-fence-mcdata-CA"></a>
          <div class="table-contents">
            <table summary="McData SAN Switch" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the McData device connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.12. McData SAN Switch</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-wti-rps10-CA"></a>
          <div class="table-contents">
            <table summary="RPS-10 Power Switch (two-node clusters only)" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the WTI RPS-10 power switch connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						Device
					</td>
                  <td>
						The device the switch is connected to on the controlling host (for example, <code class="filename">/dev/ttys2</code>).
					</td>
                </tr>
                <tr>
                  <td>
						Port
					</td>
                  <td>
						The switch outlet number.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.13. RPS-10 Power Switch (two-node clusters only)</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-sanbox-CA"></a>
          <div class="table-contents">
            <table summary="QLogic SANBox2 Switch" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the SANBox2 device connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Login
					</td>
                  <td>
						The login name used to access the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.14. QLogic SANBox2 Switch</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-scsi-CA"></a>
          <div class="table-contents">
            <table summary="SCSI Fencing" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Name of the node to be fenced. Refer to <code class="command">fence_scsi</code>(8) for more information.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.15. SCSI Fencing</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-virtual-CA"></a>
          <div class="table-contents">
            <table summary="Virtual Machine Fencing" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Name of the guest to be fenced.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.16. Virtual Machine Fencing</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-vixel-CA"></a>
          <div class="table-contents">
            <table summary="Vixel SAN Switch" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the Vixel switch connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.17. Vixel SAN Switch</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-software-fence-wti-CA"></a>
          <div class="table-contents">
            <table summary="WTI Power Switch" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A name for the WTI power switch connected to the cluster.
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address assigned to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password
					</td>
                  <td>
						The password used to authenticate the connection to the device.
					</td>
                </tr>
                <tr>
                  <td>
						Password Script (optional)
					</td>
                  <td>
						The script that supplies a password for access to the fence device. Using this supersedes the <span><strong class="guimenu">Password</strong></span> parameter.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table B.18. WTI Power Switch</h6>
        </div>
        <br class="table-break" />
      </div>
      <div class="appendix" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ap-ha-resource-params-CA"></a>Appendix C. HA Resource Parameters</h2>
            </div>
          </div>
        </div>
        <a id="id2722987" class="indexterm"></a>
        <p>
		This appendix provides descriptions of HA resource parameters. You can configure the parameters with <span><strong class="application">Luci</strong></span>, <code class="command">system-config-cluster</code>, or by editing <code class="filename">etc/cluster/cluster.conf</code>. <a href="#tb-resource-agent-summary-CA" title="Table C.1. HA Resource Summary">Table C.1, “HA Resource Summary”</a> lists the resources, their corresponding resource agents, and references to other tables containing parameter descriptions. To understand resource agents in more detail you can view them in <code class="filename">/usr/share/cluster</code> of any cluster node.
	</p>
        <div class="table">
          <a id="tb-resource-agent-summary-CA"></a>
          <div class="table-contents">
            <table summary="HA Resource Summary" border="1">
              <colgroup>
                <col />
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Resource
					</th>
                  <th>
						Resource Agent
					</th>
                  <th>
						Reference to Parameter Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Apache
					</td>
                  <td>
						apache.sh
					</td>
                  <td>
						<a href="#tb-apache-server-resource-CA" title="Table C.2. Apache Server">Table C.2, “Apache Server”</a>
					</td>
                </tr>
                <tr>
                  <td>
						File System
					</td>
                  <td>
						fs.sh
					</td>
                  <td>
						<a href="#tb-fs-resource-CA" title="Table C.3. File System">Table C.3, “File System”</a>
					</td>
                </tr>
                <tr>
                  <td>
						GFS File System
					</td>
                  <td>
						clusterfs.sh
					</td>
                  <td>
						<a href="#tb-gfs-resource-CA" title="Table C.4. GFS">Table C.4, “GFS”</a>
					</td>
                </tr>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						ip.sh
					</td>
                  <td>
						<a href="#tb-ipaddress-resource-CA" title="Table C.5. IP Address">Table C.5, “IP Address”</a>
					</td>
                </tr>
                <tr>
                  <td>
						LVM
					</td>
                  <td>
						lvm.sh
					</td>
                  <td>
						<a href="#tb-lvm-resource-CA" title="Table C.6. LVM">Table C.6, “LVM”</a>
					</td>
                </tr>
                <tr>
                  <td>
						MySQL
					</td>
                  <td>
						mysql.sh
					</td>
                  <td>
						<a href="#tb-mysql-resource-CA" title="Table C.7. MySQL®">Table C.7, “<span class="trademark">MySQL</span>®”</a>
					</td>
                </tr>
                <tr>
                  <td>
						NFS Client
					</td>
                  <td>
						nfsclient.sh
					</td>
                  <td>
						<a href="#tb-nfsclient-resource-CA" title="Table C.8. NFS Client">Table C.8, “NFS Client”</a>
					</td>
                </tr>
                <tr>
                  <td>
						NFS Export
					</td>
                  <td>
						nfsexport.sh
					</td>
                  <td>
						<a href="#tb-nfsexport-resource-CA" title="Table C.9. NFS Export">Table C.9, “NFS Export”</a>
					</td>
                </tr>
                <tr>
                  <td>
						NFS Mount
					</td>
                  <td>
						netfs.sh
					</td>
                  <td>
						<a href="#tb-nfsmount-resource-CA" title="Table C.10. NFS Mount">Table C.10, “NFS Mount”</a>
					</td>
                </tr>
                <tr>
                  <td>
						Open LDAP
					</td>
                  <td>
						openldap.sh
					</td>
                  <td>
						<a href="#tb-openldap-resource-CA" title="Table C.11. Open LDAP">Table C.11, “Open LDAP”</a>
					</td>
                </tr>
                <tr>
                  <td>
						Oracle 10g
					</td>
                  <td>
						oracledb.sh
					</td>
                  <td>
						<a href="#tb-oracledb-resource-CA" title="Table C.12. Oracle® 10g">Table C.12, “<span class="trademark">Oracle</span>® 10g”</a>
					</td>
                </tr>
                <tr>
                  <td>
						PostgreSQL 8
					</td>
                  <td>
						postgres-8.sh
					</td>
                  <td>
						<a href="#tb-postgres-8-resource-CA" title="Table C.13. PostgreSQL 8">Table C.13, “PostgreSQL 8”</a>
					</td>
                </tr>
                <tr>
                  <td>
						SAP Database
					</td>
                  <td>
						SAPDatabase
					</td>
                  <td>
						<a href="#tb-sapdatabase-resource-CA" title="Table C.14. SAP® Database">Table C.14, “<span class="trademark">SAP</span>® Database”</a>
					</td>
                </tr>
                <tr>
                  <td>
						SAP Instance
					</td>
                  <td>
						SAPInstance
					</td>
                  <td>
						<a href="#tb-sapinstance-resource-CA" title="Table C.15. SAP® Instance">Table C.15, “<span class="trademark">SAP</span>® Instance”</a>
					</td>
                </tr>
                <tr>
                  <td>
						Samba
					</td>
                  <td>
						smb.sh
					</td>
                  <td>
						<a href="#tb-sambaservice-resource-CA" title="Table C.16. Samba Service">Table C.16, “Samba Service”</a>
					</td>
                </tr>
                <tr>
                  <td>
						Script
					</td>
                  <td>
						script.sh
					</td>
                  <td>
						<a href="#tb-script-resource-CA" title="Table C.17. Script">Table C.17, “Script”</a>
					</td>
                </tr>
                <tr>
                  <td>
						Service
					</td>
                  <td>
						service.sh
					</td>
                  <td>
						<a href="#tb-service-resource-CA" title="Table C.18. Service">Table C.18, “Service”</a>
					</td>
                </tr>
                <tr>
                  <td>
						Sybase ASE
					</td>
                  <td>
						ASEHAagent.sh
					</td>
                  <td>
						<a href="#tb-sybaseasa-resource-CA" title="Table C.19. Sybase® ASE Failover Instance">Table C.19, “<span class="trademark">Sybase</span>® ASE Failover Instance”</a>
					</td>
                </tr>
                <tr>
                  <td>
						Tomcat 5
					</td>
                  <td>
						tomcat-5.sh
					</td>
                  <td>
						<a href="#tb-tomcat-5-resource-CA" title="Table C.20. Tomcat 5">Table C.20, “Tomcat 5”</a>
					</td>
                </tr>
                <tr>
                  <td>
						Virtual Machine
					</td>
                  <td>
						vm.sh
					</td>
                  <td>
						<a href="#tb-vm-resource-CA" title="Table C.21. Virtual Machine">Table C.21, “Virtual Machine”</a>
						<p>
							NOTE: <span><strong class="application">Luci</strong></span> displays this as a virtual service if the host cluster can support virtual machines.
						</p>
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.1. HA Resource Summary</h6>
        </div>
        <br class="table-break" />
        <a id="id2733120" class="indexterm"></a>
        <div class="table">
          <a id="tb-apache-server-resource-CA"></a>
          <div class="table-contents">
            <table summary="Apache Server" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						The name of the Apache Service.
					</td>
                </tr>
                <tr>
                  <td>
						Server Root
					</td>
                  <td>
						The default value is <code class="filename">/etc/httpd</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Config File
					</td>
                  <td>
						Specifies the Apache configuration file. The default valuer is <code class="filename">/etc/httpd/conf</code>.
					</td>
                </tr>
                <tr>
                  <td>
						httpd Options
					</td>
                  <td>
						Other command line options for <code class="command">httpd</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Shutdown Wait (seconds)
					</td>
                  <td>
						Specifies the number of seconds to wait for correct end of service shutdown.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.2. Apache Server</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-fs-resource-CA"></a>
          <div class="table-contents">
            <table summary="File System" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Specifies a name for the file system resource.
					</td>
                </tr>
                <tr>
                  <td>
						File System Type
					</td>
                  <td>
						If not specified, <code class="command">mount</code> tries to determine the file system type.
					</td>
                </tr>
                <tr>
                  <td>
						Mount Point
					</td>
                  <td>
						Path in file system hierarchy to mount this file system.
					</td>
                </tr>
                <tr>
                  <td>
						Device
					</td>
                  <td>
						Specifies the device associated with the file system resource. This can be a block device, file system label, or UUID of a file system.
					</td>
                </tr>
                <tr>
                  <td>
						Options
					</td>
                  <td>
						Mount options; that is, options used when the file system is mounted. These may be file-system specific. Refer to the <em class="citetitle"><code class="command">mount</code>(8)</em> man page for supported mount options.
					</td>
                </tr>
                <tr>
                  <td>
						File System ID
					</td>
                  <td>
						<div class="note"><h2> Note </h2><p>
								<em class="parameter"><code>File System ID</code></em> is used only by NFS services.
							</p></div>
						<p>
							When creating a new file system resource, you can leave this field blank. Leaving the field blank causes a file system ID to be assigned automatically after you commit the parameter during configuration. If you need to assign a file system ID explicitly, specify it in this field.
						</p>
					</td>
                </tr>
                <tr>
                  <td>
						Force unmount
					</td>
                  <td>
						If enabled, forces the file system to unmount. The default setting is <em class="parameter"><code>disabled</code></em>. <em class="parameter"><code>Force Unmount</code></em> kills all processes using the mount point to free up the mount when it tries to unmount.
					</td>
                </tr>
                <tr>
                  <td>
						Reboot host node if unmount fails
					</td>
                  <td>
						If enabled, reboots the node if unmounting this file system fails. The default setting is <em class="parameter"><code>disabled</code></em>.
					</td>
                </tr>
                <tr>
                  <td>
						Check file system before mounting
					</td>
                  <td>
						If enabled, causes <code class="command">fsck</code> to be run on the file system before mounting it. The default setting is <em class="parameter"><code>disabled</code></em>.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.3. File System</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-gfs-resource-CA"></a>
          <div class="table-contents">
            <table summary="GFS" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						The name of the file system resource.
					</td>
                </tr>
                <tr>
                  <td>
						Mount Point
					</td>
                  <td>
						The path to which the file system resource is mounted.
					</td>
                </tr>
                <tr>
                  <td>
						Device
					</td>
                  <td>
						The device file associated with the file system resource.
					</td>
                </tr>
                <tr>
                  <td>
						Options
					</td>
                  <td>
						Mount options.
					</td>
                </tr>
                <tr>
                  <td>
						File System ID
					</td>
                  <td>
						<div class="note"><h2> Note </h2><p>
								<em class="parameter"><code>File System ID</code></em> is used only by NFS services.
							</p></div>
						<p>
							When creating a new GFS resource, you can leave this field blank. Leaving the field blank causes a file system ID to be assigned automatically after you commit the parameter during configuration. If you need to assign a file system ID explicitly, specify it in this field.
						</p>
					</td>
                </tr>
                <tr>
                  <td>
						Force Unmount
					</td>
                  <td>
						If enabled, forces the file system to unmount. The default setting is <em class="parameter"><code>disabled</code></em>. <em class="parameter"><code>Force Unmount</code></em> kills all processes using the mount point to free up the mount when it tries to unmount. With GFS resources, the mount point is <span class="emphasis"><em>not</em></span> unmounted at service tear-down unless <em class="parameter"><code>Force Unmount</code></em> is <span class="emphasis"><em>enabled</em></span>.
					</td>
                </tr>
                <tr>
                  <td>
						Reboot Host Node if Unmount Fails (self fence)
					</td>
                  <td>
						If enabled and unmounting the file system fails, the node will immediately reboot. Generally, this is used in conjunction with force-unmount support, but it is not required.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.4. GFS</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-ipaddress-resource-CA"></a>
          <div class="table-contents">
            <table summary="IP Address" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						IP Address
					</td>
                  <td>
						The IP address for the resource. This is a virtual IP address. IPv4 and IPv6 addresses are supported, as is NIC link monitoring for each IP address.
					</td>
                </tr>
                <tr>
                  <td>
						Monitor Link
					</td>
                  <td>
						Enabling this causes the status check to fail if the link on the NIC to which this IP address is bound is not present.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.5. IP Address</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-lvm-resource-CA"></a>
          <div class="table-contents">
            <table summary="LVM" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						A unique name for this LVM resource.
					</td>
                </tr>
                <tr>
                  <td>
						Volume Group Name
					</td>
                  <td>
						A descriptive name of the volume group being managed.
					</td>
                </tr>
                <tr>
                  <td>
						Logical Volume Name (optional)
					</td>
                  <td>
						Name of the logical volume being managed. This parameter is optional if there is more than one logical volume in the volume group being managed.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.6. LVM</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-mysql-resource-CA"></a>
          <div class="table-contents">
            <table summary="MySQL" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Specifies a name of the MySQL server resource.
					</td>
                </tr>
                <tr>
                  <td>
						Config File
					</td>
                  <td>
						Specifies the configuration file. The default value is <code class="filename">/etc/my.cnf</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Listen Address
					</td>
                  <td>
						Specifies an IP address for MySQL server. If an IP address is not provided, the first IP address from the service is taken.
					</td>
                </tr>
                <tr>
                  <td>
						mysqld Options
					</td>
                  <td>
						Other command line options for <code class="command">httpd</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Shutdown Wait (seconds)
					</td>
                  <td>
						Specifies the number of seconds to wait for correct end of service shutdown.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.7. <span class="trademark">MySQL</span>®</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-nfsclient-resource-CA"></a>
          <div class="table-contents">
            <table summary="NFS Client" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						This is a symbolic name of a client used to reference it in the resource tree. This is <span class="emphasis"><em>not</em></span> the same thing as the <em class="parameter"><code>Target</code></em> option.
					</td>
                </tr>
                <tr>
                  <td>
						Target
					</td>
                  <td>
						This is the server from which you are mounting. It can be specified using a hostname, a wildcard (IP address or hostname based), or a netgroup defining a host or hosts to export to.
					</td>
                </tr>
                <tr>
                  <td>
						Option
					</td>
                  <td>
						Defines a list of options for this client — for example, additional client access rights. For more information, refer to the <em class="citetitle"><code class="command">exports</code> (5)</em> man page, <em class="citetitle">General Options</em>.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.8. NFS Client</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-nfsexport-resource-CA"></a>
          <div class="table-contents">
            <table summary="NFS Export" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						<p>
							Descriptive name of the resource. The NFS Export resource ensures that NFS daemons are running. It is fully reusable; typically, only one NFS Export resource is needed.
						</p>
						<div class="tip"><h2> Tip </h2><p>
								Name the NFS Export resource so it is clearly distinguished from other NFS resources.
							</p></div>
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.9. NFS Export</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-nfsmount-resource-CA"></a>
          <div class="table-contents">
            <table summary="NFS Mount" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Symbolic name for the NFS mount.
					</td>
                </tr>
                <tr>
                  <td>
						Mount Point
					</td>
                  <td>
						Path to which the file system resource is mounted.
					</td>
                </tr>
                <tr>
                  <td>
						Host
					</td>
                  <td>
						NFS server IP address or hostname.
					</td>
                </tr>
                <tr>
                  <td>
						Export Path
					</td>
                  <td>
						NFS Export directory name.
					</td>
                </tr>
                <tr>
                  <td>
						NFS version
					</td>
                  <td>
						<p>
							NFS protocol:
						</p>
						<div class="itemizedlist"><ul><li><p>
									<em class="parameter"><code>NFS3</code></em> — Specifies using NFSv3 protocol. The default setting is <em class="parameter"><code>NFS3</code></em>.
								</p></li><li><p>
									<em class="parameter"><code>NFS4</code></em> — Specifies using NFSv4 protocol.
								</p></li></ul></div>
					</td>
                </tr>
                <tr>
                  <td>
						Options
					</td>
                  <td>
						Mount options. Specifies a list of mount options. If none are specified, the NFS file system is mounted <code class="option">-o sync</code>. For more information, refer to the <em class="citetitle"><code class="command">nfs</code>(5)</em> man page.
					</td>
                </tr>
                <tr>
                  <td>
						Force Unmount
					</td>
                  <td>
						If <em class="parameter"><code>Force Unmount</code></em> is enabled, the cluster kills all processes using this file system when the service is stopped. Killing all processes using the file system frees up the file system. Otherwise, the unmount will fail, and the service will be restarted.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.10. NFS Mount</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-openldap-resource-CA"></a>
          <div class="table-contents">
            <table summary="Open LDAP" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Specifies a service name for logging and other purposes.
					</td>
                </tr>
                <tr>
                  <td>
						Config File
					</td>
                  <td>
						Specifies an absolute path to a configuration file. The default value is <code class="filename">/etc/openldap/slapd.conf</code>.
					</td>
                </tr>
                <tr>
                  <td>
						URL List
					</td>
                  <td>
						The default value is <code class="filename">ldap:///</code>.
					</td>
                </tr>
                <tr>
                  <td>
						<code class="command">slapd</code> Options
					</td>
                  <td>
						Other command line options for <code class="command">slapd</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Shutdown Wait (seconds)
					</td>
                  <td>
						Specifies the number of seconds to wait for correct end of service shutdown.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.11. Open LDAP</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-oracledb-resource-CA"></a>
          <div class="table-contents">
            <table summary="Oracle 10g" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Instance name (SID) of Oracle instance
					</td>
                  <td>
						Instance name.
					</td>
                </tr>
                <tr>
                  <td>
						Oracle user name
					</td>
                  <td>
						This is the user name of the Oracle user that the Oracle AS instance runs as.
					</td>
                </tr>
                <tr>
                  <td>
						Oracle application home directory
					</td>
                  <td>
						This is the Oracle (application, not user) home directory. It is configured when you install Oracle.
					</td>
                </tr>
                <tr>
                  <td>
						Virtual hostname (optional)
					</td>
                  <td>
						Virtual Hostname matching the installation hostname of Oracle 10g. Note that during the start/stop of an oracledb resource, your hostname is changed temporarily to this hostname. Therefore, you should configure an oracledb resource as part of an exclusive service only.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.12. <span class="trademark">Oracle</span>® 10g</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-postgres-8-resource-CA"></a>
          <div class="table-contents">
            <table summary="PostgreSQL 8" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Specifies a service name for logging and other purposes.
					</td>
                </tr>
                <tr>
                  <td>
						Config File
					</td>
                  <td>
						Define absolute path to configuration file. The default value is <code class="filename">/var/lib/pgsql/data/postgresql.conf</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Postmaster User
					</td>
                  <td>
						User who runs the database server because it can't be run by root. The default value is postgres.
					</td>
                </tr>
                <tr>
                  <td>
						Postmaster Options
					</td>
                  <td>
						Other command line options for postmaster.
					</td>
                </tr>
                <tr>
                  <td>
						Shutdown Wait (seconds)
					</td>
                  <td>
						Specifies the number of seconds to wait for correct end of service shutdown.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.13. PostgreSQL 8</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-sapdatabase-resource-CA"></a>
          <div class="table-contents">
            <table summary="SAP Database" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						SAP Database Name
					</td>
                  <td>
						Specifies a unique SAP system identifier. For example, P01.
					</td>
                </tr>
                <tr>
                  <td>
						SAP executable directory
					</td>
                  <td>
						Specifies the fully qualified path to <code class="command">sapstartsrv</code> and <code class="command">sapcontrol</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Database type
					</td>
                  <td>
						Specifies one of the following database types: Oracle, DB6, or ADA.
					</td>
                </tr>
                <tr>
                  <td>
						Oracle TNS listener name
					</td>
                  <td>
						Specifies Oracle TNS listener name.
					</td>
                </tr>
                <tr>
                  <td>
						ABAP stack is not installed, only Java stack is installed
					</td>
                  <td>
						If you do not have an ABAP stack installed in the SAP database, enable this parameter.
					</td>
                </tr>
                <tr>
                  <td>
						J2EE instance bootstrap directory
					</td>
                  <td>
						The fully qualified path the J2EE instance bootstrap directory. For example, <code class="filename">/usr/sap/P01/J00/j2ee/cluster/bootstrap</code>.
					</td>
                </tr>
                <tr>
                  <td>
						J2EE security store path
					</td>
                  <td>
						The fully qualified path the J2EE security store directory. For example, <code class="filename">/usr/sap/P01/SYS/global/security/lib/tools</code>.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.14. <span class="trademark">SAP</span>® Database</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-sapinstance-resource-CA"></a>
          <div class="table-contents">
            <table summary="SAP Instance" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						SAP Instance Name
					</td>
                  <td>
						The fully qualified SAP instance name. For example, P01_DVEBMGS00_sapp01ci.
					</td>
                </tr>
                <tr>
                  <td>
						SAP executable directory
					</td>
                  <td>
						The fully qualified path to <code class="command">sapstartsrv</code> and <code class="command">sapcontrol</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Directory containing the SAP START profile
					</td>
                  <td>
						The fully qualified path to the SAP START profile.
					</td>
                </tr>
                <tr>
                  <td>
						Name of the SAP START profile
					</td>
                  <td>
						Specifies name of the SAP START profile.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.15. <span class="trademark">SAP</span>® Instance</h6>
        </div>
        <br class="table-break" />
        <div class="note">
          <h2>Note</h2>
          <p>
			Regarding <a href="#tb-sambaservice-resource-CA" title="Table C.16. Samba Service">Table C.16, “Samba Service”</a>, when creating or editing a cluster service, connect a Samba-service resource directly to the service, <span class="emphasis"><em>not</em></span> to a resource within a service.
		</p>
        </div>
        <div class="table">
          <a id="tb-sambaservice-resource-CA"></a>
          <div class="table-contents">
            <table summary="Samba Service" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Specifies the name of the Samba server.
					</td>
                </tr>
                <tr>
                  <td>
						Workgroup
					</td>
                  <td>
						Specifies a Windows workgroup name or Windows NT domain of the Samba service.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.16. Samba Service</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-script-resource-CA"></a>
          <div class="table-contents">
            <table summary="Script" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Specifies a name for the custom user script. The script resource allows a standard LSB-compliant init script to be used to start a clustered service.
					</td>
                </tr>
                <tr>
                  <td>
						File (with path)
					</td>
                  <td>
						Enter the path where this custom script is located (for example, <code class="filename">/etc/init.d/<em class="replaceable"><code>userscript</code></em></code>).
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.17. Script</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-service-resource-CA"></a>
          <div class="table-contents">
            <table summary="Service" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Service name
					</td>
                  <td>
						Name of service. This defines a collection of resources, known as a resource group or cluster service.
					</td>
                </tr>
                <tr>
                  <td>
						Automatically start this service
					</td>
                  <td>
						If enabled, this service (or resource group) is started automatically after the cluster forms a quorum. If this parameter is <span class="emphasis"><em>disabled</em></span>, this service is <span class="emphasis"><em>not</em></span> started automatically after the cluster forms a quorum; the service is put into the <em class="parameter"><code>disabled</code></em> state.
					</td>
                </tr>
                <tr>
                  <td>
						Run exclusive
					</td>
                  <td>
						If enabled, this service (resource group) can only be relocated to run on another node exclusively; that is, to run on a node that has no other services running on it. If no nodes are available for a service to run exclusively, the service is not restarted after a failure. Additionally, other services do not automatically relocate to a node running this service as <em class="parameter"><code>Run exclusive</code></em>. You can override this option by manual start or relocate operations.
					</td>
                </tr>
                <tr>
                  <td>
						Failover Domain
					</td>
                  <td>
						Defines lists of cluster members to try in the event that a service fails.
					</td>
                </tr>
                <tr>
                  <td>
						Recovery policy
					</td>
                  <td>
						<p>
							<em class="parameter"><code>Recovery policy</code></em> provides the following options:
						</p>
						<div class="itemizedlist"><ul><li><p>
									<em class="parameter"><code>Disable</code></em> — Disables the resource group if any component fails.
								</p></li><li><p>
									<em class="parameter"><code>Relocate</code></em> — Tries to restart service in another node; that is, it does not try to restart in the current node.
								</p></li><li><p>
									<em class="parameter"><code>Restart</code></em> — Tries to restart failed parts of this service locally (in the current node) before trying to relocate (default) to service to another node.
								</p></li></ul></div>
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.18. Service</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-sybaseasa-resource-CA"></a>
          <div class="table-contents">
            <table summary="Sybase ASE Failover Instance" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Instance Name
					</td>
                  <td>
						Specifies the instance name of the Sybase ASE resource.
					</td>
                </tr>
                <tr>
                  <td>
						ASE server name
					</td>
                  <td>
						The ASE server name that is configured for the HA service.
					</td>
                </tr>
                <tr>
                  <td>
						Sybase home directory
					</td>
                  <td>
						The home directory of Sybase products.
					</td>
                </tr>
                <tr>
                  <td>
						Login file
					</td>
                  <td>
						The full path of login file that contains the login-password pair.
					</td>
                </tr>
                <tr>
                  <td>
						Interfaces file
					</td>
                  <td>
						The full path of the interfaces file that is used to start/access the ASE server.
					</td>
                </tr>
                <tr>
                  <td>
						SYBASE_ASE directory name
					</td>
                  <td>
						The directory name under sybase_home where ASE products are installed.
					</td>
                </tr>
                <tr>
                  <td>
						SYBASE_OCS directory name
					</td>
                  <td>
						The directory name under sybase_home where OCS products are installed. For example, ASE-15_0.
					</td>
                </tr>
                <tr>
                  <td>
						Sybase user
					</td>
                  <td>
						The user who can run ASE server.
					</td>
                </tr>
                <tr>
                  <td>
						Deep probe timeout
					</td>
                  <td>
						The maximum seconds to wait for the response of ASE server before determining that the server had no response while running deep probe.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.19. <span class="trademark">Sybase</span>® ASE Failover Instance</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-tomcat-5-resource-CA"></a>
          <div class="table-contents">
            <table summary="Tomcat 5" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Name
					</td>
                  <td>
						Specifies a service name for logging and other purposes.
					</td>
                </tr>
                <tr>
                  <td>
						Config File
					</td>
                  <td>
						Specifies the absolute path to the configuration file. The default value is <code class="filename">/etc/tomcat5/tomcat5.conf</code>.
					</td>
                </tr>
                <tr>
                  <td>
						Tomcat User
					</td>
                  <td>
						User who runs the Tomcat server. The default value is <span class="emphasis"><em>tomcat</em></span>.
					</td>
                </tr>
                <tr>
                  <td>
						Catalina Options
					</td>
                  <td>
						Other command line options for Catalina.
					</td>
                </tr>
                <tr>
                  <td>
						Catalina Base
					</td>
                  <td>
						Catalina base directory (differs for each service) The default value is /usr/share/tomcat5.
					</td>
                </tr>
                <tr>
                  <td>
						Shutdown Wait (seconds)
					</td>
                  <td>
						Specifies the number of seconds to wait for correct end of service shutdown. The default value is 30.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.20. Tomcat 5</h6>
        </div>
        <br class="table-break" />
        <div class="table">
          <a id="tb-vm-resource-CA"></a>
          <div class="table-contents">
            <table summary="Virtual Machine" border="1">
              <colgroup>
                <col />
                <col />
              </colgroup>
              <thead>
                <tr>
                  <th>
						Field
					</th>
                  <th>
						Description
					</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
						Virtual machine name
					</td>
                  <td>
						Specifies the name of the virtual machine.
					</td>
                </tr>
                <tr>
                  <td>
						Path to VM configuration files
					</td>
                  <td>
						<p>
							A colon-delimited path specification that <code class="command">xm create</code> searches for the virtual machine configuration file. For example: <code class="filename">/etc/xen:/guests/config_files:/var/xen/configs</code>
						</p>
						<div class="important"><h2> Important </h2><p>
								The path should <span class="emphasis"><em>never</em></span> directly point to a virtual machine configuration file.
							</p></div>
					</td>
                </tr>
                <tr>
                  <td>
						Automatically start this virtual machine
					</td>
                  <td>
						If enabled, this virtual machine is started automatically after the cluster forms a quorum. If this parameter is <span class="emphasis"><em>disabled</em></span>, this virtual machine is <span class="emphasis"><em>not</em></span> started automatically after the cluster forms a quorum; the virtual machine is put into the <em class="parameter"><code>disabled</code></em> state.
					</td>
                </tr>
                <tr>
                  <td>
						Run exclusive
					</td>
                  <td>
						If enabled, this virtual machine can only be relocated to run on another node exclusively; that is, to run on a node that has no other virtual machines running on it. If no nodes are available for a virtual machine to run exclusively, the virtual machine is not restarted after a failure. Additionally, other virtual machines do not automatically relocate to a node running this virtual machine as <em class="parameter"><code>Run exclusive</code></em>. You can override this option by manual start or relocate operations.
					</td>
                </tr>
                <tr>
                  <td>
						Failover Domain
					</td>
                  <td>
						Defines lists of cluster members to try in the event that a virtual machine fails.
					</td>
                </tr>
                <tr>
                  <td>
						Recovery policy
					</td>
                  <td>
						<p>
							<em class="parameter"><code>Recovery policy</code></em> provides the following options:
						</p>
						<div class="itemizedlist"><ul><li><p>
									<em class="parameter"><code>Disable</code></em> — Disables the virtual machine if it fails.
								</p></li><li><p>
									<em class="parameter"><code>Relocate</code></em> — Tries to restart the virtual machine in another node; that is, it does not try to restart in the current node.
								</p></li><li><p>
									<em class="parameter"><code>Restart</code></em> — Tries to restart the virtual machine locally (in the current node) before trying to relocate (default) to virtual machine to another node.
								</p></li></ul></div>
					</td>
                </tr>
                <tr>
                  <td>
						Migration type
					</td>
                  <td>
						Specifies a migration type of <em class="parameter"><code>live</code></em> or <em class="parameter"><code>pause</code></em>. The default setting is <em class="parameter"><code>live</code></em>.
					</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h6>Table C.21. Virtual Machine</h6>
        </div>
        <br class="table-break" />
      </div>
      <div class="appendix" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ap-ha-resource-behavior-CA"></a>Appendix D. HA Resource Behavior</h2>
            </div>
          </div>
        </div>
        <a id="id2721469" class="indexterm"></a>
        <p>
		This appendix describes common behavior of HA resources. It is meant to provide ancillary information that may be helpful in configuring HA services. You can configure the parameters with <span><strong class="application">Luci</strong></span>, <code class="command">system-config-cluster</code>, or by editing <code class="filename">etc/cluster/cluster.conf</code>. For descriptions of HA resource parameters, refer to <a href="#ap-ha-resource-params-CA" title="Appendix C. HA Resource Parameters">Appendix C, <i>HA Resource Parameters</i></a>. To understand resource agents in more detail you can view them in <code class="filename">/usr/share/cluster</code> of any cluster node.
	</p>
        <div class="note">
          <h2>Note</h2>
          <p>
			To fully comprehend the information in this appendix, you may require detailed understanding of resource agents and the cluster configuration file, <code class="filename">/etc/cluster/cluster.conf</code>.
		</p>
        </div>
        <p> A cluster service is a group of cluster resources
configured into a coherent entity that provides specialized services
to clients. A cluster service is represented as a resource tree in the
cluster configuration file,
<code class="filename">/etc/cluster/cluster.conf</code> (in each cluster
node). In the cluster configuration file, each resource tree is an XML
representation that specifies each resource, its attributes, and its
relationship among other resources in the resource tree (parent,
child, and sibling relationships).</p>
        <div class="note">
          <h2>Note</h2>
          <p>
	Because a service consists of resources organized into a
	hierarchical tree, a service is sometimes referred to as a
	<em class="firstterm">resource tree</em> or <em class="firstterm">resource
	group</em>. Both phrases are synonymous with
	<span class="emphasis"><em>cluster service</em></span>.
      </p>
        </div>
        <p>
       At the root of each resource tree is a special type of resource
       — a <em class="firstterm">service resource</em>. Other types of resources comprise
       the rest of a service, determining its
       characteristics. Configuring a cluster service consists of
       creating a service resource, creating subordinate cluster
       resources, and organizing them into a coherent entity that
       conforms to hierarchical restrictions of the service.
    </p>
        <p>
		This appendix consists of the following sections:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				<a href="#s1-clust-rsc-desc-CA" title="D.1. Parent, Child, and Sibling Relationships Among Resources">Section D.1, “Parent, Child, and Sibling Relationships Among Resources”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-clust-rsc-sibling-starting-order-CA" title="D.2. Sibling Start Ordering and Resource Child Ordering">Section D.2, “Sibling Start Ordering and Resource Child Ordering”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-clust-rsc-inherit-resc-reuse-CA" title="D.3. Inheritance, the &lt;resources&gt; Block, and Reusing Resources">Section D.3, “Inheritance, the &lt;resources&gt; Block, and Reusing Resources”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-clust-rsc-failure-rec-CA" title="D.4. Failure Recovery and Independent Subtrees">Section D.4, “Failure Recovery and Independent Subtrees”</a>
			</p>
            </li>
            <li>
              <p>
				<a href="#s1-clust-rsc-testing-config-CA" title="D.5. Debugging and Testing Services and Resource Ordering">Section D.5, “Debugging and Testing Services and Resource Ordering”</a>
			</p>
            </li>
          </ul>
        </div>
        <div class="note">
          <h2> Note </h2>
          <p>
			The sections that follow present examples from the cluster configuration file, <code class="filename">/etc/cluster/cluster.conf</code>, for illustration purposes only.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clust-rsc-desc-CA"></a>D.1. Parent, Child, and Sibling Relationships Among Resources</h2>
              </div>
            </div>
          </div>
          <a id="id2789991" class="indexterm"></a>
          <a id="id2718994" class="indexterm"></a>
          <p>
			A cluster service is an integrated entity that runs under the control of <code class="command">rgmanager</code>. All resources in a service run on the same node. From the perspective of <code class="command">rgmanager</code>, a cluster service is one entity that can be started, stopped, or relocated. Within a cluster service, however, the hierarchy of the resources determines the order in which each resource is started and stopped.The hierarchical levels consist of parent, child, and sibling.
		</p>
          <p>
			<a href="#ex-resource-hierarchy-CA" title="Example D.1. Resource Hierarchy of Service foo">Example D.1, “Resource Hierarchy of Service foo”</a> shows a sample resource tree of the service <span class="emphasis"><em>foo</em></span>. In the example, the relationships among the resources are as follows:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<code class="command">fs:myfs</code> (&lt;fs name="myfs" ...&gt;) and <code class="command">ip:10.1.1.2</code> (&lt;ip address="10.1.1.2 .../&gt;) are siblings.
				</p>
              </li>
              <li>
                <p>
					<code class="command">fs:myfs</code> (&lt;fs name="myfs" ...&gt;) is the parent of <code class="command">script:script_child</code> (&lt;script name="script_child"/&gt;).
				</p>
              </li>
              <li>
                <p>
					<code class="command">script:script_child</code> (&lt;script name="script_child"/&gt;) is the child of <code class="command">fs:myfs</code> (&lt;fs name="myfs" ...&gt;).
				</p>
              </li>
            </ul>
          </div>
          <div class="example">
            <a id="ex-resource-hierarchy-CA"></a>
            <div class="example-contents">
              <pre class="screen">
&lt;service name="foo" ...&gt;
    &lt;fs name="myfs" ...&gt;
        &lt;script name="script_child"/&gt;
    &lt;/fs&gt;
    &lt;ip address="10.1.1.2" .../&gt;
&lt;/service&gt;
</pre>
            </div>
            <h6>Example D.1. Resource Hierarchy of Service foo</h6>
          </div>
          <br class="example-break" />
          <p>
			The following rules apply to parent/child relationships in a resource tree:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Parents are started before children.
				</p>
              </li>
              <li>
                <p>
					Children must all stop cleanly before a parent may be stopped.
				</p>
              </li>
              <li>
                <p>
					For a resource to be considered in good health, all its children must be in good health.
				</p>
              </li>
            </ul>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clust-rsc-sibling-starting-order-CA"></a>D.2. Sibling Start Ordering and Resource Child Ordering</h2>
              </div>
            </div>
          </div>
          <p>
			The Service resource determines the start order and the stop order of a child resource according to whether it designates a child-type attribute for a child resource as follows:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Designates child-type attribute (<em class="firstterm">typed</em> child resource) — If the Service resource designates a child-type attribute for a child resource, the child resource is <span class="emphasis"><em>typed</em></span>. The child-type attribute explicitly determines the start and the stop order of the child resource.
				</p>
              </li>
              <li>
                <p>
					<span class="emphasis"><em>Does not designate</em></span> child-type attribute (<em class="firstterm">non-typed</em> child resource) — If the Service resource <span class="emphasis"><em>does not designate</em></span> a child-type attribute for a child resource, the child resource is <span class="emphasis"><em>non-typed</em></span>. The Service resource does not explicitly control the starting order and stopping order of a non-typed child resource. However, a non-typed child resource is started and stopped according to its order in <code class="filename">/etc/cluster.cluster.conf</code> In addition, non-typed child resources are started after all typed child resources have started and are stopped before any typed child resources have stopped.
				</p>
              </li>
            </ul>
          </div>
          <div class="note">
            <h2> Note </h2>
            <p>
				The only resource to implement defined <span class="emphasis"><em>child resource type</em></span> ordering is the Service resource.
			</p>
          </div>
          <p>
			For more information about typed child resource start and stop ordering, refer to <a href="#s2-clust-rsc-typed-resources-CA" title="D.2.1. Typed Child Resource Start and Stop Ordering">Section D.2.1, “Typed Child Resource Start and Stop Ordering”</a>. For more information about non-typed child resource start and stop ordering, refer to <a href="#s2-clust-rsc-non-typed-resources-CA" title="D.2.2. Non-typed Child Resource Start and Stop Ordering">Section D.2.2, “Non-typed Child Resource Start and Stop Ordering”</a>.
		</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-clust-rsc-typed-resources-CA"></a>D.2.1. Typed Child Resource Start and Stop Ordering</h3>
                </div>
              </div>
            </div>
            <p>
				For a typed child resource, the type attribute for the child resource defines the start order and the stop order of each resource type with a number from 1 and 100; one value for start, and one value for stop. The lower the number, the earlier a resource type starts or stops. For example, <a href="#tb-resource-start-stop-CA" title="Table D.1. Child Resource Type Start and Stop Order">Table D.1, “Child Resource Type Start and Stop Order”</a> shows the start and stop values for each resource type; <a href="#ex-resource-start-stop-CA" title="Example D.2. Resource Start and Stop Values: Excerpt from Service Resource Agent, service.sh">Example D.2, “Resource Start and Stop Values: Excerpt from Service Resource Agent, <code class="command">service.sh</code>”</a> shows the start and stop values as they appear in the Service resource agent, <code class="command">service.sh</code>. For the Service resource, all LVM children are started first, followed by all File System children, followed by all Script children, and so forth.
			</p>
            <div class="table">
              <a id="tb-resource-start-stop-CA"></a>
              <div class="table-contents">
                <table summary="Child Resource Type Start and Stop Order" border="1">
                  <colgroup>
                    <col />
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th>
								Resource
							</th>
                      <th>
								Child Type
							</th>
                      <th>
								Start-order Value
							</th>
                      <th>
								Stop-order Value
							</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
								LVM
							</td>
                      <td>
								lvm
							</td>
                      <td>
								1
							</td>
                      <td>
								9
							</td>
                    </tr>
                    <tr>
                      <td>
								File System
							</td>
                      <td>
								fs
							</td>
                      <td>
								2
							</td>
                      <td>
								8
							</td>
                    </tr>
                    <tr>
                      <td>
								GFS File System
							</td>
                      <td>
								clusterfs
							</td>
                      <td>
								3
							</td>
                      <td>
								7
							</td>
                    </tr>
                    <tr>
                      <td>
								NFS Mount
							</td>
                      <td>
								netfs
							</td>
                      <td>
								4
							</td>
                      <td>
								6
							</td>
                    </tr>
                    <tr>
                      <td>
								NFS Export
							</td>
                      <td>
								nfsexport
							</td>
                      <td>
								5
							</td>
                      <td>
								5
							</td>
                    </tr>
                    <tr>
                      <td>
								NFS Client
							</td>
                      <td>
								nfsclient
							</td>
                      <td>
								6
							</td>
                      <td>
								4
							</td>
                    </tr>
                    <tr>
                      <td>
								IP Address
							</td>
                      <td>
								ip
							</td>
                      <td>
								7
							</td>
                      <td>
								2
							</td>
                    </tr>
                    <tr>
                      <td>
								Samba
							</td>
                      <td>
								smb
							</td>
                      <td>
								8
							</td>
                      <td>
								3
							</td>
                    </tr>
                    <tr>
                      <td>
								Script
							</td>
                      <td>
								script
							</td>
                      <td>
								9
							</td>
                      <td>
								1
							</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <h6>Table D.1. Child Resource Type Start and Stop Order</h6>
            </div>
            <br class="table-break" />
            <div class="example">
              <a id="ex-resource-start-stop-CA"></a>
              <div class="example-contents">
                <pre class="screen">
&lt;special tag="rgmanager"&gt;
    &lt;attributes root="1" maxinstances="1"/&gt;
    &lt;child type="lvm" start="1" stop="9"/&gt;
    &lt;child type="fs" start="2" stop="8"/&gt;
    &lt;child type="clusterfs" start="3" stop="7"/&gt;
    &lt;child type="netfs" start="4" stop="6"/&gt;
    &lt;child type="nfsexport" start="5" stop="5"/&gt;
    &lt;child type="nfsclient" start="6" stop="4"/&gt;
    &lt;child type="ip" start="7" stop="2"/&gt;
    &lt;child type="smb" start="8" stop="3"/&gt;
    &lt;child type="script" start="9" stop="1"/&gt;
&lt;/special&gt;
</pre>
              </div>
              <h6>Example D.2. Resource Start and Stop Values: Excerpt from Service Resource Agent, <code class="command">service.sh</code></h6>
            </div>
            <br class="example-break" />
            <p>
				Ordering within a resource type is preserved as it exists in the cluster configuration file, <code class="filename">/etc/cluster/cluster.conf</code>. For example, consider the starting order and stopping order of the typed child resources in <a href="#ex-ordering-within-resource-type-CA" title="Example D.3. Ordering Within a Resource Type">Example D.3, “Ordering Within a Resource Type”</a>.
			</p>
            <div class="example">
              <a id="ex-ordering-within-resource-type-CA"></a>
              <div class="example-contents">
                <pre class="screen">
&lt;service name="foo"&gt;
  &lt;script name="1" .../&gt;
  &lt;lvm name="1" .../&gt;
  &lt;ip address="10.1.1.1" .../&gt;
  &lt;fs name="1" .../&gt;
  &lt;lvm name="2" .../&gt;
&lt;/service&gt;
</pre>
              </div>
              <h6>Example D.3. Ordering Within a Resource Type</h6>
            </div>
            <br class="example-break" />
            <h4><a id="id2722416"></a>Typed Child Resource Starting Order</h4>
            <p>
				In <a href="#ex-ordering-within-resource-type-CA" title="Example D.3. Ordering Within a Resource Type">Example D.3, “Ordering Within a Resource Type”</a>, the resources are started in the following order:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						<code class="command">lvm:1</code> — This is an LVM resource. All LVM resources are started first. <code class="command">lvm:1</code> (<code class="command">&lt;lvm name="1" .../&gt;</code>) is the first LVM resource started among LVM resources because it is the first LVM resource listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">lvm:2</code> — This is an LVM resource. All LVM resources are started first. <code class="command">lvm:2</code> (<code class="command">&lt;lvm name="2" .../&gt;</code>) is started after <code class="command">lvm:1</code> because it is listed after <code class="command">lvm:1</code> in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">fs:1</code> — This is a File System resource. If there were other File System resources in Service <span class="emphasis"><em>foo</em></span>, they would start in the order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">ip:10.1.1.1</code> — This is an IP Address resource. If there were other IP Address resources in Service <span class="emphasis"><em>foo</em></span>, they would start in the order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">script:1</code> — This is a Script resource. If there were other Script resources in Service <span class="emphasis"><em>foo</em></span>, they would start in the order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
              </ol>
            </div>
            <h4><a id="id2795758"></a>Typed Child Resource Stopping Order</h4>
            <p>
				In <a href="#ex-ordering-within-resource-type-CA" title="Example D.3. Ordering Within a Resource Type">Example D.3, “Ordering Within a Resource Type”</a>, the resources are stopped in the following order:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						<code class="command">script:1</code> — This is a Script resource. If there were other Script resources in Service <span class="emphasis"><em>foo</em></span>, they would stop in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">ip:10.1.1.1</code> — This is an IP Address resource. If there were other IP Address resources in Service <span class="emphasis"><em>foo</em></span>, they would stop in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">fs:1</code> — This is a File System resource. If there were other File System resources in Service <span class="emphasis"><em>foo</em></span>, they would stop in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">lvm:2</code> — This is an LVM resource. All LVM resources are stopped last. <code class="command">lvm:2</code> (<code class="command">&lt;lvm name="2" .../&gt;</code>) is stopped before <code class="command">lvm:1</code>; resources within a group of a resource type are stopped in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">lvm:1</code> — This is an LVM resource. All LVM resources are stopped last. <code class="command">lvm:1</code> (<code class="command">&lt;lvm name="1" .../&gt;</code>) is stopped after <code class="command">lvm:2</code>; resources within a group of a resource type are stopped in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="s2-clust-rsc-non-typed-resources-CA"></a>D.2.2. Non-typed Child Resource Start and Stop Ordering</h3>
                </div>
              </div>
            </div>
            <p>
				Additional considerations are required for non-typed child resources. For a non-typed child resource, starting order and stopping order are not explicitly specified by the Service resource. Instead, starting order and stopping order are determined according to the order of the child resource in <code class="filename">/etc/cluster.cluster.conf</code>. Additionally, non-typed child resources are started after all typed child resources and stopped before any typed child resources.
			</p>
            <p>
				For example, consider the starting order and stopping order of the non-typed child resources in <a href="#ex-ordering-non-typed-resource-CA" title="Example D.4. Non-typed and Typed Child Resource in a Service">Example D.4, “Non-typed and Typed Child Resource in a Service”</a>.
			</p>
            <div class="example">
              <a id="ex-ordering-non-typed-resource-CA"></a>
              <div class="example-contents">
                <pre class="screen">
&lt;service name="foo"&gt;
  &lt;script name="1" .../&gt;
  &lt;nontypedresource name="foo"/&gt;
  &lt;lvm name="1" .../&gt;
  &lt;nontypedresourcetwo name="bar"/&gt;
  &lt;ip address="10.1.1.1" .../&gt;
  &lt;fs name="1" .../&gt;
  &lt;lvm name="2" .../&gt;
&lt;/service&gt;
</pre>
              </div>
              <h6>Example D.4. Non-typed and Typed Child Resource in a Service</h6>
            </div>
            <br class="example-break" />
            <h4><a id="id2762587"></a>Non-typed Child Resource Starting Order</h4>
            <p>
				In <a href="#ex-ordering-non-typed-resource-CA" title="Example D.4. Non-typed and Typed Child Resource in a Service">Example D.4, “Non-typed and Typed Child Resource in a Service”</a>, the child resources are started in the following order:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						<code class="command">lvm:1</code> — This is an LVM resource. All LVM resources are started first. <code class="command">lvm:1</code> (<code class="command">&lt;lvm name="1" .../&gt;</code>) is the first LVM resource started among LVM resources because it is the first LVM resource listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">lvm:2</code> — This is an LVM resource. All LVM resources are started first. <code class="command">lvm:2</code> (<code class="command">&lt;lvm name="2" .../&gt;</code>) is started after <code class="command">lvm:1</code> because it is listed after <code class="command">lvm:1</code> in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">fs:1</code> — This is a File System resource. If there were other File System resources in Service <span class="emphasis"><em>foo</em></span>, they would start in the order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">ip:10.1.1.1</code> — This is an IP Address resource. If there were other IP Address resources in Service <span class="emphasis"><em>foo</em></span>, they would start in the order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">script:1</code> — This is a Script resource. If there were other Script resources in Service <span class="emphasis"><em>foo</em></span>, they would start in the order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">nontypedresource:foo</code> — This is a non-typed resource. Because it is a non-typed resource, it is started after the typed resources start. In addition, its order in the Service resource is before the other non-typed resource, <code class="command">nontypedresourcetwo:bar</code>; therefore, it is started before <code class="command">nontypedresourcetwo:bar</code>. (Non-typed resources are started in the order that they appear in the Service resource.)
					</p>
                </li>
                <li>
                  <p>
						<code class="command">nontypedresourcetwo:bar</code> — This is a non-typed resource. Because it is a non-typed resource, it is started after the typed resources start. In addition, its order in the Service resource is after the other non-typed resource, <code class="command">nontypedresource:foo</code>; therefore, it is started after <code class="command">nontypedresource:foo</code>. (Non-typed resources are started in the order that they appear in the Service resource.)
					</p>
                </li>
              </ol>
            </div>
            <p>
			</p>
            <p>
			</p>
            <p>
			</p>
            <p>
			</p>
            <h4><a id="id2716847"></a>Non-typed Child Resource Stopping Order</h4>
            <p>
				In <a href="#ex-ordering-non-typed-resource-CA" title="Example D.4. Non-typed and Typed Child Resource in a Service">Example D.4, “Non-typed and Typed Child Resource in a Service”</a>, the child resources are stopped in the following order:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
						<code class="command">nontypedresourcetwo:bar</code> — This is a non-typed resource. Because it is a non-typed resource, it is stopped before the typed resources are stopped. In addition, its order in the Service resource is after the other non-typed resource, <code class="command">nontypedresource:foo</code>; therefore, it is stopped before <code class="command">nontypedresource:foo</code>. (Non-typed resources are stopped in the reverse order that they appear in the Service resource.)
					</p>
                </li>
                <li>
                  <p>
						<code class="command">nontypedresource:foo</code> — This is a non-typed resource. Because it is a non-typed resource, it is stopped before the typed resources are stopped. In addition, its order in the Service resource is before the other non-typed resource, <code class="command">nontypedresourcetwo:bar</code>; therefore, it is stopped before <code class="command">nontypedresourcetwo:bar</code>. (Non-typed resources are stopped in the reverse order that they appear in the Service resource.)
					</p>
                </li>
                <li>
                  <p>
						<code class="command">script:1</code> — This is a Script resource. If there were other Script resources in Service <span class="emphasis"><em>foo</em></span>, they would stop in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">ip:10.1.1.1</code> — This is an IP Address resource. If there were other IP Address resources in Service <span class="emphasis"><em>foo</em></span>, they would stop in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">fs:1</code> — This is a File System resource. If there were other File System resources in Service <span class="emphasis"><em>foo</em></span>, they would stop in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">lvm:2</code> — This is an LVM resource. All LVM resources are stopped last. <code class="command">lvm:2</code> (<code class="command">&lt;lvm name="2" .../&gt;</code>) is stopped before <code class="command">lvm:1</code>; resources within a group of a resource type are stopped in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
                <li>
                  <p>
						<code class="command">lvm:1</code> — This is an LVM resource. All LVM resources are stopped last. <code class="command">lvm:1</code> (<code class="command">&lt;lvm name="1" .../&gt;</code>) is stopped after <code class="command">lvm:2</code>; resources within a group of a resource type are stopped in the reverse order listed in the Service <span class="emphasis"><em>foo</em></span> portion of <code class="filename">/etc/cluster/cluster.conf</code>.
					</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clust-rsc-inherit-resc-reuse-CA"></a>D.3. Inheritance, the &lt;resources&gt; Block, and Reusing Resources</h2>
              </div>
            </div>
          </div>
          <p>
			Some resources benefit by inheriting values from a parent resource; that is commonly the case in an NFS service. <a href="#ex-nfs-reuse-inheritance-CA" title="Example D.5. NFS Service Set Up for Resource Reuse and Inheritance">Example D.5, “NFS Service Set Up for Resource Reuse and Inheritance”</a> shows a typical NFS service configuration, set up for resource reuse and inheritance.
		</p>
          <div class="example">
            <a id="ex-nfs-reuse-inheritance-CA"></a>
            <div class="example-contents">
              <pre class="screen">
&lt;resources&gt;
  &lt;nfsclient name="bob" target="bob.test.com" options="rw,no_root_squash"/&gt;
  &lt;nfsclient name="jim" target="jim.test.com" options="rw,no_root_squash"/&gt;
  &lt;nfsexport name="exports"/&gt;
&lt;/resources&gt;
&lt;service name="foo"&gt;
  &lt;fs name="1" mountpoint="/mnt/foo" device="/dev/sdb1" fsid="12344"&gt;
    &lt;nfsexport ref="exports"&gt;  &lt;!-- nfsexport's path and fsid
        attributes are inherited from the mountpoint and fsid
	attribute of the parent fs resource --&gt;
    &lt;nfsclient ref="bob"/&gt; &lt;!-- nfsclient's path is inherited
        from the mountpoint and the fsid is added to the options
	string during export --&gt;
    &lt;nfsclient ref="jim"/ &gt;
  &lt;/nfsexport&gt;
&lt;/fs&gt;
&lt;fs name="2" mountpoint="/mnt/bar" device="/dev/sdb2" fsid="12345"&gt;
  &lt;nfsexport ref="exports"&gt;
    &lt;nfsclient ref="bob"/&gt; &lt;!-- Because all of the critical
       data for this resource is either defined in the resources block
       or inherited, we can reference it again! --&gt;
    &lt;nfsclient ref="jim"/&gt;
  &lt;/nfsexport&gt;
&lt;/fs&gt;
&lt;ip address="10.2.13.20"/&gt;
&lt;/service&gt;
</pre>
            </div>
            <h6>Example D.5. NFS Service Set Up for Resource Reuse and Inheritance</h6>
          </div>
          <br class="example-break" />
          <p>
			If the service were flat (that is, with no parent/child relationships), it would need to be configured as follows:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					The service would need four nfsclient resources — one per file system (a total of two for file systems), and one per target machine (a total of two for target machines).
				</p>
              </li>
              <li>
                <p>
					The service would need to specify export path and file system ID to each nfsclient, which introduces chances for errors in the configuration.
				</p>
              </li>
            </ul>
          </div>
          <p>
			In <a href="#ex-nfs-reuse-inheritance-CA" title="Example D.5. NFS Service Set Up for Resource Reuse and Inheritance">Example D.5, “NFS Service Set Up for Resource Reuse and Inheritance”</a> however, the NFS client resources <span class="emphasis"><em>nfsclient:bob</em></span> and <span class="emphasis"><em>nfsclient:jim</em></span> are defined once; likewise, the NFS export resource <span class="emphasis"><em>nfsexport:exports</em></span> is defined once. All the attributes needed by the resources are inherited from parent resources. Because the inherited attributes are dynamic (and do not conflict with one another), it is possible to reuse those resources — which is why they are defined in the resources block. It may not be practical to configure some resources in multiple places. For example, configuring a file system resource in multiple places can result in mounting one file system on two nodes, therefore causing problems.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clust-rsc-failure-rec-CA"></a>D.4. Failure Recovery and Independent Subtrees</h2>
              </div>
            </div>
          </div>
          <p>
			In most enterprise environments, the normal course of action for failure recovery of a service is to restart the entire service if any component in the service fails. For example, in <a href="#ex-failure-recovery-normal-CA" title="Example D.6. Service foo Normal Failure Recovery">Example D.6, “Service <span class="emphasis"><em>foo</em></span> Normal Failure Recovery”</a>, if any of the scripts defined in this service fail, the normal course of action is to restart (or relocate or disable, according to the service recovery policy) the service. However, in some circumstances certain parts of a service may be considered non-critical; it may be necessary to restart only part of the service in place before attempting normal recovery. To accomplish that, you can use the <em class="parameter"><code> __independent_subtree</code></em> attribute. For example, in <a href="#ex-failure-recovery-ind-subtree-CA" title="Example D.7. Service foo Failure Recovery with __independent_subtree Attribute">Example D.7, “Service <span class="emphasis"><em>foo</em></span> Failure Recovery with <em class="parameter"><code>__independent_subtree</code></em> Attribute”</a>, the <em class="parameter"><code> __independent_subtree</code></em> attribute is used to accomplish the following actions:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					If script:script_one fails, restart script:script_two and script:script_one.
				</p>
              </li>
              <li>
                <p>
					If script:script_two fails, restart just script:script_two.
				</p>
              </li>
              <li>
                <p>
					If script:script_three fails, restart script:script_one, script:script_two, and script:script_three.
				</p>
              </li>
              <li>
                <p>
					If script:script_four fails, restart the whole service.
				</p>
              </li>
            </ul>
          </div>
          <div class="example">
            <a id="ex-failure-recovery-normal-CA"></a>
            <div class="example-contents">
              <pre class="screen">
&lt;service name="foo"&gt;
      &lt;script name="script_one" ...&gt;
          &lt;script name="script_two" .../&gt;
      &lt;/script&gt;
      &lt;script name="script_three" .../&gt;
&lt;/service&gt;
</pre>
            </div>
            <h6>Example D.6. Service <span class="emphasis"><em>foo</em></span> Normal Failure Recovery</h6>
          </div>
          <br class="example-break" />
          <div class="example">
            <a id="ex-failure-recovery-ind-subtree-CA"></a>
            <div class="example-contents">
              <pre class="screen">
&lt;service name="foo"&gt;
      &lt;script name="script_one" __independent_subtree="1" ...&gt;
          &lt;script name="script_two" __independent_subtree="1" .../&gt;
          &lt;script name="script_three" .../&gt;
      &lt;/script&gt;
      &lt;script name="script_four" .../&gt;
&lt;/service&gt;
</pre>
            </div>
            <h6>Example D.7. Service <span class="emphasis"><em>foo</em></span> Failure Recovery with <em class="parameter"><code>__independent_subtree</code></em> Attribute</h6>
          </div>
          <br class="example-break" />
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-clust-rsc-testing-config-CA"></a>D.5. Debugging and Testing Services and Resource Ordering</h2>
              </div>
            </div>
          </div>
          <p>
			You can debug and test services and resource ordering with the <code class="command">rg_test</code> utility. <code class="command">rg_test</code> is a command-line utility that is run from a shell or a terminal (it is not available in <span><strong class="application">Conga</strong></span> or <code class="command">system-config-cluster</code>.) <a href="#tb-rgtest-command-summary-CA" title="Table D.2. rg_test Utility Summary">Table D.2, “<code class="command">rg_test</code> Utility Summary”</a> summarizes the actions and syntax for the <code class="command">rg_test</code> utility.
		</p>
          <div class="table">
            <a id="tb-rgtest-command-summary-CA"></a>
            <div class="table-contents">
              <table summary="rg_test Utility Summary" border="1">
                <colgroup>
                  <col />
                  <col />
                </colgroup>
                <thead>
                  <tr>
                    <th>
							Action
						</th>
                    <th>
							Syntax
						</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
							Display the resource rules that <code class="command">rg_test</code> understands.
						</td>
                    <td>
							<code class="command">rg_test rules</code>
						</td>
                  </tr>
                  <tr>
                    <td>
							Test a configuration (and /usr/share/cluster) for errors or redundant resource agents.
						</td>
                    <td>
							<code class="command">rg_test test /etc/cluster/cluster.conf</code>
						</td>
                  </tr>
                  <tr>
                    <td>
							Display the start and stop ordering of a service.
						</td>
                    <td>
							<p>
								Display start order:
							</p>
							<p>
								<code class="command">rg_test noop /etc/cluster/cluster.conf start service <em class="parameter"><code>servicename</code></em></code>
							</p>
							<p>
								Display stop order:
							</p>
							<p>
								<code class="command">rg_test noop /etc/cluster/cluster.conf stop service <em class="parameter"><code>servicename</code></em></code>
							</p>
						</td>
                  </tr>
                  <tr>
                    <td>
							Explicitly start or stop a service. 
							<div class="important"><h2>Important</h2><p>
									Only do this on one node, and always disable the service in rgmanager first.
								</p></div>
						</td>
                    <td>
							<p>
								Start a service:
							</p>
							<p>
								<code class="command">rg_test test /etc/cluster/cluster.conf start service <em class="parameter"><code>servicename</code></em></code>
							</p>
							<p>
								Stop a service:
							</p>
							<p>
								<code class="command"> rg_test test /etc/cluster/cluster.conf stop service <em class="parameter"><code>servicename</code></em></code>
							</p>
						</td>
                  </tr>
                  <tr>
                    <td>
							Calculate and display the resource tree delta between two cluster.conf files.
						</td>
                    <td>
							<p>
								<code class="command">rg_test delta <em class="parameter"><code> cluster.conf file 1</code></em><em class="parameter"><code> cluster.conf file 2</code></em></code>
							</p>
							<p>
								For example:
							</p>
							<p>
								<code class="command">rg_test delta /etc/cluster/cluster.conf.bak /etc/cluster/cluster.conf</code>
							</p>
						</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h6>Table D.2. <code class="command">rg_test</code> Utility Summary</h6>
          </div>
          <br class="table-break" />
        </div>
      </div>
      <div class="appendix" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ap-upgrade-rhel4-to-rhel5-CA"></a>Appendix E. Upgrading A Red Hat Cluster from RHEL 4 to RHEL 5</h2>
            </div>
          </div>
        </div>
        <a id="id2793018" class="indexterm"></a>
        <p>
		This appendix provides a procedure for upgrading a Red Hat cluster from RHEL 4 to RHEL 5. The procedure includes changes required for Red Hat GFS and CLVM, also. For more information about Red Hat GFS, refer to <em class="citetitle">Global File System: Configuration and Administration</em>. For more information about LVM for clusters, refer to <em class="citetitle">LVM Administrator's Guide: Configuration and Administration</em>.
	</p>
        <p>
		Upgrading a Red Hat Cluster from RHEL 4 to RHEL 5 consists of stopping the cluster, converting the configuration from a GULM cluster to a CMAN cluster (only for clusters configured with the GULM cluster manager/lock manager), adding node IDs, and updating RHEL and cluster software. To upgrade a Red Hat Cluster from RHEL 4 to RHEL 5, follow these steps:
	</p>
        <div class="orderedlist">
          <ol>
            <li>
              <p>
				Stop client access to cluster high-availability services.
			</p>
            </li>
            <li>
              <p>
				At each cluster node, stop the cluster software as follows:
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Stop all high-availability services.
					</p>
                  </li>
                  <li>
                    <p>
						Run <code class="command">service rgmanager stop</code>.
					</p>
                  </li>
                  <li>
                    <p>
						Run <code class="command">service gfs stop</code>, if you are using Red Hat GFS.
					</p>
                  </li>
                  <li>
                    <p>
						Run <code class="command">service clvmd stop</code>, if CLVM has been used to create clustered volumes.
					</p>
                    <div class="note">
                      <h2>Note</h2>
                      <p>
							If <code class="command">clvmd</code> is already stopped, an error message is displayed:
						</p>
                      <pre class="screen">
# <strong class="userinput"><code>service clvmd stop</code></strong>
Stopping clvm:                                             [FAILED]
</pre>
                      <p>
							The error message is the expected result when running <code class="command">service clvmd stop</code> after <code class="command">clvmd</code> has stopped.
						</p>
                    </div>
                  </li>
                  <li>
                    <p>
						Depending on the type of cluster manager (either CMAN or GULM), run the following command or commands:
					</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
								CMAN — Run <code class="command">service fenced stop; service cman stop</code>.
							</p>
                        </li>
                        <li>
                          <p>
								GULM — Run <code class="command">service lock_gulmd stop</code>.
							</p>
                        </li>
                      </ul>
                    </div>
                  </li>
                  <li>
                    <p>
						Run <code class="command">service ccsd stop</code>.
					</p>
                  </li>
                </ol>
              </div>
            </li>
            <li>
              <p>
				Disable cluster software from starting during reboot. At each node, run <code class="command">/sbin/chkconfig</code> as follows:
			</p>
              <pre class="screen">
# <strong class="userinput"><code>chkconfig --level 2345 rgmanager off</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 gfs off</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 clvmd off</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 fenced off</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 cman off</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 ccsd off</code></strong>
</pre>
            </li>
            <li>
              <p>
				Edit the cluster configuration file as follows:
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						At a cluster node, open <code class="filename">/etc/cluster/cluster.conf</code> with a text editor.
					</p>
                  </li>
                  <li>
                    <p>
						If your cluster is configured with GULM as the cluster manager, remove the GULM XML elements — <code class="command">&lt;gulm&gt;</code> and <code class="command"> &lt;/gulm&gt;</code> — and their content from <code class="filename">/etc/cluster/cluster.conf</code>. GULM is not supported in Red Hat Cluster Suite for RHEL 5. <a href="#ex-gulm-xml-elements-CA" title="Example E.1. GULM XML Elements and Content">Example E.1, “GULM XML Elements and Content”</a> shows an example of GULM XML elements and content.
					</p>
                  </li>
                  <li>
                    <p>
						At the <code class="command">&lt;clusternode&gt;</code> element for each node in the configuration file, insert <code class="command">nodeid="<em class="replaceable"><code>number</code></em>"</code> after <code class="command">name="<em class="replaceable"><code>name</code></em>"</code>. Use a <em class="replaceable"><code>number</code></em> value unique to that node. Inserting it there follows the format convention of the <code class="command">&lt;clusternode&gt;</code> element in a RHEL 5 cluster configuration file.
					</p>
                    <div class="note">
                      <h2>Note</h2>
                      <p>
							The <code class="command">nodeid</code> parameter is required in Red Hat Cluster Suite for RHEL 5. The parameter is optional in Red Hat Cluster Suite for RHEL 4. If your configuration file already contains <code class="command">nodeid</code> parameters, skip this step.
						</p>
                    </div>
                  </li>
                  <li>
                    <p>
						When you have completed editing <code class="filename">/etc/cluster/cluster.conf</code>, save the file and copy it to the other nodes in the cluster (for example, using the <code class="command">scp</code> command).
					</p>
                  </li>
                </ol>
              </div>
            </li>
            <li>
              <p>
				If your cluster is a GULM cluster and uses Red Hat GFS, change the superblock of each GFS file system to use the DLM locking protocol. Use the <code class="command">gfs_tool</code> command with the <code class="option">sb</code> and <code class="option">proto</code> options, specifying <code class="option">lock_dlm</code> for the DLM locking protocol:
			</p>
              <p>
				<code class="command">gfs_tool sb <em class="replaceable"><code>device</code></em> proto lock_dlm</code>
			</p>
              <p>
				For example:
			</p>
              <pre class="screen">
# <strong class="userinput"><code>gfs_tool sb /dev/my_vg/gfs1 proto lock_dlm</code></strong>
You shouldn't change any of these values if the filesystem is mounted.

Are you sure? [y/n] <strong class="userinput"><code>y</code></strong>

current lock protocol name = "lock_gulm"
new lock protocol name = "lock_dlm"
Done
</pre>
            </li>
            <li>
              <p>
				Update the software in the cluster nodes to RHEL 5 and Red Hat Cluster Suite for RHEL 5. You can acquire and update software through Red Hat Network channels for RHEL 5 and Red Hat Cluster Suite for RHEL 5.
			</p>
            </li>
            <li>
              <p>
				Run <code class="command">lvmconf --enable-cluster</code>.
			</p>
            </li>
            <li>
              <p>
				Enable cluster software to start upon reboot. At each node run <code class="command">/sbin/chkconfig</code> as follows:
			</p>
              <pre class="screen">
# <strong class="userinput"><code>chkconfig --level 2345 rgmanager on</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 gfs on</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 clvmd on</code></strong>
# <strong class="userinput"><code>chkconfig --level 2345 cman on</code></strong>
</pre>
            </li>
            <li>
              <p>
				Reboot the nodes. The RHEL 5 cluster software should start while the nodes reboot. Upon verification that the Red Hat cluster is running, the upgrade is complete.
			</p>
            </li>
          </ol>
        </div>
        <div class="example">
          <a id="ex-gulm-xml-elements-CA"></a>
          <div class="example-contents">
            <pre class="screen">
&lt;gulm&gt;
  &lt;lockserver name="gulmserver1"/&gt;
  &lt;lockserver name="gulmserver2"/&gt;
  &lt;lockserver name="gulmserver3"/&gt;
&lt;/gulm&gt;
</pre>
          </div>
          <h6>Example E.1. GULM XML Elements and Content</h6>
        </div>
        <br class="example-break" />
      </div>
      <div class="index">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="id2653444"></a>Index</h2>
            </div>
          </div>
        </div>
        <div class="index">
          <div class="indexdiv">
            <h3>A</h3>
            <dl>
              <dt>ACPI</dt>
              <dd>
                <dl>
                  <dt>configuring, <a href="#s1-acpi-CA">Configuring ACPI For Use with Integrated Fence Devices</a></dt>
                </dl>
              </dd>
              <dt>Apache HTTP Server</dt>
              <dd>
                <dl>
                  <dt>httpd.conf, <a href="#s1-apache-inshttpd-CA">Installing and Configuring the Apache HTTP Server</a></dt>
                  <dt>setting up service, <a href="#ap-httpd-service-CA">Example of Setting Up Apache HTTP Server</a></dt>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>B</h3>
            <dl>
              <dt>behavior, HA resources, <a href="#ap-ha-resource-behavior-CA">HA Resource Behavior</a></dt>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>C</h3>
            <dl>
              <dt>cluster</dt>
              <dd>
                <dl>
                  <dt>administration, <a href="#ch-before-config-CA">Before Configuring a Red Hat Cluster</a>, <a href="#ch-mgmt-conga-CA">Managing Red Hat Cluster With Conga</a>, <a href="#ch-mgmt-scc-CA">Managing Red Hat Cluster With system-config-cluster</a></dt>
                  <dt>diagnosing and correcting problems, <a href="#s1-admin-problems-conga-CA">Diagnosing and Correcting Problems in a Cluster</a>, <a href="#s1-admin-problems-CA">Diagnosing and Correcting Problems in a Cluster</a></dt>
                  <dt>disabling the cluster software, <a href="#s1-admin-disable-CA">Disabling the Cluster Software</a></dt>
                  <dt>displaying status, <a href="#s2-admin-overview-CA">Cluster Status Tool</a>, <a href="#s1-admin-service-CA">Managing High-Availability Services</a></dt>
                  <dt>managing node, <a href="#s1-admin-manage-nodes-conga-CA">Managing Cluster Nodes</a></dt>
                  <dt>starting, <a href="#s1-starting-cluster-CA">Starting the Cluster Software</a></dt>
                  <dt>starting, stopping, restarting, and deleting, <a href="#s1-admin-start-conga-CA">Starting, Stopping, and Deleting Clusters</a></dt>
                </dl>
              </dd>
              <dt>cluster administration, <a href="#ch-before-config-CA">Before Configuring a Red Hat Cluster</a>, <a href="#ch-mgmt-conga-CA">Managing Red Hat Cluster With Conga</a>, <a href="#ch-mgmt-scc-CA">Managing Red Hat Cluster With system-config-cluster</a></dt>
              <dd>
                <dl>
                  <dt>backing up the cluster database, <a href="#s1-admin-backup-CA">Backing Up and Restoring the Cluster Database</a></dt>
                  <dt>compatible hardware, <a href="#s1-hw-compat-CA">Compatible Hardware</a></dt>
                  <dt>configuring ACPI, <a href="#s1-acpi-CA">Configuring ACPI For Use with Integrated Fence Devices</a></dt>
                  <dt>configuring iptables, <a href="#s1-iptables-CA">Enabling IP Ports</a></dt>
                  <dt>configuring max_luns, <a href="#s1-max-luns-CA">Configuring max_luns</a></dt>
                  <dt>Conga considerations, <a href="#s1-conga-considerations-CA">Considerations for Using Conga</a></dt>
                  <dt>considerations for using qdisk, <a href="#s1-qdisk-considerations-CA">Considerations for Using Quorum Disk</a></dt>
                  <dt>considerations for using quorum disk, <a href="#s1-qdisk-considerations-CA">Considerations for Using Quorum Disk</a></dt>
                  <dt>diagnosing and correcting problems in a cluster, <a href="#s1-admin-problems-conga-CA">Diagnosing and Correcting Problems in a Cluster</a>, <a href="#s1-admin-problems-CA">Diagnosing and Correcting Problems in a Cluster</a></dt>
                  <dt>disabling the cluster software, <a href="#s1-admin-disable-CA">Disabling the Cluster Software</a></dt>
                  <dt>displaying cluster and service status, <a href="#s2-admin-overview-CA">Cluster Status Tool</a>, <a href="#s1-admin-service-CA">Managing High-Availability Services</a></dt>
                  <dt>enabling IP ports, <a href="#s1-iptables-CA">Enabling IP Ports</a></dt>
                  <dt>general considerations, <a href="#s1-clust-config-considerations-CA">General Configuration Considerations</a></dt>
                  <dt>managing cluster node, <a href="#s1-admin-manage-nodes-conga-CA">Managing Cluster Nodes</a></dt>
                  <dt>managing high-availability services, <a href="#s1-admin-manage-ha-services-conga-CA">Managing High-Availability Services</a></dt>
                  <dt>modifying the cluster configuration, <a href="#s1-admin-modify-CA">Modifying the Cluster Configuration</a></dt>
                  <dt>network switches and multicast addresses, <a href="#s1-multicast-considerations-CA">Multicast Addresses</a></dt>
                  <dt>restoring the cluster database, <a href="#s1-admin-backup-CA">Backing Up and Restoring the Cluster Database</a></dt>
                  <dt>starting and stopping the cluster software, <a href="#s1-admin-start-CA">Starting and Stopping the Cluster Software</a></dt>
                  <dt>starting, stopping, restarting, and deleting a cluster, <a href="#s1-admin-start-conga-CA">Starting, Stopping, and Deleting Clusters</a></dt>
                </dl>
              </dd>
              <dt>cluster configuration, <a href="#ch-config-conga-CA">Configuring Red Hat Cluster With Conga</a></dt>
              <dd>
                <dl>
                  <dt>modifying, <a href="#s1-admin-modify-CA">Modifying the Cluster Configuration</a></dt>
                </dl>
              </dd>
              <dt>Cluster Configuration Tool</dt>
              <dd>
                <dl>
                  <dt>accessing, <a href="#s2-cluconfig-tool-CA">Cluster Configuration Tool</a></dt>
                </dl>
              </dd>
              <dt>cluster database</dt>
              <dd>
                <dl>
                  <dt>backing up, <a href="#s1-admin-backup-CA">Backing Up and Restoring the Cluster Database</a></dt>
                  <dt>restoring, <a href="#s1-admin-backup-CA">Backing Up and Restoring the Cluster Database</a></dt>
                </dl>
              </dd>
              <dt>cluster resource relationships, <a href="#s1-clust-rsc-desc-CA">Parent, Child, and Sibling Relationships Among Resources</a></dt>
              <dt>cluster resource types, <a href="#s1-clust-svc-ov-CA">Considerations for Configuring HA Services</a></dt>
              <dt>cluster service</dt>
              <dd>
                <dl>
                  <dt>displaying status, <a href="#s2-admin-overview-CA">Cluster Status Tool</a>, <a href="#s1-admin-service-CA">Managing High-Availability Services</a></dt>
                </dl>
              </dd>
              <dt>cluster service configuration</dt>
              <dd>
                <dl>
                  <dt>overview, <a href="#s1-clust-svc-ov-CA">Considerations for Configuring HA Services</a></dt>
                </dl>
              </dd>
              <dt>cluster service managers</dt>
              <dd>
                <dl>
                  <dt>configuration, <a href="#s1-add-service-conga-CA">Adding a Cluster Service to the Cluster</a>, <a href="#s1-add-service-CA">Adding a Cluster Service to the Cluster</a>, <a href="#s1-propagate-config-CA">Propagating The Configuration File: New Cluster</a></dt>
                </dl>
              </dd>
              <dt>cluster services, <a href="#s1-add-service-conga-CA">Adding a Cluster Service to the Cluster</a>, <a href="#s1-add-service-CA">Adding a Cluster Service to the Cluster</a></dt>
              <dd>
                <dl>
                  <dt>(see also adding to the cluster configuration)</dt>
                  <dt>Apache HTTP Server, setting up, <a href="#ap-httpd-service-CA">Example of Setting Up Apache HTTP Server</a></dt>
                  <dd>
                    <dl>
                      <dt>httpd.conf, <a href="#s1-apache-inshttpd-CA">Installing and Configuring the Apache HTTP Server</a></dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>cluster software</dt>
              <dd>
                <dl>
                  <dt>configuration, <a href="#ch-config-conga-CA">Configuring Red Hat Cluster With Conga</a></dt>
                  <dt>disabling, <a href="#s1-admin-disable-CA">Disabling the Cluster Software</a></dt>
                  <dt>installation and configuration, <a href="#ch-config-scc-CA">Configuring Red Hat Cluster With system-config-cluster</a></dt>
                  <dt>starting and stopping, <a href="#s1-admin-start-CA">Starting and Stopping the Cluster Software</a></dt>
                </dl>
              </dd>
              <dt>cluster software installation and configuration, <a href="#ch-config-scc-CA">Configuring Red Hat Cluster With system-config-cluster</a></dt>
              <dt>cluster storage</dt>
              <dd>
                <dl>
                  <dt>configuration, <a href="#s1-config-storage-conga-CA">Configuring Cluster Storage</a></dt>
                </dl>
              </dd>
              <dt>command line tools table, <a href="#s1-cmdlinetools-overview-CA">Command Line Administration Tools</a></dt>
              <dt>configuration</dt>
              <dd>
                <dl>
                  <dt>cluster service, <a href="#s1-clust-svc-ov-CA">Considerations for Configuring HA Services</a></dt>
                </dl>
              </dd>
              <dt>configuration file</dt>
              <dd>
                <dl>
                  <dt>propagation of, <a href="#s1-propagate-config-CA">Propagating The Configuration File: New Cluster</a></dt>
                </dl>
              </dd>
              <dt>configuring cluster storage , <a href="#s1-config-storage-conga-CA">Configuring Cluster Storage</a></dt>
              <dt>Conga</dt>
              <dd>
                <dl>
                  <dt>accessing, <a href="#s2-config-cluster-CA">Configuring Red Hat Cluster Software</a></dt>
                  <dt>considerations for cluster administration, <a href="#s1-conga-considerations-CA">Considerations for Using Conga</a></dt>
                  <dt>overview, <a href="#s1-conga-overview-CA">Conga</a></dt>
                </dl>
              </dd>
              <dt>Conga overview, <a href="#s1-conga-overview-CA">Conga</a></dt>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>F</h3>
            <dl>
              <dt>feedback, <a href="#s1-intro-feedback-CA">Feedback</a></dt>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>G</h3>
            <dl>
              <dt>general</dt>
              <dd>
                <dl>
                  <dt>considerations for cluster administration, <a href="#s1-clust-config-considerations-CA">General Configuration Considerations</a></dt>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>H</h3>
            <dl>
              <dt>hardware</dt>
              <dd>
                <dl>
                  <dt>compatible, <a href="#s1-hw-compat-CA">Compatible Hardware</a></dt>
                </dl>
              </dd>
              <dt>HTTP services</dt>
              <dd>
                <dl>
                  <dt>Apache HTTP Server</dt>
                  <dd>
                    <dl>
                      <dt>httpd.conf, <a href="#s1-apache-inshttpd-CA">Installing and Configuring the Apache HTTP Server</a></dt>
                      <dt>setting up, <a href="#ap-httpd-service-CA">Example of Setting Up Apache HTTP Server</a></dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>I</h3>
            <dl>
              <dt>integrated fence devices</dt>
              <dd>
                <dl>
                  <dt>configuring ACPI, <a href="#s1-acpi-CA">Configuring ACPI For Use with Integrated Fence Devices</a></dt>
                </dl>
              </dd>
              <dt>introduction, <a href="#ch-intro-CA">Introduction</a></dt>
              <dd>
                <dl>
                  <dt>other Red Hat Enterprise Linux documents, <a href="#ch-intro-CA">Introduction</a></dt>
                </dl>
              </dd>
              <dt>IP ports</dt>
              <dd>
                <dl>
                  <dt>enabling, <a href="#s1-iptables-CA">Enabling IP Ports</a></dt>
                </dl>
              </dd>
              <dt>iptables</dt>
              <dd>
                <dl>
                  <dt>configuring, <a href="#s1-iptables-CA">Enabling IP Ports</a></dt>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>M</h3>
            <dl>
              <dt>max_luns</dt>
              <dd>
                <dl>
                  <dt>configuring, <a href="#s1-max-luns-CA">Configuring max_luns</a></dt>
                </dl>
              </dd>
              <dt>multicast addresses</dt>
              <dd>
                <dl>
                  <dt>considerations for using with network switches and multicast addresses, <a href="#s1-multicast-considerations-CA">Multicast Addresses</a></dt>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>P</h3>
            <dl>
              <dt>parameters, fence device, <a href="#ap-fence-device-param-CA">Fence Device Parameters</a></dt>
              <dt>parameters, HA resources, <a href="#ap-ha-resource-params-CA">HA Resource Parameters</a></dt>
              <dt>power controller connection, configuring, <a href="#ap-fence-device-param-CA">Fence Device Parameters</a></dt>
              <dt>power switch, <a href="#ap-fence-device-param-CA">Fence Device Parameters</a></dt>
              <dd>
                <dl>
                  <dt>(see also power controller)</dt>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>Q</h3>
            <dl>
              <dt>qdisk</dt>
              <dd>
                <dl>
                  <dt>considerations for using, <a href="#s1-qdisk-considerations-CA">Considerations for Using Quorum Disk</a></dt>
                </dl>
              </dd>
              <dt>quorum disk</dt>
              <dd>
                <dl>
                  <dt>considerations for using, <a href="#s1-qdisk-considerations-CA">Considerations for Using Quorum Disk</a></dt>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>R</h3>
            <dl>
              <dt>relationships</dt>
              <dd>
                <dl>
                  <dt>cluster resource, <a href="#s1-clust-rsc-desc-CA">Parent, Child, and Sibling Relationships Among Resources</a></dt>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>S</h3>
            <dl>
              <dt>starting the cluster software, <a href="#s1-starting-cluster-CA">Starting the Cluster Software</a></dt>
              <dt>System V init, <a href="#s1-admin-start-CA">Starting and Stopping the Cluster Software</a></dt>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>T</h3>
            <dl>
              <dt>table</dt>
              <dd>
                <dl>
                  <dt>command line tools, <a href="#s1-cmdlinetools-overview-CA">Command Line Administration Tools</a></dt>
                </dl>
              </dd>
              <dt>tables</dt>
              <dd>
                <dl>
                  <dt>HA resources, parameters, <a href="#ap-ha-resource-params-CA">HA Resource Parameters</a></dt>
                  <dt>power controller connection, configuring, <a href="#ap-fence-device-param-CA">Fence Device Parameters</a></dt>
                </dl>
              </dd>
              <dt>troubleshooting</dt>
              <dd>
                <dl>
                  <dt>diagnosing and correcting problems in a cluster, <a href="#s1-admin-problems-conga-CA">Diagnosing and Correcting Problems in a Cluster</a>, <a href="#s1-admin-problems-CA">Diagnosing and Correcting Problems in a Cluster</a></dt>
                </dl>
              </dd>
              <dt>types</dt>
              <dd>
                <dl>
                  <dt>cluster resource, <a href="#s1-clust-svc-ov-CA">Considerations for Configuring HA Services</a></dt>
                </dl>
              </dd>
            </dl>
          </div>
          <div class="indexdiv">
            <h3>U</h3>
            <dl>
              <dt>upgrading, RHEL 4 to RHEL 5, <a href="#ap-upgrade-rhel4-to-rhel5-CA">Upgrading A Red Hat Cluster from RHEL 4 to RHEL 5</a></dt>
            </dl>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
